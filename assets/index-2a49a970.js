import{d as ve,u as Nn,i as Me,o as ie,c as re,a as kt,w as Ze,v as Qe,b as Z,e as z,r as Un,f as et,g as te,h as ce,j as tt,k as fe,l as Ie,n as Wn,m as yi,F as He,p as Rt,q as Lt,t as Re,s as wi,_ as Dt,x as jn,y as $n,z as At,__tla as zn}from"./index-d6e792e7.js";let Tt,Ei,qn=Promise.all([(()=>{try{return zn}catch{}})()]).then(async()=>{var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Tt=function(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h};const ki="/assets/socialite-0d9c20e3.jpg",Ri="/assets/background-24453330.jpg",Li={class:"first-page"},Di={class:"background-container"},Ai=ve({__name:"firstPage",setup(h){Nn();const p=Me("sizeCnt");function b(){window.scrollTo({top:window.innerHeight-10,behavior:"smooth"})}return(y,A)=>(ie(),re("div",Li,[A[1]||(A[1]=kt('<div class="describe"><div class="gradient-font">Pivot Lang --</div><div class="gradient-font">A</div><div class="gradient-font">General Purpose Language</div><div class="detail-describe">Rust-like grammar with GC.</div></div>',1)),Ze(z("div",Di,A[0]||(A[0]=[z("img",{fetchpriority:"high",src:Ri},null,-1)]),512),[[Qe,Z(p)<=1]]),z("div",{class:"bottom"},[z("div",{class:"start-button",onClick:b,style:{cursor:"pointer"}},"Try It")])]))}}),Ti="/assets/LSP-hint-87b8dc97.png",Oi="/assets/LSP-reference-d82cb186.png",Bi="/assets/debug_code-bcb5bca1.png",Pi="/assets/debug_value-670e2094.png",ge=(h,p)=>{const b=h.__vccOpts||h;for(const[y,A]of p)b[y]=A;return b},Mi={},Ii={id:"advantage"};function Hi(h,p){return ie(),re("div",Ii,p[0]||(p[0]=[kt('<div class="gradient-font title" data-v-9f46c044>First Class VSC support</div><div class="advantage-item" data-v-9f46c044><div class="left detail-describe text-describe" data-v-9f46c044><div class="title-text" data-v-9f46c044>Code fast, code easy</div><div data-v-9f46c044>We provide Code Hints, Code jump, Reference lookup, semantic highlights and more...</div></div><div class="right picture lsp-img" data-v-9f46c044><img src="'+Ti+'" data-v-9f46c044><img src="'+Oi+'" data-v-9f46c044></div></div><div class="advantage-item" data-v-9f46c044><div class="right detail-describe text-describe" data-v-9f46c044><div class="title-text" data-v-9f46c044>Debug with a single click</div><div data-v-9f46c044>We have complete debug support on every major platform.</div></div><div class="left picture debug-img" data-v-9f46c044><img src="'+Bi+'" data-v-9f46c044><img src="'+Pi+'" data-v-9f46c044></div></div>',3)]))}const Fi=ge(Mi,[["render",Hi],["__scopeId","data-v-9f46c044"]]),Ni="/assets/rightArrow-6db3b7c3.svg",Ui={key:0,src:Ni},Wi=ve({__name:"link",props:{newWindow:{type:Boolean,default:!0},href:{type:String,required:!0},arrowShow:{type:Boolean,default:!0}},setup(h){Me("isMobile");const p=Me("isPc"),b=h;function y(){b.newWindow?window.open(b.href):window.location.href=b.href}return(A,L)=>(ie(),re("div",{class:"link",onClick:y},[Un(A.$slots,"default",{},void 0,!0),b.arrowShow&&Z(p)?(ie(),re("img",Ui)):et("",!0)]))}}),oe=ge(Wi,[["__scopeId","data-v-ae0f4fc0"]]),Bt="/assets/logo_dark-f7ca8d17.svg",ji={class:"nav"},$i={class:"left"},zi={class:"right"},qi=ve({__name:"nav",setup(h){const p=Me("isMobile");return(b,y)=>(ie(),re("div",ji,[z("div",$i,[te(oe,{newWindow:!1,arrowShow:!1,href:"https://github.com/Pivot-Studio/pivot-lang"},{default:ce(()=>y[0]||(y[0]=[z("img",{src:Bt},null,-1),tt(" Pivot Lang ")])),_:1})]),z("div",zi,[te(oe,{href:"https://github.com/Pivot-Studio/pivot-lang"},{default:ce(()=>y[1]||(y[1]=[z("div",{class:"github"},[z("a",null,[z("img",{alt:"Github",src:"https://d33wubrfki0l68.cloudfront.net/43f2732eec420aa8a930fc3239ef0469c3d760a8/5d500/community/github.svg"})])],-1)])),_:1}),te(oe,{newWindow:!0,href:"https://pivotlang.tech/docs/index.html"},{default:ce(()=>y[2]||(y[2]=[z("div",{class:"txt"},"Get Started",-1)])),_:1}),te(oe,{newWindow:!0,href:"https://github.com/Pivot-Studio/pivot-lang/blob/master/test/test/generic.pi"},{default:ce(()=>y[3]||(y[3]=[z("div",{class:"txt"},"Use Cases",-1)])),_:1}),Ze(te(oe,{newWindow:!0,href:"https://pivotlang.tech/index.html"},{default:ce(()=>y[4]||(y[4]=[z("div",{class:"txt"},"Community",-1)])),_:1},512),[[Qe,!Z(p)]])])]))}}),Ki=ge(qi,[["__scopeId","data-v-c6ee1f2a"]]);function Pt(h,p){return function(){return h.apply(p,arguments)}}const{toString:Vi}=Object.prototype,{getPrototypeOf:it}=Object,Fe=(h=>p=>{const b=Vi.call(p);return h[b]||(h[b]=b.slice(8,-1).toLowerCase())})(Object.create(null)),_e=h=>(h=h.toLowerCase(),p=>Fe(p)===h),Ne=h=>p=>typeof p===h,{isArray:Ee}=Array,Le=Ne("undefined");function Gi(h){return h!==null&&!Le(h)&&h.constructor!==null&&!Le(h.constructor)&&de(h.constructor.isBuffer)&&h.constructor.isBuffer(h)}const Mt=_e("ArrayBuffer");function Xi(h){let p;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?p=ArrayBuffer.isView(h):p=h&&h.buffer&&Mt(h.buffer),p}const Ji=Ne("string"),de=Ne("function"),It=Ne("number"),Ue=h=>h!==null&&typeof h=="object",Yi=h=>h===!0||h===!1,We=h=>{if(Fe(h)!=="object")return!1;const p=it(h);return(p===null||p===Object.prototype||Object.getPrototypeOf(p)===null)&&!(Symbol.toStringTag in h)&&!(Symbol.iterator in h)},Zi=_e("Date"),Qi=_e("File"),es=_e("Blob"),ts=_e("FileList"),is=h=>Ue(h)&&de(h.pipe),ss=h=>{let p;return h&&(typeof FormData=="function"&&h instanceof FormData||de(h.append)&&((p=Fe(h))==="formdata"||p==="object"&&de(h.toString)&&h.toString()==="[object FormData]"))},rs=_e("URLSearchParams"),[ns,os,as,cs]=["ReadableStream","Request","Response","Headers"].map(_e),ls=h=>h.trim?h.trim():h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function De(h,p,{allOwnKeys:b=!1}={}){if(h===null||typeof h>"u")return;let y,A;if(typeof h!="object"&&(h=[h]),Ee(h))for(y=0,A=h.length;y<A;y++)p.call(null,h[y],y,h);else{const L=b?Object.getOwnPropertyNames(h):Object.keys(h),w=L.length;let s;for(y=0;y<w;y++)s=L[y],p.call(null,h[s],s,h)}}function Ht(h,p){p=p.toLowerCase();const b=Object.keys(h);let y=b.length,A;for(;y-- >0;)if(A=b[y],p===A.toLowerCase())return A;return null}const ye=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ft=h=>!Le(h)&&h!==ye;function st(){const{caseless:h}=Ft(this)&&this||{},p={},b=(y,A)=>{const L=h&&Ht(p,A)||A;We(p[L])&&We(y)?p[L]=st(p[L],y):We(y)?p[L]=st({},y):Ee(y)?p[L]=y.slice():p[L]=y};for(let y=0,A=arguments.length;y<A;y++)arguments[y]&&De(arguments[y],b);return p}const hs=(h,p,b,{allOwnKeys:y}={})=>(De(p,(A,L)=>{b&&de(A)?h[L]=Pt(A,b):h[L]=A},{allOwnKeys:y}),h),ds=h=>(h.charCodeAt(0)===65279&&(h=h.slice(1)),h),us=(h,p,b,y)=>{h.prototype=Object.create(p.prototype,y),h.prototype.constructor=h,Object.defineProperty(h,"super",{value:p.prototype}),b&&Object.assign(h.prototype,b)},fs=(h,p,b,y)=>{let A,L,w;const s={};if(p=p||{},h==null)return p;do{for(A=Object.getOwnPropertyNames(h),L=A.length;L-- >0;)w=A[L],(!y||y(w,h,p))&&!s[w]&&(p[w]=h[w],s[w]=!0);h=b!==!1&&it(h)}while(h&&(!b||b(h,p))&&h!==Object.prototype);return p},_s=(h,p,b)=>{h=String(h),(b===void 0||b>h.length)&&(b=h.length),b-=p.length;const y=h.indexOf(p,b);return y!==-1&&y===b},ps=h=>{if(!h)return null;if(Ee(h))return h;let p=h.length;if(!It(p))return null;const b=new Array(p);for(;p-- >0;)b[p]=h[p];return b},vs=(h=>p=>h&&p instanceof h)(typeof Uint8Array<"u"&&it(Uint8Array)),gs=(h,p)=>{const b=(h&&h[Symbol.iterator]).call(h);let y;for(;(y=b.next())&&!y.done;){const A=y.value;p.call(h,A[0],A[1])}},ms=(h,p)=>{let b;const y=[];for(;(b=h.exec(p))!==null;)y.push(b);return y},Ss=_e("HTMLFormElement"),bs=h=>h.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(p,b,y){return b.toUpperCase()+y}),Nt=(({hasOwnProperty:h})=>(p,b)=>h.call(p,b))(Object.prototype),Cs=_e("RegExp"),Ut=(h,p)=>{const b=Object.getOwnPropertyDescriptors(h),y={};De(b,(A,L)=>{let w;(w=p(A,L,h))!==!1&&(y[L]=w||A)}),Object.defineProperties(h,y)},ys=h=>{Ut(h,(p,b)=>{if(de(h)&&["arguments","caller","callee"].indexOf(b)!==-1)return!1;const y=h[b];if(de(y)){if(p.enumerable=!1,"writable"in p){p.writable=!1;return}p.set||(p.set=()=>{throw Error("Can not rewrite read-only method '"+b+"'")})}})},ws=(h,p)=>{const b={},y=A=>{A.forEach(L=>{b[L]=!0})};return Ee(h)?y(h):y(String(h).split(p)),b},Es=()=>{},xs=(h,p)=>h!=null&&Number.isFinite(h=+h)?h:p,rt="abcdefghijklmnopqrstuvwxyz",Wt="0123456789",jt={DIGIT:Wt,ALPHA:rt,ALPHA_DIGIT:rt+rt.toUpperCase()+Wt},ks=(h=16,p=jt.ALPHA_DIGIT)=>{let b="";const{length:y}=p;for(;h--;)b+=p[Math.random()*y|0];return b};function Rs(h){return!!(h&&de(h.append)&&h[Symbol.toStringTag]==="FormData"&&h[Symbol.iterator])}const Ls=h=>{const p=new Array(10),b=(y,A)=>{if(Ue(y)){if(p.indexOf(y)>=0)return;if(!("toJSON"in y)){p[A]=y;const L=Ee(y)?[]:{};return De(y,(w,s)=>{const n=b(w,A+1);!Le(n)&&(L[s]=n)}),p[A]=void 0,L}}return y};return b(h,0)},Ds=_e("AsyncFunction"),As=h=>h&&(Ue(h)||de(h))&&de(h.then)&&de(h.catch),$t=((h,p)=>h?setImmediate:p?((b,y)=>(ye.addEventListener("message",({source:A,data:L})=>{A===ye&&L===b&&y.length&&y.shift()()},!1),A=>{y.push(A),ye.postMessage(b,"*")}))(`axios@${Math.random()}`,[]):b=>setTimeout(b))(typeof setImmediate=="function",de(ye.postMessage)),Ts=typeof queueMicrotask<"u"?queueMicrotask.bind(ye):typeof process<"u"&&process.nextTick||$t,I={isArray:Ee,isArrayBuffer:Mt,isBuffer:Gi,isFormData:ss,isArrayBufferView:Xi,isString:Ji,isNumber:It,isBoolean:Yi,isObject:Ue,isPlainObject:We,isReadableStream:ns,isRequest:os,isResponse:as,isHeaders:cs,isUndefined:Le,isDate:Zi,isFile:Qi,isBlob:es,isRegExp:Cs,isFunction:de,isStream:is,isURLSearchParams:rs,isTypedArray:vs,isFileList:ts,forEach:De,merge:st,extend:hs,trim:ls,stripBOM:ds,inherits:us,toFlatObject:fs,kindOf:Fe,kindOfTest:_e,endsWith:_s,toArray:ps,forEachEntry:gs,matchAll:ms,isHTMLForm:Ss,hasOwnProperty:Nt,hasOwnProp:Nt,reduceDescriptors:Ut,freezeMethods:ys,toObjectSet:ws,toCamelCase:bs,noop:Es,toFiniteNumber:xs,findKey:Ht,global:ye,isContextDefined:Ft,ALPHABET:jt,generateString:ks,isSpecCompliantForm:Rs,toJSONObject:Ls,isAsyncFn:Ds,isThenable:As,setImmediate:$t,asap:Ts};function J(h,p,b,y,A){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=h,this.name="AxiosError",p&&(this.code=p),b&&(this.config=b),y&&(this.request=y),A&&(this.response=A,this.status=A.status?A.status:null)}I.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const zt=J.prototype,qt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(h=>{qt[h]={value:h}}),Object.defineProperties(J,qt),Object.defineProperty(zt,"isAxiosError",{value:!0}),J.from=(h,p,b,y,A,L)=>{const w=Object.create(zt);return I.toFlatObject(h,w,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),J.call(w,h.message,p,b,y,A),w.cause=h,w.name=h.name,L&&Object.assign(w,L),w};const Os=null;function nt(h){return I.isPlainObject(h)||I.isArray(h)}function Kt(h){return I.endsWith(h,"[]")?h.slice(0,-2):h}function Vt(h,p,b){return h?h.concat(p).map(function(y,A){return y=Kt(y),!b&&A?"["+y+"]":y}).join(b?".":""):p}function Bs(h){return I.isArray(h)&&!h.some(nt)}const Ps=I.toFlatObject(I,{},null,function(h){return/^is[A-Z]/.test(h)});function je(h,p,b){if(!I.isObject(h))throw new TypeError("target must be an object");p=p||new FormData,b=I.toFlatObject(b,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,S){return!I.isUndefined(S[g])});const y=b.metaTokens,A=b.visitor||c,L=b.dots,w=b.indexes,s=(b.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(p);if(!I.isFunction(A))throw new TypeError("visitor must be a function");function n(g){if(g===null)return"";if(I.isDate(g))return g.toISOString();if(!s&&I.isBlob(g))throw new J("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(g)||I.isTypedArray(g)?s&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,S,f){let i=g;if(g&&!f&&typeof g=="object"){if(I.endsWith(S,"{}"))S=y?S:S.slice(0,-2),g=JSON.stringify(g);else if(I.isArray(g)&&Bs(g)||(I.isFileList(g)||I.endsWith(S,"[]"))&&(i=I.toArray(g)))return S=Kt(S),i.forEach(function(r,t){!(I.isUndefined(r)||r===null)&&p.append(w===!0?Vt([S],t,L):w===null?S:S+"[]",n(r))}),!1}return nt(g)?!0:(p.append(Vt(f,S,L),n(g)),!1)}const u=[],o=Object.assign(Ps,{defaultVisitor:c,convertValue:n,isVisitable:nt});function _(g,S){if(!I.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+S.join("."));u.push(g),I.forEach(g,function(f,i){(!(I.isUndefined(f)||f===null)&&A.call(p,f,I.isString(i)?i.trim():i,S,o))===!0&&_(f,S?S.concat(i):[i])}),u.pop()}}if(!I.isObject(h))throw new TypeError("data must be an object");return _(h),p}function Gt(h){const p={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(h).replace(/[!'()~]|%20|%00/g,function(b){return p[b]})}function ot(h,p){this._pairs=[],h&&je(h,this,p)}const Xt=ot.prototype;Xt.append=function(h,p){this._pairs.push([h,p])},Xt.toString=function(h){const p=h?function(b){return h.call(this,b,Gt)}:Gt;return this._pairs.map(function(b){return p(b[0])+"="+p(b[1])},"").join("&")};function Ms(h){return encodeURIComponent(h).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jt(h,p,b){if(!p)return h;const y=b&&b.encode||Ms,A=b&&b.serialize;let L;if(A?L=A(p,b):L=I.isURLSearchParams(p)?p.toString():new ot(p,b).toString(y),L){const w=h.indexOf("#");w!==-1&&(h=h.slice(0,w)),h+=(h.indexOf("?")===-1?"?":"&")+L}return h}class Is{constructor(){this.handlers=[]}use(p,b,y){return this.handlers.push({fulfilled:p,rejected:b,synchronous:y?y.synchronous:!1,runWhen:y?y.runWhen:null}),this.handlers.length-1}eject(p){this.handlers[p]&&(this.handlers[p]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(p){I.forEach(this.handlers,function(b){b!==null&&p(b)})}}const Yt=Is,Zt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hs=typeof URLSearchParams<"u"?URLSearchParams:ot,Fs=typeof FormData<"u"?FormData:null,Ns=typeof Blob<"u"?Blob:null,Us={isBrowser:!0,classes:{URLSearchParams:Hs,FormData:Fs,Blob:Ns},protocols:["http","https","file","blob","url","data"]},at=typeof window<"u"&&typeof document<"u",ct=typeof navigator=="object"&&navigator||void 0,Ws=at&&(!ct||["ReactNative","NativeScript","NS"].indexOf(ct.product)<0),js=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),$s=at&&window.location.href||"http://localhost",zs=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:at,hasStandardBrowserEnv:Ws,hasStandardBrowserWebWorkerEnv:js,navigator:ct,origin:$s},Symbol.toStringTag,{value:"Module"})),le={...zs,...Us};function qs(h,p){return je(h,new le.classes.URLSearchParams,Object.assign({visitor:function(b,y,A,L){return le.isNode&&I.isBuffer(b)?(this.append(y,b.toString("base64")),!1):L.defaultVisitor.apply(this,arguments)}},p))}function Ks(h){return I.matchAll(/\w+|\[(\w*)]/g,h).map(p=>p[0]==="[]"?"":p[1]||p[0])}function Vs(h){const p={},b=Object.keys(h);let y;const A=b.length;let L;for(y=0;y<A;y++)L=b[y],p[L]=h[L];return p}function Qt(h){function p(b,y,A,L){let w=b[L++];if(w==="__proto__")return!0;const s=Number.isFinite(+w),n=L>=b.length;return w=!w&&I.isArray(A)?A.length:w,n?(I.hasOwnProp(A,w)?A[w]=[A[w],y]:A[w]=y,!s):((!A[w]||!I.isObject(A[w]))&&(A[w]=[]),p(b,y,A[w],L)&&I.isArray(A[w])&&(A[w]=Vs(A[w])),!s)}if(I.isFormData(h)&&I.isFunction(h.entries)){const b={};return I.forEachEntry(h,(y,A)=>{p(Ks(y),A,b,0)}),b}return null}function Gs(h,p,b){if(I.isString(h))try{return(p||JSON.parse)(h),I.trim(h)}catch(y){if(y.name!=="SyntaxError")throw y}return(b||JSON.stringify)(h)}const lt={transitional:Zt,adapter:["xhr","http","fetch"],transformRequest:[function(h,p){const b=p.getContentType()||"",y=b.indexOf("application/json")>-1,A=I.isObject(h);if(A&&I.isHTMLForm(h)&&(h=new FormData(h)),I.isFormData(h))return y?JSON.stringify(Qt(h)):h;if(I.isArrayBuffer(h)||I.isBuffer(h)||I.isStream(h)||I.isFile(h)||I.isBlob(h)||I.isReadableStream(h))return h;if(I.isArrayBufferView(h))return h.buffer;if(I.isURLSearchParams(h))return p.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),h.toString();let L;if(A){if(b.indexOf("application/x-www-form-urlencoded")>-1)return qs(h,this.formSerializer).toString();if((L=I.isFileList(h))||b.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return je(L?{"files[]":h}:h,w&&new w,this.formSerializer)}}return A||y?(p.setContentType("application/json",!1),Gs(h)):h}],transformResponse:[function(h){const p=this.transitional||lt.transitional,b=p&&p.forcedJSONParsing,y=this.responseType==="json";if(I.isResponse(h)||I.isReadableStream(h))return h;if(h&&I.isString(h)&&(b&&!this.responseType||y)){const A=!(p&&p.silentJSONParsing)&&y;try{return JSON.parse(h)}catch(L){if(A)throw L.name==="SyntaxError"?J.from(L,J.ERR_BAD_RESPONSE,this,null,this.response):L}}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(h){return h>=200&&h<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],h=>{lt.headers[h]={}});const ht=lt,Xs=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Js=h=>{const p={};let b,y,A;return h&&h.split(`
`).forEach(function(L){A=L.indexOf(":"),b=L.substring(0,A).trim().toLowerCase(),y=L.substring(A+1).trim(),!(!b||p[b]&&Xs[b])&&(b==="set-cookie"?p[b]?p[b].push(y):p[b]=[y]:p[b]=p[b]?p[b]+", "+y:y)}),p},ei=Symbol("internals");function Ae(h){return h&&String(h).trim().toLowerCase()}function $e(h){return h===!1||h==null?h:I.isArray(h)?h.map($e):String(h)}function Ys(h){const p=Object.create(null),b=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let y;for(;y=b.exec(h);)p[y[1]]=y[2];return p}const Zs=h=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(h.trim());function dt(h,p,b,y,A){if(I.isFunction(y))return y.call(this,p,b);if(A&&(p=b),!!I.isString(p)){if(I.isString(y))return p.indexOf(y)!==-1;if(I.isRegExp(y))return y.test(p)}}function Qs(h){return h.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(p,b,y)=>b.toUpperCase()+y)}function er(h,p){const b=I.toCamelCase(" "+p);["get","set","has"].forEach(y=>{Object.defineProperty(h,y+b,{value:function(A,L,w){return this[y].call(this,p,A,L,w)},configurable:!0})})}class ze{constructor(p){p&&this.set(p)}set(p,b,y){const A=this;function L(s,n,c){const u=Ae(n);if(!u)throw new Error("header name must be a non-empty string");const o=I.findKey(A,u);(!o||A[o]===void 0||c===!0||c===void 0&&A[o]!==!1)&&(A[o||n]=$e(s))}const w=(s,n)=>I.forEach(s,(c,u)=>L(c,u,n));if(I.isPlainObject(p)||p instanceof this.constructor)w(p,b);else if(I.isString(p)&&(p=p.trim())&&!Zs(p))w(Js(p),b);else if(I.isHeaders(p))for(const[s,n]of p.entries())L(n,s,y);else p!=null&&L(b,p,y);return this}get(p,b){if(p=Ae(p),p){const y=I.findKey(this,p);if(y){const A=this[y];if(!b)return A;if(b===!0)return Ys(A);if(I.isFunction(b))return b.call(this,A,y);if(I.isRegExp(b))return b.exec(A);throw new TypeError("parser must be boolean|regexp|function")}}}has(p,b){if(p=Ae(p),p){const y=I.findKey(this,p);return!!(y&&this[y]!==void 0&&(!b||dt(this,this[y],y,b)))}return!1}delete(p,b){const y=this;let A=!1;function L(w){if(w=Ae(w),w){const s=I.findKey(y,w);s&&(!b||dt(y,y[s],s,b))&&(delete y[s],A=!0)}}return I.isArray(p)?p.forEach(L):L(p),A}clear(p){const b=Object.keys(this);let y=b.length,A=!1;for(;y--;){const L=b[y];(!p||dt(this,this[L],L,p,!0))&&(delete this[L],A=!0)}return A}normalize(p){const b=this,y={};return I.forEach(this,(A,L)=>{const w=I.findKey(y,L);if(w){b[w]=$e(A),delete b[L];return}const s=p?Qs(L):String(L).trim();s!==L&&delete b[L],b[s]=$e(A),y[s]=!0}),this}concat(...p){return this.constructor.concat(this,...p)}toJSON(p){const b=Object.create(null);return I.forEach(this,(y,A)=>{y!=null&&y!==!1&&(b[A]=p&&I.isArray(y)?y.join(", "):y)}),b}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([p,b])=>p+": "+b).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(p){return p instanceof this?p:new this(p)}static concat(p,...b){const y=new this(p);return b.forEach(A=>y.set(A)),y}static accessor(p){const b=(this[ei]=this[ei]={accessors:{}}).accessors,y=this.prototype;function A(L){const w=Ae(L);b[w]||(er(y,L),b[w]=!0)}return I.isArray(p)?p.forEach(A):A(p),this}}ze.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),I.reduceDescriptors(ze.prototype,({value:h},p)=>{let b=p[0].toUpperCase()+p.slice(1);return{get:()=>h,set(y){this[b]=y}}}),I.freezeMethods(ze);const pe=ze;function ut(h,p){const b=this||ht,y=p||b,A=pe.from(y.headers);let L=y.data;return I.forEach(h,function(w){L=w.call(b,L,A.normalize(),p?p.status:void 0)}),A.normalize(),L}function ti(h){return!!(h&&h.__CANCEL__)}function xe(h,p,b){J.call(this,h??"canceled",J.ERR_CANCELED,p,b),this.name="CanceledError"}I.inherits(xe,J,{__CANCEL__:!0});function ii(h,p,b){const y=b.config.validateStatus;!b.status||!y||y(b.status)?h(b):p(new J("Request failed with status code "+b.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(b.status/100)-4],b.config,b.request,b))}function tr(h){const p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(h);return p&&p[1]||""}function ir(h,p){h=h||10;const b=new Array(h),y=new Array(h);let A=0,L=0,w;return p=p!==void 0?p:1e3,function(s){const n=Date.now(),c=y[L];w||(w=n),b[A]=s,y[A]=n;let u=L,o=0;for(;u!==A;)o+=b[u++],u=u%h;if(A=(A+1)%h,A===L&&(L=(L+1)%h),n-w<p)return;const _=c&&n-c;return _?Math.round(o*1e3/_):void 0}}function sr(h,p){let b=0,y=1e3/p,A,L;const w=(s,n=Date.now())=>{b=n,A=null,L&&(clearTimeout(L),L=null),h.apply(null,s)};return[(...s)=>{const n=Date.now(),c=n-b;c>=y?w(s,n):(A=s,L||(L=setTimeout(()=>{L=null,w(A)},y-c)))},()=>A&&w(A)]}const qe=(h,p,b=3)=>{let y=0;const A=ir(50,250);return sr(L=>{const w=L.loaded,s=L.lengthComputable?L.total:void 0,n=w-y,c=A(n),u=w<=s;y=w;const o={loaded:w,total:s,progress:s?w/s:void 0,bytes:n,rate:c||void 0,estimated:c&&s&&u?(s-w)/c:void 0,event:L,lengthComputable:s!=null,[p?"download":"upload"]:!0};h(o)},b)},si=(h,p)=>{const b=h!=null;return[y=>p[0]({lengthComputable:b,total:h,loaded:y}),p[1]]},ri=h=>(...p)=>I.asap(()=>h(...p)),rr=le.hasStandardBrowserEnv?function(){const h=le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent),p=document.createElement("a");let b;function y(A){let L=A;return h&&(p.setAttribute("href",L),L=p.href),p.setAttribute("href",L),{href:p.href,protocol:p.protocol?p.protocol.replace(/:$/,""):"",host:p.host,search:p.search?p.search.replace(/^\?/,""):"",hash:p.hash?p.hash.replace(/^#/,""):"",hostname:p.hostname,port:p.port,pathname:p.pathname.charAt(0)==="/"?p.pathname:"/"+p.pathname}}return b=y(window.location.href),function(A){const L=I.isString(A)?y(A):A;return L.protocol===b.protocol&&L.host===b.host}}():function(){return function(){return!0}}(),nr=le.hasStandardBrowserEnv?{write(h,p,b,y,A,L){const w=[h+"="+encodeURIComponent(p)];I.isNumber(b)&&w.push("expires="+new Date(b).toGMTString()),I.isString(y)&&w.push("path="+y),I.isString(A)&&w.push("domain="+A),L===!0&&w.push("secure"),document.cookie=w.join("; ")},read(h){const p=document.cookie.match(new RegExp("(^|;\\s*)("+h+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove(h){this.write(h,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function or(h){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(h)}function ar(h,p){return p?h.replace(/\/?\/$/,"")+"/"+p.replace(/^\/+/,""):h}function ni(h,p){return h&&!or(p)?ar(h,p):p}const oi=h=>h instanceof pe?{...h}:h;function we(h,p){p=p||{};const b={};function y(c,u,o){return I.isPlainObject(c)&&I.isPlainObject(u)?I.merge.call({caseless:o},c,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function A(c,u,o){if(I.isUndefined(u)){if(!I.isUndefined(c))return y(void 0,c,o)}else return y(c,u,o)}function L(c,u){if(!I.isUndefined(u))return y(void 0,u)}function w(c,u){if(I.isUndefined(u)){if(!I.isUndefined(c))return y(void 0,c)}else return y(void 0,u)}function s(c,u,o){if(o in p)return y(c,u);if(o in h)return y(void 0,c)}const n={url:L,method:L,data:L,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,withXSRFToken:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:s,headers:(c,u)=>A(oi(c),oi(u),!0)};return I.forEach(Object.keys(Object.assign({},h,p)),function(c){const u=n[c]||A,o=u(h[c],p[c],c);I.isUndefined(o)&&u!==s||(b[c]=o)}),b}const ai=h=>{const p=we({},h);let{data:b,withXSRFToken:y,xsrfHeaderName:A,xsrfCookieName:L,headers:w,auth:s}=p;p.headers=w=pe.from(w),p.url=Jt(ni(p.baseURL,p.url),h.params,h.paramsSerializer),s&&w.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let n;if(I.isFormData(b)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)w.setContentType(void 0);else if((n=w.getContentType())!==!1){const[c,...u]=n?n.split(";").map(o=>o.trim()).filter(Boolean):[];w.setContentType([c||"multipart/form-data",...u].join("; "))}}if(le.hasStandardBrowserEnv&&(y&&I.isFunction(y)&&(y=y(p)),y||y!==!1&&rr(p.url))){const c=A&&L&&nr.read(L);c&&w.set(A,c)}return p},cr=typeof XMLHttpRequest<"u",lr=cr&&function(h){return new Promise(function(p,b){const y=ai(h);let A=y.data;const L=pe.from(y.headers).normalize();let{responseType:w,onUploadProgress:s,onDownloadProgress:n}=y,c,u,o,_,g;function S(){_&&_(),g&&g(),y.cancelToken&&y.cancelToken.unsubscribe(c),y.signal&&y.signal.removeEventListener("abort",c)}let f=new XMLHttpRequest;f.open(y.method.toUpperCase(),y.url,!0),f.timeout=y.timeout;function i(){if(!f)return;const t=pe.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),e={data:!w||w==="text"||w==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:t,config:h,request:f};ii(function(a){p(a),S()},function(a){b(a),S()},e),f=null}"onloadend"in f?f.onloadend=i:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(i)},f.onabort=function(){f&&(b(new J("Request aborted",J.ECONNABORTED,h,f)),f=null)},f.onerror=function(){b(new J("Network Error",J.ERR_NETWORK,h,f)),f=null},f.ontimeout=function(){let t=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded";const e=y.transitional||Zt;y.timeoutErrorMessage&&(t=y.timeoutErrorMessage),b(new J(t,e.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,h,f)),f=null},A===void 0&&L.setContentType(null),"setRequestHeader"in f&&I.forEach(L.toJSON(),function(t,e){f.setRequestHeader(e,t)}),I.isUndefined(y.withCredentials)||(f.withCredentials=!!y.withCredentials),w&&w!=="json"&&(f.responseType=y.responseType),n&&([o,g]=qe(n,!0),f.addEventListener("progress",o)),s&&f.upload&&([u,_]=qe(s),f.upload.addEventListener("progress",u),f.upload.addEventListener("loadend",_)),(y.cancelToken||y.signal)&&(c=t=>{f&&(b(!t||t.type?new xe(null,h,f):t),f.abort(),f=null)},y.cancelToken&&y.cancelToken.subscribe(c),y.signal&&(y.signal.aborted?c():y.signal.addEventListener("abort",c)));const r=tr(y.url);if(r&&le.protocols.indexOf(r)===-1){b(new J("Unsupported protocol "+r+":",J.ERR_BAD_REQUEST,h));return}f.send(A||null)})},hr=(h,p)=>{const{length:b}=h=h?h.filter(Boolean):[];if(p||b){let y=new AbortController,A;const L=function(c){if(!A){A=!0,s();const u=c instanceof Error?c:this.reason;y.abort(u instanceof J?u:new xe(u instanceof Error?u.message:u))}};let w=p&&setTimeout(()=>{w=null,L(new J(`timeout ${p} of ms exceeded`,J.ETIMEDOUT))},p);const s=()=>{h&&(w&&clearTimeout(w),w=null,h.forEach(c=>{c.unsubscribe?c.unsubscribe(L):c.removeEventListener("abort",L)}),h=null)};h.forEach(c=>c.addEventListener("abort",L));const{signal:n}=y;return n.unsubscribe=()=>I.asap(s),n}},dr=hr,ur=function*(h,p){let b=h.byteLength;if(!p||b<p){yield h;return}let y=0,A;for(;y<b;)A=y+p,yield h.slice(y,A),y=A},fr=async function*(h,p){for await(const b of _r(h))yield*ur(b,p)},_r=async function*(h){if(h[Symbol.asyncIterator]){yield*h;return}const p=h.getReader();try{for(;;){const{done:b,value:y}=await p.read();if(b)break;yield y}}finally{await p.cancel()}},ci=(h,p,b,y)=>{const A=fr(h,p);let L=0,w,s=n=>{w||(w=!0,y&&y(n))};return new ReadableStream({async pull(n){try{const{done:c,value:u}=await A.next();if(c){s(),n.close();return}let o=u.byteLength;if(b){let _=L+=o;b(_)}n.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(n){return s(n),A.return()}},{highWaterMark:2})},Ke=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",li=Ke&&typeof ReadableStream=="function",pr=Ke&&(typeof TextEncoder=="function"?(h=>p=>h.encode(p))(new TextEncoder):async h=>new Uint8Array(await new Response(h).arrayBuffer())),hi=(h,...p)=>{try{return!!h(...p)}catch{return!1}},vr=li&&hi(()=>{let h=!1;const p=new Request(le.origin,{body:new ReadableStream,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!p}),di=64*1024,ft=li&&hi(()=>I.isReadableStream(new Response("").body)),Ve={stream:ft&&(h=>h.body)};Ke&&(h=>{["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!Ve[p]&&(Ve[p]=I.isFunction(h[p])?b=>b[p]():(b,y)=>{throw new J(`Response type '${p}' is not supported`,J.ERR_NOT_SUPPORT,y)})})})(new Response);const gr=async h=>{if(h==null)return 0;if(I.isBlob(h))return h.size;if(I.isSpecCompliantForm(h))return(await new Request(le.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(I.isArrayBufferView(h)||I.isArrayBuffer(h))return h.byteLength;if(I.isURLSearchParams(h)&&(h=h+""),I.isString(h))return(await pr(h)).byteLength},mr=async(h,p)=>I.toFiniteNumber(h.getContentLength())??gr(p),Sr=Ke&&(async h=>{let{url:p,method:b,data:y,signal:A,cancelToken:L,timeout:w,onDownloadProgress:s,onUploadProgress:n,responseType:c,headers:u,withCredentials:o="same-origin",fetchOptions:_}=ai(h);c=c?(c+"").toLowerCase():"text";let g=dr([A,L&&L.toAbortSignal()],w),S;const f=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let i;try{if(n&&vr&&b!=="get"&&b!=="head"&&(i=await mr(u,y))!==0){let l=new Request(p,{method:"POST",body:y,duplex:"half"}),v;if(I.isFormData(y)&&(v=l.headers.get("content-type"))&&u.setContentType(v),l.body){const[C,d]=si(i,qe(ri(n)));y=ci(l.body,di,C,d)}}I.isString(o)||(o=o?"include":"omit");const r="credentials"in Request.prototype;S=new Request(p,{..._,signal:g,method:b.toUpperCase(),headers:u.normalize().toJSON(),body:y,duplex:"half",credentials:r?o:void 0});let t=await fetch(S);const e=ft&&(c==="stream"||c==="response");if(ft&&(s||e&&f)){const l={};["status","statusText","headers"].forEach(m=>{l[m]=t[m]});const v=I.toFiniteNumber(t.headers.get("content-length")),[C,d]=s&&si(v,qe(ri(s),!0))||[];t=new Response(ci(t.body,di,C,()=>{d&&d(),f&&f()}),l)}c=c||"text";let a=await Ve[I.findKey(Ve,c)||"text"](t,h);return!e&&f&&f(),await new Promise((l,v)=>{ii(l,v,{data:a,headers:pe.from(t.headers),status:t.status,statusText:t.statusText,config:h,request:S})})}catch(r){throw f&&f(),r&&r.name==="TypeError"&&/fetch/i.test(r.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,h,S),{cause:r.cause||r}):J.from(r,r&&r.code,h,S)}}),_t={http:Os,xhr:lr,fetch:Sr};I.forEach(_t,(h,p)=>{if(h){try{Object.defineProperty(h,"name",{value:p})}catch{}Object.defineProperty(h,"adapterName",{value:p})}});const ui=h=>`- ${h}`,br=h=>I.isFunction(h)||h===null||h===!1,fi={getAdapter:h=>{h=I.isArray(h)?h:[h];const{length:p}=h;let b,y;const A={};for(let L=0;L<p;L++){b=h[L];let w;if(y=b,!br(b)&&(y=_t[(w=String(b)).toLowerCase()],y===void 0))throw new J(`Unknown adapter '${w}'`);if(y)break;A[w||"#"+L]=y}if(!y){const L=Object.entries(A).map(([s,n])=>`adapter ${s} `+(n===!1?"is not supported by the environment":"is not available in the build"));let w=p?L.length>1?`since :
`+L.map(ui).join(`
`):" "+ui(L[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+w,"ERR_NOT_SUPPORT")}return y},adapters:_t};function pt(h){if(h.cancelToken&&h.cancelToken.throwIfRequested(),h.signal&&h.signal.aborted)throw new xe(null,h)}function _i(h){return pt(h),h.headers=pe.from(h.headers),h.data=ut.call(h,h.transformRequest),["post","put","patch"].indexOf(h.method)!==-1&&h.headers.setContentType("application/x-www-form-urlencoded",!1),fi.getAdapter(h.adapter||ht.adapter)(h).then(function(p){return pt(h),p.data=ut.call(h,h.transformResponse,p),p.headers=pe.from(p.headers),p},function(p){return ti(p)||(pt(h),p&&p.response&&(p.response.data=ut.call(h,h.transformResponse,p.response),p.response.headers=pe.from(p.response.headers))),Promise.reject(p)})}const pi="1.7.7",vt={};["object","boolean","number","function","string","symbol"].forEach((h,p)=>{vt[h]=function(b){return typeof b===h||"a"+(p<1?"n ":" ")+h}});const vi={};vt.transitional=function(h,p,b){function y(A,L){return"[Axios v"+pi+"] Transitional option '"+A+"'"+L+(b?". "+b:"")}return(A,L,w)=>{if(h===!1)throw new J(y(L," has been removed"+(p?" in "+p:"")),J.ERR_DEPRECATED);return p&&!vi[L]&&(vi[L]=!0,console.warn(y(L," has been deprecated since v"+p+" and will be removed in the near future"))),h?h(A,L,w):!0}};function Cr(h,p,b){if(typeof h!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const y=Object.keys(h);let A=y.length;for(;A-- >0;){const L=y[A],w=p[L];if(w){const s=h[L],n=s===void 0||w(s,L,h);if(n!==!0)throw new J("option "+L+" must be "+n,J.ERR_BAD_OPTION_VALUE);continue}if(b!==!0)throw new J("Unknown option "+L,J.ERR_BAD_OPTION)}}const gt={assertOptions:Cr,validators:vt},Se=gt.validators;class Ge{constructor(p){this.defaults=p,this.interceptors={request:new Yt,response:new Yt}}async request(p,b){try{return await this._request(p,b)}catch(y){if(y instanceof Error){let A;Error.captureStackTrace?Error.captureStackTrace(A={}):A=new Error;const L=A.stack?A.stack.replace(/^.+\n/,""):"";try{y.stack?L&&!String(y.stack).endsWith(L.replace(/^.+\n.+\n/,""))&&(y.stack+=`
`+L):y.stack=L}catch{}}throw y}}_request(p,b){typeof p=="string"?(b=b||{},b.url=p):b=p||{},b=we(this.defaults,b);const{transitional:y,paramsSerializer:A,headers:L}=b;y!==void 0&&gt.assertOptions(y,{silentJSONParsing:Se.transitional(Se.boolean),forcedJSONParsing:Se.transitional(Se.boolean),clarifyTimeoutError:Se.transitional(Se.boolean)},!1),A!=null&&(I.isFunction(A)?b.paramsSerializer={serialize:A}:gt.assertOptions(A,{encode:Se.function,serialize:Se.function},!0)),b.method=(b.method||this.defaults.method||"get").toLowerCase();let w=L&&I.merge(L.common,L[b.method]);L&&I.forEach(["delete","get","head","post","put","patch","common"],S=>{delete L[S]}),b.headers=pe.concat(w,L);const s=[];let n=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(b)===!1||(n=n&&S.synchronous,s.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let u,o=0,_;if(!n){const S=[_i.bind(this),void 0];for(S.unshift.apply(S,s),S.push.apply(S,c),_=S.length,u=Promise.resolve(b);o<_;)u=u.then(S[o++],S[o++]);return u}_=s.length;let g=b;for(o=0;o<_;){const S=s[o++],f=s[o++];try{g=S(g)}catch(i){f.call(this,i);break}}try{u=_i.call(this,g)}catch(S){return Promise.reject(S)}for(o=0,_=c.length;o<_;)u=u.then(c[o++],c[o++]);return u}getUri(p){p=we(this.defaults,p);const b=ni(p.baseURL,p.url);return Jt(b,p.params,p.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(h){Ge.prototype[h]=function(p,b){return this.request(we(b||{},{method:h,url:p,data:(b||{}).data}))}}),I.forEach(["post","put","patch"],function(h){function p(b){return function(y,A,L){return this.request(we(L||{},{method:h,headers:b?{"Content-Type":"multipart/form-data"}:{},url:y,data:A}))}}Ge.prototype[h]=p(),Ge.prototype[h+"Form"]=p(!0)});const Xe=Ge;class mt{constructor(p){if(typeof p!="function")throw new TypeError("executor must be a function.");let b;this.promise=new Promise(function(A){b=A});const y=this;this.promise.then(A=>{if(!y._listeners)return;let L=y._listeners.length;for(;L-- >0;)y._listeners[L](A);y._listeners=null}),this.promise.then=A=>{let L;const w=new Promise(s=>{y.subscribe(s),L=s}).then(A);return w.cancel=function(){y.unsubscribe(L)},w},p(function(A,L,w){y.reason||(y.reason=new xe(A,L,w),b(y.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(p){if(this.reason){p(this.reason);return}this._listeners?this._listeners.push(p):this._listeners=[p]}unsubscribe(p){if(!this._listeners)return;const b=this._listeners.indexOf(p);b!==-1&&this._listeners.splice(b,1)}toAbortSignal(){const p=new AbortController,b=y=>{p.abort(y)};return this.subscribe(b),p.signal.unsubscribe=()=>this.unsubscribe(b),p.signal}static source(){let p;return{token:new mt(function(b){p=b}),cancel:p}}}const yr=mt;function wr(h){return function(p){return h.apply(null,p)}}function Er(h){return I.isObject(h)&&h.isAxiosError===!0}const St={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(St).forEach(([h,p])=>{St[p]=h});const xr=St;function gi(h){const p=new Xe(h),b=Pt(Xe.prototype.request,p);return I.extend(b,Xe.prototype,p,{allOwnKeys:!0}),I.extend(b,p,null,{allOwnKeys:!0}),b.create=function(y){return gi(we(h,y))},b}const ne=gi(ht);ne.Axios=Xe,ne.CanceledError=xe,ne.CancelToken=yr,ne.isCancel=ti,ne.VERSION=pi,ne.toFormData=je,ne.AxiosError=J,ne.Cancel=ne.CanceledError,ne.all=function(h){return Promise.all(h)},ne.spread=wr,ne.isAxiosError=Er,ne.mergeConfig=we,ne.AxiosHeaders=pe,ne.formToJSON=h=>Qt(I.isHTMLForm(h)?new FormData(h):h),ne.getAdapter=fi.getAdapter,ne.HttpStatusCode=xr,ne.default=ne;const mi=ne,kr={class:"top-menu"},Rr={class:"tab-list"},Lr=["onClick"],Dr={key:0,class:"run"},Ar={key:1,class:"run"},Tr=ve({__name:"tabList",props:{tablist:{},val:{},code:{}},emits:["updateVal","updateOutput"],setup(h,{emit:p}){const b=h,y=p;function A(s){y("updateVal",s)}let L=fe(!1);Ie(async()=>{await Wn(),w(b.code)});async function w(s){L.value=!0;try{let n=await mi.post("https://runner.pivotlang.tech/coderunner",{code:s});if(L.value=!1,n.data.status===1){y("updateOutput",n.data.compileOutput);return}if(!n.data.runOutput&&n.data.status===0){y("updateOutput","run success with no output");return}y("updateOutput",n.data.runOutput)}catch(n){L.value=!1,y("updateOutput",n)}}return(s,n)=>{const c=yi("font-awesome-icon");return ie(),re("div",kr,[z("div",Rr,[(ie(!0),re(He,null,Rt(b.tablist,u=>(ie(),re("div",{onClick:o=>A(u),key:u,class:Lt({selected:b.val==u})},Re(u),11,Lr))),128))]),Z(L)?(ie(),re("div",Ar,[te(c,{icon:"fa-spinner",class:"fa-spin",style:{color:"grey"}})])):(ie(),re("div",Dr,[te(c,{icon:"fa-play",style:wi([{color:"green"},{cursor:"pointer"}]),onClick:n[0]||(n[0]=u=>w(b.code)),class:""})]))])}}}),Or=ge(Tr,[["__scopeId","data-v-04026cb9"]]),Br=ve({__name:"gcEcharts",setup(h){const p=fe(null),b={animationDuration:2e3,xAxis:{type:"category",data:["2","3","4","5","6","7","8","9","10"],name:"thread"},yAxis:{type:"value",name:"time",axisLine:{show:!0},splitLine:{show:!1}},legend:{data:["immix gc","bdw gc"],textStyle:{color:"white"},itemStyle:{color:"black"}},series:[{name:"immix gc",data:[.45,.46,.48,.53,.62,.7,.72,1.03,1.08],type:"line"},{name:"bdw gc",data:[.44,.77,1.21,1.69,2.37,2.85,3.45,4.12,4.65],type:"line"}]};Ie(()=>{Dt(()=>import("./index-217cde21.js"),[]).then(async A=>{const L=A.init(p.value),w=()=>{const{top:s,bottom:n}=p.value.getBoundingClientRect();s<window.innerHeight&&n>0&&(window.removeEventListener("scroll",w),L.setOption(b))};window.addEventListener("scroll",w)})});function y(){window.open("https://pivotlang.tech/docs/systemlib/immix.html#%E6%80%A7%E8%83%BD")}return(A,L)=>(ie(),re(He,null,[z("div",{ref_key:"echartsDom",ref:p,class:"chart-container"},null,512),z("div",{class:"button"},[z("span",{onClick:y},"\u{1F449} See benchmark details")])],64))}}),Pr=["src"],Mr={class:"name"},Ir=ve({__name:"memberCard",props:{avatar:{},name:{},identity:{},github:{}},setup(h){const p=h;function b(){window.open(p.github)}return(y,A)=>(ie(),re("div",{class:"container",onClick:b},[z("div",null,[z("img",{class:"avatar",loading:"lazy",src:p.avatar},null,8,Pr)]),z("div",Mr,Re(p.name),1),z("div",null,Re(p.identity),1)]))}}),Hr=ge(Ir,[["__scopeId","data-v-c036d4ef"]]),Fr={},Nr={class:"bottom"};function Ur(h,p){return ie(),re("div",Nr,p[0]||(p[0]=[z("div",{class:"left"},[z("img",{src:Bt}),z("span",null,"Pivot Lang")],-1),z("div",{class:"right"},"\xA9Pivot Lang 2023. All rights reserved | Privacy Policy",-1)]))}const Wr=ge(Fr,[["render",Ur],["__scopeId","data-v-ca86735e"]]),jr={class:"out-container"},$r={class:"container"},zr={class:"line"},qr={class:"content"},Kr={class:"line"},Vr={class:"content"},Gr={class:"line"},Xr={class:"content"},Jr={class:"line"},Yr={class:"content"},Zr={class:"line"},Qr={class:"content"},en=ve({__name:"moreInfo",setup(h){return(p,b)=>(ie(),re("div",jr,[z("div",$r,[z("div",zr,[b[3]||(b[3]=z("div",{class:"title"},"Why PL",-1)),z("div",qr,[te(Z(oe),{href:"https://pivotlang.tech/docs/systemlib/immix.html"},{default:ce(()=>b[0]||(b[0]=[z("div",null,"immix GC",-1)])),_:1}),te(Z(oe),{href:"https://pivotlang.tech/docs/tutorial/vscsupport.html"},{default:ce(()=>b[1]||(b[1]=[z("div",null,"VSC Support",-1)])),_:1}),te(Z(oe),{href:"https://pivotlang.tech/docs/references/module.html"},{default:ce(()=>b[2]||(b[2]=[z("div",null,"Module",-1)])),_:1})])]),z("div",Kr,[b[7]||(b[7]=z("div",{class:"title"},"Get Started",-1)),z("div",Vr,[te(Z(oe),{href:"https://pivotlang.tech/docs/index.html"},{default:ce(()=>b[4]||(b[4]=[z("div",null,"Documentation",-1)])),_:1}),te(Z(oe),{href:"https://pivotlang.tech/docs/tutorial/index.html"},{default:ce(()=>b[5]||(b[5]=[z("div",null,"Tutorial",-1)])),_:1}),te(Z(oe),{href:"https://pivotlang.tech/docs/references/index.html"},{default:ce(()=>b[6]||(b[6]=[z("div",null,"API Reference",-1)])),_:1})])]),z("div",Gr,[b[10]||(b[10]=z("div",{class:"title"},"Resources",-1)),z("div",Xr,[te(Z(oe),{href:"https://pivotlang.tech/docs/blogs/aboutpl.html"},{default:ce(()=>b[8]||(b[8]=[z("div",null,"Blog",-1)])),_:1}),te(Z(oe),{href:"https://pivotlang.tech/docs/blogs/lsp_and_salsa.html"},{default:ce(()=>b[9]||(b[9]=[z("div",null,"lsp and salsa",-1)])),_:1})])]),z("div",Jr,[b[13]||(b[13]=z("div",{class:"title"},"Community",-1)),z("div",Yr,[te(Z(oe),{href:"https://pivotlang.tech/docs/CONTRIBUTING-CN.html"},{default:ce(()=>b[11]||(b[11]=[z("div",null,"Contributor's Guide",-1)])),_:1}),te(Z(oe),{href:"https://github.com/Pivot-Studio/pivot-lang/issues"},{default:ce(()=>b[12]||(b[12]=[z("div",null,"Good First Issue",-1)])),_:1})])]),z("div",Zr,[b[16]||(b[16]=z("div",{class:"title"},"Contact",-1)),z("div",Qr,[te(Z(oe),{href:"https://github.com/Pivot-Studio/pivot-lang"},{default:ce(()=>b[14]||(b[14]=[z("div",null,"Github",-1)])),_:1}),te(Z(oe),{href:"https://qm.qq.com/q/xjPHKHBl0A"},{default:ce(()=>b[15]||(b[15]=[z("div",null,"QQ group",-1)])),_:1})])])])]))}}),tn=ge(en,[["__scopeId","data-v-d074e1e7"]]),sn="#1db010",rn="#f5d10a",nn="#f50a0a";function bt(h,p,b){var A;if(b===p.length)return h;for(let L=0;L<(((A=h.children)==null?void 0:A.length)??0);L++){const w=h.children[L];if(w.filename===p.slice(0,b+1).join("/"))return bt(w,p,b+1)}const y={value:0,coverage:0,itemStyle:{color:"#fff"},children:[],filename:p.slice(0,b+1).join("/"),father:h,hits:0};return h.children?h.children.push(y):h.children=[y],bt(y,p,b+1)}const on=h=>{let p={value:0,coverage:0,itemStyle:{color:"#fff"},children:[],filename:"Pivot Lang",hits:0};for(let b=0;b<h.files.length;b++){const y=h.files[b],A=y.name.split("/"),L=bt(p,A,0);L.value=y.totals.lines,L.hits=y.totals.hits,L.coverage=L.hits/L.value;let w=L,s=0,n=L.value,c=0,u=L.hits;for(;w!=null&&w.father;){let o=w.father.hits;w.father.hits=o-c+u,c=o,u=w.father.hits;let _=w.father.value;w.father.value=_-s+n,s=_,n=w.father.value,w.father.coverage=w.father.hits/w.father.value,w=w.father}}return p.coverage=p.hits/p.value,Si(p),p};function Si(h){if(h.father=void 0,h.coverage<.5?h.itemStyle.color=nn:h.coverage<.8?h.itemStyle.color=rn:h.itemStyle.color=sn,h.children)for(let p=0;p<h.children.length;p++){const b=h.children[p];Si(b)}}const an=async()=>(await mi.get("https://cov.pivotlang.tech/api/v2/github/Pivot-Studio/repos/pivot-lang/totals/?branch=master",{headers:{accept:"application/json"}})).data,cn={class:"cov"},ln=ve({__name:"codecovEcharts",setup(h){const p=fe(null),b=fe(0),y=fe("Pivot Lang");Me("isMobile"),Ie(async()=>{Dt(()=>import("./index-217cde21.js"),[]).then(async s=>{const n=on(await an());b.value=n.coverage;const c={tooltip:{trigger:"item"},series:{type:"sunburst",sort:void 0,tooltip:{formatter:A},emphasis:{disable:!0},data:n.children,label:{formatter:"",show:!1},levels:[]}},u=s.init(p.value),o=()=>{const{top:_,bottom:g}=p.value.getBoundingClientRect();_<window.innerHeight&&g>0&&(window.removeEventListener("scroll",o),u.setOption(c))};window.addEventListener("scroll",o)})});function A(s){let n=s.data;if(n.filename)y.value=n.filename,b.value=n.coverage;else{let c=0,u=0;for(let _=0;_<n.children.length;_++){const g=n.children[_];c+=g.value,u+=g.hits}let o=n.children[0].filename.split("/");o.pop(),y.value=o.join("/"),b.value=u/c,y.value===""&&(y.value="Pivot Lang")}}function L(){window.open("https://app.codecov.io/gh/Pivot-Studio/pivot-lang")}function w(){return b.value>=.8?"covHigh":b.value>=.5?"covMiddle":"covLow"}return(s,n)=>(ie(),re(He,null,[z("div",{ref_key:"covchartsDom",ref:p,class:"chart-container"},null,512),z("div",cn,[tt(Re(y.value)+" coverage: ",1),z("span",{class:Lt(w())},Re((b.value*100).toFixed(2))+"%",3)]),z("div",{class:"button"},[z("span",{onClick:L},"\u{1F449} See test details")])],64))}}),hn=ge(ln,[["__scopeId","data-v-df4c4dce"]]);var bi={exports:{}};(function(h){var p=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},b=function(y){var A=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,L=0,w={},s={manual:y.Prism&&y.Prism.manual,disableWorkerMessageHandler:y.Prism&&y.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof n?new n(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++L}),t.__id},clone:function t(e,a){a=a||{};var l,v;switch(s.util.type(e)){case"Object":if(v=s.util.objId(e),a[v])return a[v];l={},a[v]=l;for(var C in e)e.hasOwnProperty(C)&&(l[C]=t(e[C],a));return l;case"Array":return v=s.util.objId(e),a[v]?a[v]:(l=[],a[v]=l,e.forEach(function(d,m){l[m]=t(d,a)}),l);default:return e}},getLanguage:function(t){for(;t;){var e=A.exec(t.className);if(e)return e[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,e){t.className=t.className.replace(RegExp(A,"gi"),""),t.classList.add("language-"+e)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(l){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(l.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var a in e)if(e[a].src==t)return e[a]}return null}},isActive:function(t,e,a){for(var l="no-"+e;t;){var v=t.classList;if(v.contains(e))return!0;if(v.contains(l))return!1;t=t.parentElement}return!!a}},languages:{plain:w,plaintext:w,text:w,txt:w,extend:function(t,e){var a=s.util.clone(s.languages[t]);for(var l in e)a[l]=e[l];return a},insertBefore:function(t,e,a,l){l=l||s.languages;var v=l[t],C={};for(var d in v)if(v.hasOwnProperty(d)){if(d==e)for(var m in a)a.hasOwnProperty(m)&&(C[m]=a[m]);a.hasOwnProperty(d)||(C[d]=v[d])}var k=l[t];return l[t]=C,s.languages.DFS(s.languages,function(O,R){R===k&&O!=t&&(this[O]=C)}),C},DFS:function t(e,a,l,v){v=v||{};var C=s.util.objId;for(var d in e)if(e.hasOwnProperty(d)){a.call(e,d,e[d],l||d);var m=e[d],k=s.util.type(m);k==="Object"&&!v[C(m)]?(v[C(m)]=!0,t(m,a,null,v)):k==="Array"&&!v[C(m)]&&(v[C(m)]=!0,t(m,a,d,v))}}},plugins:{},highlightAll:function(t,e){s.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,a){var l={callback:a,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",l),l.elements=Array.prototype.slice.apply(l.container.querySelectorAll(l.selector)),s.hooks.run("before-all-elements-highlight",l);for(var v=0,C;C=l.elements[v++];)s.highlightElement(C,e===!0,l.callback)},highlightElement:function(t,e,a){var l=s.util.getLanguage(t),v=s.languages[l];s.util.setLanguage(t,l);var C=t.parentElement;C&&C.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(C,l);var d=t.textContent,m={element:t,language:l,grammar:v,code:d};function k(R){m.highlightedCode=R,s.hooks.run("before-insert",m),m.element.innerHTML=m.highlightedCode,s.hooks.run("after-highlight",m),s.hooks.run("complete",m),a&&a.call(m.element)}if(s.hooks.run("before-sanity-check",m),C=m.element.parentElement,C&&C.nodeName.toLowerCase()==="pre"&&!C.hasAttribute("tabindex")&&C.setAttribute("tabindex","0"),!m.code){s.hooks.run("complete",m),a&&a.call(m.element);return}if(s.hooks.run("before-highlight",m),!m.grammar){k(s.util.encode(m.code));return}if(e&&y.Worker){var O=new Worker(s.filename);O.onmessage=function(R){k(R.data)},O.postMessage(JSON.stringify({language:m.language,code:m.code,immediateClose:!0}))}else k(s.highlight(m.code,m.grammar,m.language))},highlight:function(t,e,a){var l={code:t,grammar:e,language:a};if(s.hooks.run("before-tokenize",l),!l.grammar)throw new Error('The language "'+l.language+'" has no grammar.');return l.tokens=s.tokenize(l.code,l.grammar),s.hooks.run("after-tokenize",l),n.stringify(s.util.encode(l.tokens),l.language)},tokenize:function(t,e){var a=e.rest;if(a){for(var l in a)e[l]=a[l];delete e.rest}var v=new o;return _(v,v.head,t),u(t,v,e,v.head,0),S(v)},hooks:{all:{},add:function(t,e){var a=s.hooks.all;a[t]=a[t]||[],a[t].push(e)},run:function(t,e){var a=s.hooks.all[t];if(!(!a||!a.length))for(var l=0,v;v=a[l++];)v(e)}},Token:n};y.Prism=s;function n(t,e,a,l){this.type=t,this.content=e,this.alias=a,this.length=(l||"").length|0}n.stringify=function t(e,a){if(typeof e=="string")return e;if(Array.isArray(e)){var l="";return e.forEach(function(k){l+=t(k,a)}),l}var v={type:e.type,content:t(e.content,a),tag:"span",classes:["token",e.type],attributes:{},language:a},C=e.alias;C&&(Array.isArray(C)?Array.prototype.push.apply(v.classes,C):v.classes.push(C)),s.hooks.run("wrap",v);var d="";for(var m in v.attributes)d+=" "+m+'="'+(v.attributes[m]||"").replace(/"/g,"&quot;")+'"';return"<"+v.tag+' class="'+v.classes.join(" ")+'"'+d+">"+v.content+"</"+v.tag+">"};function c(t,e,a,l){t.lastIndex=e;var v=t.exec(a);if(v&&l&&v[1]){var C=v[1].length;v.index+=C,v[0]=v[0].slice(C)}return v}function u(t,e,a,l,v,C){for(var d in a)if(!(!a.hasOwnProperty(d)||!a[d])){var m=a[d];m=Array.isArray(m)?m:[m];for(var k=0;k<m.length;++k){if(C&&C.cause==d+","+k)return;var O=m[k],R=O.inside,B=!!O.lookbehind,H=!!O.greedy,U=O.alias;if(H&&!O.pattern.global){var $=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,$+"g")}for(var j=O.pattern||O,E=l.next,D=v;E!==e.tail&&!(C&&D>=C.reach);D+=E.value.length,E=E.next){var T=E.value;if(e.length>t.length)return;if(!(T instanceof n)){var P=1,W;if(H){if(W=c(j,D,t,B),!W||W.index>=t.length)break;var ee=W.index,q=W.index+W[0].length,G=D;for(G+=E.value.length;ee>=G;)E=E.next,G+=E.value.length;if(G-=E.value.length,D=G,E.value instanceof n)continue;for(var V=E;V!==e.tail&&(G<q||typeof V.value=="string");V=V.next)P++,G+=V.value.length;P--,T=t.slice(D,G),W.index-=D}else if(W=c(j,0,T,B),!W)continue;var ee=W.index,x=W[0],M=T.slice(0,ee),N=T.slice(ee+x.length),F=D+T.length;C&&F>C.reach&&(C.reach=F);var X=E.prev;M&&(X=_(e,X,M),D+=M.length),g(e,X,P);var K=new n(d,R?s.tokenize(x,R):x,U,x);if(E=_(e,X,K),N&&_(e,E,N),P>1){var Q={cause:d+","+k,reach:F};u(t,e,a,E.prev,D,Q),C&&Q.reach>C.reach&&(C.reach=Q.reach)}}}}}}function o(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function _(t,e,a){var l=e.next,v={value:a,prev:e,next:l};return e.next=v,l.prev=v,t.length++,v}function g(t,e,a){for(var l=e.next,v=0;v<a&&l!==t.tail;v++)l=l.next;e.next=l,l.prev=e,t.length-=v}function S(t){for(var e=[],a=t.head.next;a!==t.tail;)e.push(a.value),a=a.next;return e}if(!y.document)return y.addEventListener&&(s.disableWorkerMessageHandler||y.addEventListener("message",function(t){var e=JSON.parse(t.data),a=e.language,l=e.code,v=e.immediateClose;y.postMessage(s.highlight(l,s.languages[a],a)),v&&y.close()},!1)),s;var f=s.util.currentScript();f&&(s.filename=f.src,f.hasAttribute("data-manual")&&(s.manual=!0));function i(){s.manual||s.highlightAll()}if(!s.manual){var r=document.readyState;r==="loading"||r==="interactive"&&f&&f.defer?document.addEventListener("DOMContentLoaded",i):window.requestAnimationFrame?window.requestAnimationFrame(i):window.setTimeout(i,16)}return s}(p);h.exports&&(h.exports=b),typeof Ot<"u"&&(Ot.Prism=b)})(bi);var dn=bi.exports;const un=Tt(dn);(function(h){var p="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",b={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},y={bash:b,environment:{pattern:RegExp("\\$"+p),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+p),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};h.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+p),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:y},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:b}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:y},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:y.entity}}],environment:{pattern:RegExp("\\$?"+p),alias:"constant"},variable:y.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},b.inside=h.languages.bash;for(var A=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],L=y.variable[1].inside,w=0;w<A.length;w++)L[A[w]]=h.languages.bash[A[w]];h.languages.sh=h.languages.bash,h.languages.shell=h.languages.bash})(Prism),function(){if(typeof Prism>"u"||typeof document>"u")return;var h="line-numbers",p=/\n(?!$)/g,b=Prism.plugins.lineNumbers={getLine:function(w,s){if(!(w.tagName!=="PRE"||!w.classList.contains(h))){var n=w.querySelector(".line-numbers-rows");if(n){var c=parseInt(w.getAttribute("data-start"),10)||1,u=c+(n.children.length-1);s<c&&(s=c),s>u&&(s=u);var o=s-c;return n.children[o]}}},resize:function(w){y([w])},assumeViewportIndependence:!0};function y(w){if(w=w.filter(function(n){var c=A(n),u=c["white-space"];return u==="pre-wrap"||u==="pre-line"}),w.length!=0){var s=w.map(function(n){var c=n.querySelector("code"),u=n.querySelector(".line-numbers-rows");if(!(!c||!u)){var o=n.querySelector(".line-numbers-sizer"),_=c.textContent.split(p);o||(o=document.createElement("span"),o.className="line-numbers-sizer",c.appendChild(o)),o.innerHTML="0",o.style.display="block";var g=o.getBoundingClientRect().height;return o.innerHTML="",{element:n,lines:_,lineHeights:[],oneLinerHeight:g,sizer:o}}}).filter(Boolean);s.forEach(function(n){var c=n.sizer,u=n.lines,o=n.lineHeights,_=n.oneLinerHeight;o[u.length-1]=void 0,u.forEach(function(g,S){if(g&&g.length>1){var f=c.appendChild(document.createElement("span"));f.style.display="block",f.textContent=g}else o[S]=_})}),s.forEach(function(n){for(var c=n.sizer,u=n.lineHeights,o=0,_=0;_<u.length;_++)u[_]===void 0&&(u[_]=c.children[o++].getBoundingClientRect().height)}),s.forEach(function(n){var c=n.sizer,u=n.element.querySelector(".line-numbers-rows");c.style.display="none",c.innerHTML="",n.lineHeights.forEach(function(o,_){u.children[_].style.height=o+"px"})})}}function A(w){return w?window.getComputedStyle?getComputedStyle(w):w.currentStyle||null:null}var L=void 0;window.addEventListener("resize",function(){b.assumeViewportIndependence&&L===window.innerWidth||(L=window.innerWidth,y(Array.prototype.slice.call(document.querySelectorAll("pre."+h))))}),Prism.hooks.add("complete",function(w){if(w.code){var s=w.element,n=s.parentNode;if(!(!n||!/pre/i.test(n.nodeName))&&!s.querySelector(".line-numbers-rows")&&Prism.util.isActive(s,h)){s.classList.remove(h),n.classList.add(h);var c=w.code.match(p),u=c?c.length+1:1,o,_=new Array(u+1).join("<span></span>");o=document.createElement("span"),o.setAttribute("aria-hidden","true"),o.className="line-numbers-rows",o.innerHTML=_,n.hasAttribute("data-start")&&(n.style.counterReset="linenumber "+(parseInt(n.getAttribute("data-start"),10)-1)),w.element.appendChild(o),y([n]),Prism.hooks.run("line-numbers",w)}}}),Prism.hooks.add("line-numbers",function(w){w.plugins=w.plugins||{},w.plugins.lineNumbers=!0})}(),function(){if(typeof Prism>"u"||typeof document>"u")return;var h=[],p={},b=function(){};Prism.plugins.toolbar={};var y=Prism.plugins.toolbar.registerButton=function(w,s){var n;if(typeof s=="function"?n=s:n=function(c){var u;return typeof s.onClick=="function"?(u=document.createElement("button"),u.type="button",u.addEventListener("click",function(){s.onClick.call(this,c)})):typeof s.url=="string"?(u=document.createElement("a"),u.href=s.url):u=document.createElement("span"),s.className&&u.classList.add(s.className),u.textContent=s.text,u},w in p){console.warn('There is a button with the key "'+w+'" registered already.');return}h.push(p[w]=n)};function A(w){for(;w;){var s=w.getAttribute("data-toolbar-order");if(s!=null)return s=s.trim(),s.length?s.split(/\s*,\s*/g):[];w=w.parentElement}}var L=Prism.plugins.toolbar.hook=function(w){var s=w.element.parentNode;if(!(!s||!/pre/i.test(s.nodeName))&&!s.parentNode.classList.contains("code-toolbar")){var n=document.createElement("div");n.classList.add("code-toolbar"),s.parentNode.insertBefore(n,s),n.appendChild(s);var c=document.createElement("div");c.classList.add("toolbar");var u=h,o=A(w.element);o&&(u=o.map(function(_){return p[_]||b})),u.forEach(function(_){var g=_(w);if(g){var S=document.createElement("div");S.classList.add("toolbar-item"),S.appendChild(g),c.appendChild(S)}}),n.appendChild(c)}};y("label",function(w){var s=w.element.parentNode;if(!(!s||!/pre/i.test(s.nodeName))&&s.hasAttribute("data-label")){var n,c,u=s.getAttribute("data-label");try{c=document.querySelector("template#"+u)}catch{}return c?n=c.content:(s.hasAttribute("data-url")?(n=document.createElement("a"),n.href=s.getAttribute("data-url")):n=document.createElement("span"),n.textContent=u),n}}),Prism.hooks.add("complete",L)}(),function(){if(typeof Prism>"u"||typeof document>"u")return;if(!Prism.plugins.toolbar){console.warn("Copy to Clipboard plugin loaded before Toolbar plugin.");return}function h(L,w){L.addEventListener("click",function(){b(w)})}function p(L){var w=document.createElement("textarea");w.value=L.getText(),w.style.top="0",w.style.left="0",w.style.position="fixed",document.body.appendChild(w),w.focus(),w.select();try{var s=document.execCommand("copy");setTimeout(function(){s?L.success():L.error()},1)}catch(n){setTimeout(function(){L.error(n)},1)}document.body.removeChild(w)}function b(L){navigator.clipboard?navigator.clipboard.writeText(L.getText()).then(L.success,function(){p(L)}):p(L)}function y(L){window.getSelection().selectAllChildren(L)}function A(L){var w={copy:"Copy","copy-error":"Press Ctrl+C to copy","copy-success":"Copied!","copy-timeout":5e3},s="data-prismjs-";for(var n in w){for(var c=s+n,u=L;u&&!u.hasAttribute(c);)u=u.parentElement;u&&(w[n]=u.getAttribute(c))}return w}Prism.plugins.toolbar.registerButton("copy-to-clipboard",function(L){var w=L.element,s=A(w),n=document.createElement("button");n.className="copy-to-clipboard-button",n.setAttribute("type","button");var c=document.createElement("span");return n.appendChild(c),o("copy"),h(n,{getText:function(){return w.textContent},success:function(){o("copy-success"),u()},error:function(){o("copy-error"),setTimeout(function(){y(w)},1),u()}}),n;function u(){setTimeout(function(){o("copy")},s["copy-timeout"])}function o(_){c.textContent=s[_],n.setAttribute("data-copy-state",_)}})}();const fn={"data-prismjs-copy":"copy","data-prismjs-copy-error":"\u6309Ctrl+C\u590D\u5236","data-prismjs-copy-success":"copied!",class:"pre data-prismjs-copy"},_n={className:"language-jsx",style:{"font-size":"10px"}},pn=ve({__name:"codeBlock",props:{code:{type:String,default:""}},setup(h){const p=h;return Ie(()=>{un.highlightAll()}),(b,y)=>(ie(),re("pre",fn,[y[0]||(y[0]=tt("    ")),z("code",_n,Re(p.code),1),y[1]||(y[1]=tt(`
  `))]))}}),vn=ge(pn,[["__scopeId","data-v-f38e72cf"]]);function gn(){var w,s;const h=window.navigator.userAgent,p=((s=(w=window.navigator)==null?void 0:w.userAgentData)==null?void 0:s.platform)||window.navigator.platform,b=["macOS","Macintosh","MacIntel","MacPPC","Mac68K"],y=["Win32","Win64","Windows","WinCE"],A=["iPhone","iPad","iPod"];let L="other";return b.indexOf(p)!==-1?L="apple":A.indexOf(p)!==-1?L="other":y.indexOf(p)!==-1?L="windows":/Android/.test(h)?L="other":/Linux/.test(p)&&(L="linux"),L}const mn=()=>fe(gn()),Sn={id:"advantage"},bn={class:"advantages"},Cn={class:"code-block-container"},yn=ve({__name:"crossPlatforms",setup(h){const p=mn(),b=fe("");p.value!=="other"?b.value=p.value:b.value="apple";function y(w){b.value=w}const A=[{type:"apple",icon:"fa-brands fa-apple",iconColor:"#8465ff",code:`brew tap pivot-studio/tap
brew install pivot-lang`},{type:"windows",icon:"fa-brands fa-windows",iconColor:"#409eff",code:`scoop bucket add pivot https://github.com/Pivot-Studio/scoop
scoop install plc`},{type:"linux",icon:"fa-brands fa-linux",iconColor:"rgb(200, 150, 50)",code:`apt install wget gnupg
wget -O -  https://pivotlang.tech/apt/public.key | apt-key add -
echo "deb [arch=amd64] https://pivotlang.tech/apt/repo focal main
# deb-src [arch=amd64] https://pivotlang.tech/apt/repo focal main
deb [arch=amd64] https://pivotlang.tech/apt/repo jammy main
# deb-src [arch=amd64] https://pivotlang.tech/apt/repo jammy main">/etc/apt/sources.list.d/pl.list
apt update
apt install pivot-lang`}],L=jn(()=>{var w;return(w=A.find(s=>s.type===b.value))==null?void 0:w.code});return(w,s)=>{const n=yi("font-awesome-icon");return ie(),re("div",Sn,[s[0]||(s[0]=z("div",{class:"gradient-font title"},"Cross Platforms",-1)),s[1]||(s[1]=z("div",{class:"detail-describe"}," Install Pivot Lang compiler with only a few commands! ",-1)),z("div",bn,[(ie(),re(He,null,Rt(A,c=>z("div",{class:Lt({"advantage-item":!0,"selected-item":c.type===b.value}),key:c.type},[te(n,{onClick:u=>y(c.type),inverse:"",icon:c.icon,style:wi({color:c.iconColor}),size:"10x",class:"picture"},null,8,["onClick","icon","style"])],2)),64))]),z("div",Cn,[te(vn,{class:"code-block'",code:L.value},null,8,["code"])])])}}}),wn=ge(yn,[["__scopeId","data-v-dcca6d62"]]),En=[{name:"Chronostasys",github:"https://github.com/Chronostasys",avatar:"https://avatars.githubusercontent.com/u/49905799?v=4",identity:"core member && main developer"},{name:"kamome",github:"https://github.com/RINNE-TAN",avatar:"https://avatars.githubusercontent.com/u/73805584?v=4",identity:"core member"},{name:"CjiW",github:"https://github.com/CjiW",avatar:"https://avatars.githubusercontent.com/u/64598696?v=4",identity:"core member"},{name:"\u76D0\u7117\u4E73\u9E3D\u8FD8\u8981\u7802\u9505",github:"https://github.com/1360151219",avatar:"https://avatars.githubusercontent.com/u/74706849?v=4",identity:"core member"},{name:"ZZGuo",github:"https://github.com/Super-ZZGuo",avatar:"https://avatars.githubusercontent.com/u/75672325?v=4",identity:"developer"},{name:"Junxiao Deng",github:"https://github.com/husterdjx",avatar:"https://avatars.githubusercontent.com/u/80690447?v=4",identity:"developer"},{name:"Nolan",github:"https://github.com/KuJyoAi",avatar:"https://avatars.githubusercontent.com/u/87118768?v=4",identity:"developer"},{name:"Nick Ritchie",github:"https://github.com/nick887",avatar:"https://avatars.githubusercontent.com/u/57340076?v=4",identity:"developer"},{name:"matto",github:"https://github.com/matto49",avatar:"https://avatars.githubusercontent.com/u/54560462?v=4",identity:"page design"},{name:"MoonOld",github:"https://github.com/MoonOld",avatar:"https://avatars.githubusercontent.com/u/47448870?v=4",identity:"developer"},{name:"^1e%",github:"https://github.com/Alex4210987",avatar:"https://avatars.githubusercontent.com/u/113411296?v=4",identity:"developer"},{name:"Griffin",github:"https://github.com/xieyuschen",avatar:"https://avatars.githubusercontent.com/u/52945328?v=4",identity:"developer"}],Je=[{title:"hello world",code:`use std::io;
fn main() i64 {
    println!("hello world!");
    return 0;
}
`},{title:"fibonacci",code:`use std::io;
fn main() i64 {
    let result = getFibonacci(10);
    println!(result);
    return 0;
}

fn getFibonacci(n: i64) i64 {
    let pre = 0;
    let nxt = 0;
    let result = 1;
    for let i = 0; i < n; i = i + 1 {
        result = result + pre;
        pre = nxt;
        nxt = result;
    }
    return result;
}
`},{title:"fixed point",code:`use core::panic;
pub fn main() i64 {
    let g = |f, x| => {
        if x == 0 {
            return 1;
        }
        return x * f(x - 1);
    };
    let fact = Y(g);
    for let x = 0; x < 10; x = x + 1 {
        panic::assert(fact(x) == fact_recursion(x));
    }
    return 0;
}

struct Func<A|F> {
    f: |Func<A|F>, A| => F;
}

impl<A|F> Func<A|F> {
    fn call(f: Func<A|F>, x: A) F {
        return self.f(f, x);
    }

}

fn Y<A|R>(g: ||A| => R, A| => R) |A| => R {
    return |x| => {
        return |f, x| => {
            return f.call(f, x);
        }(Func{
            f: |f, x| => {
                return g(|x| => {
                    return f.call(f, x);
                }, x);
            }
        }, x);
    };
}

fn fact_recursion(x: i64) i64 {
    if x == 0 {
        return 1;
    }
    return x * fact_recursion(x - 1);
}


`},{title:"find islands",code:`use core::panic;
use std::io;
pub fn main() i64 {
    // count = 5
    // 1, 0, 1, 1, 1
    // 1, 1, 0, 1, 1
    // 1, 0, 0, 1, 1
    // 0, 1, 1, 0, 0
    // 1, 0, 0, 1, 1
    let mp = [[1, 0, 1, 1, 1], [1, 1, 0, 1, 1], [1, 0, 0, 1, 1], [0, 1, 1, 0, 0], [1, 0, 0, 1, 1]];
    let c = count(mp);
    panic::assert(c == 5);
    println!(c);
    return 0;
}

pub fn count(mp: [[i64]]) i64 {
    let res = 0;
    let w = 5;
    let h = 5;
    let dfs: |i64, i64| => void;
    dfs = |i, j| => {
        if i == -1 || i == h || j == -1 || j == w || mp[i][j] == 0 {
            return;
        }
        mp[i][j] = 0;
        dfs(i + 1, j);
        dfs(i, j + 1);
        dfs(i - 1, j);
        dfs(i, j - 1);
        return;
    };
    for let i = 0; i < h; i = i + 1 {
        for let j = 0; j < w; j = j + 1 {
            if mp[i][j] == 0 {
                continue;
            }
            res = res + 1;
            dfs(i, j);
        }
    }
    return res;
}
  
`},{title:"hash table",code:`use std::cols::hashtable;
use core::panic::assert;
use core::eq::*;

fn main() i64 {
    let table = hashtable::new_hash_table(10 as u64, 1 as u64);
    table.insert("hello","world");
    table.insert("bye","bye");
    assert(table.get("hello") is string);
    let v = table.get("hello") as string!;
    assert("world".eq(&v));
    return 0;
}

`}];function xn(h){var p=h.getBoundingClientRect();return p.top>=0&&p.left>=0&&p.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&p.right<=(window.innerWidth||document.documentElement.clientWidth)}var Ci={exports:{}};(function(h,p){(function(b,y){h.exports=y()})(self,()=>(()=>{var b={4567:function(w,s,n){var c=this&&this.__decorate||function(e,a,l,v){var C,d=arguments.length,m=d<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,a,l,v);else for(var k=e.length-1;k>=0;k--)(C=e[k])&&(m=(d<3?C(m):d>3?C(a,l,m):C(a,l))||m);return d>3&&m&&Object.defineProperty(a,l,m),m},u=this&&this.__param||function(e,a){return function(l,v){a(l,v,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const o=n(9042),_=n(6114),g=n(9924),S=n(844),f=n(5596),i=n(4725),r=n(3656);let t=s.AccessibilityManager=class extends S.Disposable{constructor(e,a){super(),this._terminal=e,this._renderService=a,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let l=0;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);if(this._topBoundaryFocusListener=l=>this._handleBoundaryFocus(l,0),this._bottomBoundaryFocusListener=l=>this._handleBoundaryFocus(l,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(l=>this._handleResize(l.rows))),this.register(this._terminal.onRender(l=>this._refreshRows(l.start,l.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(l=>this._handleChar(l))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(l=>this._handleTab(l))),this.register(this._terminal.onKey(l=>this._handleKey(l.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let a=0;a<e;a++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=o.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,a){this._liveRegionDebouncer.refresh(e,a,this._terminal.rows)}_renderRows(e,a){const l=this._terminal.buffer,v=l.lines.length.toString();for(let C=e;C<=a;C++){const d=l.translateBufferLineToString(l.ydisp+C,!0),m=(l.ydisp+C+1).toString(),k=this._rowElements[C];k&&(d.length===0?k.innerText="\xA0":k.textContent=d,k.setAttribute("aria-posinset",m),k.setAttribute("aria-setsize",v))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,a){const l=e.target,v=this._rowElements[a===0?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")===(a===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==v)return;let C,d;if(a===0?(C=l,d=this._rowElements.pop(),this._rowContainer.removeChild(d)):(C=this._rowElements.shift(),d=l,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),d.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){const m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else{const m=this._createAccessibilityTreeNode();this._rowElements.push(m),this._rowContainer.appendChild(m)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=t=c([u(1,i.IRenderService)],t)},3614:(w,s)=>{function n(_){return _.replace(/\r?\n/g,"\r")}function c(_,g){return g?"\x1B[200~"+_+"\x1B[201~":_}function u(_,g,S,f){_=c(_=n(_),S.decPrivateModes.bracketedPasteMode&&f.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(_,!0),g.value=""}function o(_,g,S){const f=S.getBoundingClientRect(),i=_.clientX-f.left-10,r=_.clientY-f.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${i}px`,g.style.top=`${r}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=n,s.bracketTextForPaste=c,s.copyHandler=function(_,g){_.clipboardData&&_.clipboardData.setData("text/plain",g.selectionText),_.preventDefault()},s.handlePasteEvent=function(_,g,S,f){_.stopPropagation(),_.clipboardData&&u(_.clipboardData.getData("text/plain"),g,S,f)},s.paste=u,s.moveTextAreaUnderMouseCursor=o,s.rightClickHandler=function(_,g,S,f,i){o(_,g,S),i&&f.rightClickSelect(_),g.value=f.selectionText,g.select()}},7239:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const c=n(1505);s.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,o,_){this._css.set(u,o,_)}getCss(u,o){return this._css.get(u,o)}setColor(u,o,_){this._color.set(u,o,_)}getColor(u,o){return this._color.get(u,o)}clear(){this._color.clear(),this._css.clear()}}},3656:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(n,c,u,o){n.addEventListener(c,u,o);let _=!1;return{dispose:()=>{_||(_=!0,n.removeEventListener(c,u,o))}}}},6465:function(w,s,n){var c=this&&this.__decorate||function(i,r,t,e){var a,l=arguments.length,v=l<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,r,t,e);else for(var C=i.length-1;C>=0;C--)(a=i[C])&&(v=(l<3?a(v):l>3?a(r,t,v):a(r,t))||v);return l>3&&v&&Object.defineProperty(r,t,v),v},u=this&&this.__param||function(i,r){return function(t,e){r(t,e,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const o=n(3656),_=n(8460),g=n(844),S=n(2585);let f=s.Linkifier2=class extends g.Disposable{get currentLink(){return this._currentLink}constructor(i){super(),this._bufferService=i,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(i){return this._linkProviders.push(i),{dispose:()=>{const r=this._linkProviders.indexOf(i);r!==-1&&this._linkProviders.splice(r,1)}}}attachToDom(i,r,t){this._element=i,this._mouseService=r,this._renderService=t,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(i){if(this._lastMouseEvent=i,!this._element||!this._mouseService)return;const r=this._positionFromMouseEvent(i,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const t=i.composedPath();for(let e=0;e<t.length;e++){const a=t[e];if(a.classList.contains("xterm"))break;if(a.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(i){if(this._activeLine!==i.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(i,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,i)||(this._clearCurrentLink(),this._askForLink(i,!0))}_askForLink(i,r){var t,e;this._activeProviderReplies&&r||((t=this._activeProviderReplies)===null||t===void 0||t.forEach(l=>{l==null||l.forEach(v=>{v.link.dispose&&v.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=i.y);let a=!1;for(const[l,v]of this._linkProviders.entries())r?!((e=this._activeProviderReplies)===null||e===void 0)&&e.get(l)&&(a=this._checkLinkProviderResult(l,i,a)):v.provideLinks(i.y,C=>{var d,m;if(this._isMouseOut)return;const k=C==null?void 0:C.map(O=>({link:O}));(d=this._activeProviderReplies)===null||d===void 0||d.set(l,k),a=this._checkLinkProviderResult(l,i,a),((m=this._activeProviderReplies)===null||m===void 0?void 0:m.size)===this._linkProviders.length&&this._removeIntersectingLinks(i.y,this._activeProviderReplies)})}_removeIntersectingLinks(i,r){const t=new Set;for(let e=0;e<r.size;e++){const a=r.get(e);if(a)for(let l=0;l<a.length;l++){const v=a[l],C=v.link.range.start.y<i?0:v.link.range.start.x,d=v.link.range.end.y>i?this._bufferService.cols:v.link.range.end.x;for(let m=C;m<=d;m++){if(t.has(m)){a.splice(l--,1);break}t.add(m)}}}}_checkLinkProviderResult(i,r,t){var e;if(!this._activeProviderReplies)return t;const a=this._activeProviderReplies.get(i);let l=!1;for(let v=0;v<i;v++)this._activeProviderReplies.has(v)&&!this._activeProviderReplies.get(v)||(l=!0);if(!l&&a){const v=a.find(C=>this._linkAtPosition(C.link,r));v&&(t=!0,this._handleNewLink(v))}if(this._activeProviderReplies.size===this._linkProviders.length&&!t)for(let v=0;v<this._activeProviderReplies.size;v++){const C=(e=this._activeProviderReplies.get(v))===null||e===void 0?void 0:e.find(d=>this._linkAtPosition(d.link,r));if(C){t=!0,this._handleNewLink(C);break}}return t}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(i){if(!this._element||!this._mouseService||!this._currentLink)return;const r=this._positionFromMouseEvent(i,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(i,this._currentLink.link.text)}_clearCurrentLink(i,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!i||!r||this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(i){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(i.link,r)&&(this._currentLink=i,this._currentLink.state={decorations:{underline:i.link.decorations===void 0||i.link.decorations.underline,pointerCursor:i.link.decorations===void 0||i.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,i.link,this._lastMouseEvent),i.link.decorations={},Object.defineProperties(i.link.decorations,{pointerCursor:{get:()=>{var t,e;return(e=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||e===void 0?void 0:e.decorations.pointerCursor},set:t=>{var e,a;!((e=this._currentLink)===null||e===void 0)&&e.state&&this._currentLink.state.decorations.pointerCursor!==t&&(this._currentLink.state.decorations.pointerCursor=t,this._currentLink.state.isHovered&&((a=this._element)===null||a===void 0||a.classList.toggle("xterm-cursor-pointer",t)))}},underline:{get:()=>{var t,e;return(e=(t=this._currentLink)===null||t===void 0?void 0:t.state)===null||e===void 0?void 0:e.decorations.underline},set:t=>{var e,a,l;!((e=this._currentLink)===null||e===void 0)&&e.state&&((l=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||l===void 0?void 0:l.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(i.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(t=>{if(!this._currentLink)return;const e=t.start===0?0:t.start+1+this._bufferService.buffer.ydisp,a=this._bufferService.buffer.ydisp+1+t.end;if(this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=a&&(this._clearCurrentLink(e,a),this._lastMouseEvent&&this._element)){const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._askForLink(l,!1)}})))}_linkHover(i,r,t){var e;!((e=this._currentLink)===null||e===void 0)&&e.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&i.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(t,r.text)}_fireUnderlineEvent(i,r){const t=i.range,e=this._bufferService.buffer.ydisp,a=this._createLinkUnderlineEvent(t.start.x-1,t.start.y-e-1,t.end.x,t.end.y-e-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(a)}_linkLeave(i,r,t){var e;!((e=this._currentLink)===null||e===void 0)&&e.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&i.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(t,r.text)}_linkAtPosition(i,r){const t=i.range.start.y*this._bufferService.cols+i.range.start.x,e=i.range.end.y*this._bufferService.cols+i.range.end.x,a=r.y*this._bufferService.cols+r.x;return t<=a&&a<=e}_positionFromMouseEvent(i,r,t){const e=t.getCoords(i,r,this._bufferService.cols,this._bufferService.rows);if(e)return{x:e[0],y:e[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(i,r,t,e,a){return{x1:i,y1:r,x2:t,y2:e,cols:this._bufferService.cols,fg:a}}};s.Linkifier2=f=c([u(0,S.IBufferService)],f)},9042:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(w,s,n){var c=this&&this.__decorate||function(f,i,r,t){var e,a=arguments.length,l=a<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(f,i,r,t);else for(var v=f.length-1;v>=0;v--)(e=f[v])&&(l=(a<3?e(l):a>3?e(i,r,l):e(i,r))||l);return a>3&&l&&Object.defineProperty(i,r,l),l},u=this&&this.__param||function(f,i){return function(r,t){i(r,t,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const o=n(511),_=n(2585);let g=s.OscLinkProvider=class{constructor(f,i,r){this._bufferService=f,this._optionsService=i,this._oscLinkService=r}provideLinks(f,i){var r;const t=this._bufferService.buffer.lines.get(f-1);if(!t)return void i(void 0);const e=[],a=this._optionsService.rawOptions.linkHandler,l=new o.CellData,v=t.getTrimmedLength();let C=-1,d=-1,m=!1;for(let k=0;k<v;k++)if(d!==-1||t.hasContent(k)){if(t.loadCell(k,l),l.hasExtendedAttrs()&&l.extended.urlId){if(d===-1){d=k,C=l.extended.urlId;continue}m=l.extended.urlId!==C}else d!==-1&&(m=!0);if(m||d!==-1&&k===v-1){const O=(r=this._oscLinkService.getLinkData(C))===null||r===void 0?void 0:r.uri;if(O){const R={start:{x:d+1,y:f},end:{x:k+(m||k!==v-1?0:1),y:f}};let B=!1;if(!(a!=null&&a.allowNonHttpProtocols))try{const H=new URL(O);["http:","https:"].includes(H.protocol)||(B=!0)}catch{B=!0}B||e.push({text:O,range:R,activate:(H,U)=>a?a.activate(H,U,R):S(0,U),hover:(H,U)=>{var $;return($=a==null?void 0:a.hover)===null||$===void 0?void 0:$.call(a,H,U,R)},leave:(H,U)=>{var $;return($=a==null?void 0:a.leave)===null||$===void 0?void 0:$.call(a,H,U,R)}})}m=!1,l.hasExtendedAttrs()&&l.extended.urlId?(d=k,C=l.extended.urlId):(d=-1,C=-1)}}i(e)}};function S(f,i){if(confirm(`Do you want to navigate to ${i}?

WARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch{}r.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=g=c([u(0,_.IBufferService),u(1,_.IOptionsService),u(2,_.IOscLinkService)],g)},6193:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(n,c){this._parentWindow=n,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,c,u){this._rowCount=u,n=n!==void 0?n:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const c=n(844);class u extends c.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=u},3236:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const c=n(3614),u=n(3656),o=n(6465),_=n(9042),g=n(3730),S=n(1680),f=n(3107),i=n(5744),r=n(2950),t=n(1296),e=n(428),a=n(4269),l=n(5114),v=n(8934),C=n(3230),d=n(9312),m=n(4725),k=n(6731),O=n(8055),R=n(8969),B=n(8460),H=n(844),U=n(6114),$=n(8437),j=n(2584),E=n(7399),D=n(5941),T=n(9074),P=n(2585),W=n(5435),q=n(4567),G=typeof window<"u"?window.document:null;class V extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(x={}){super(x),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new H.MutableDisposable),this._onCursorMove=this.register(new B.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new B.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new B.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new B.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new B.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new B.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new B.EventEmitter),this._onBlur=this.register(new B.EventEmitter),this._onA11yCharEmitter=this.register(new B.EventEmitter),this._onA11yTabEmitter=this.register(new B.EventEmitter),this._onWillOpen=this.register(new B.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(o.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(g.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,N)=>this.refresh(M,N))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,B.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,B.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,H.toDisposable)(()=>{var M,N;this._customKeyEventHandler=void 0,(N=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||N===void 0||N.removeChild(this.element)}))}_handleColorEvent(x){if(this._themeService)for(const M of x){let N,F="";switch(M.index){case 256:N="foreground",F="10";break;case 257:N="background",F="11";break;case 258:N="cursor",F="12";break;default:N="ansi",F="4;"+M.index}switch(M.type){case 0:const X=O.color.toColorRGB(N==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[N]);this.coreService.triggerDataEvent(`${j.C0.ESC}]${F};${(0,D.toRgbString)(X)}${j.C1_ESCAPED.ST}`);break;case 1:if(N==="ansi")this._themeService.modifyColors(K=>K.ansi[M.index]=O.rgba.toColor(...M.color));else{const K=N;this._themeService.modifyColors(Q=>Q[K]=O.rgba.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(x){x?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(x){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.C0.ESC+"[I"),this.updateCursorStyle(x),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var x;return(x=this.textarea)===null||x===void 0?void 0:x.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const x=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(x);if(!M)return;const N=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,X=M.getWidth(N),K=this._renderService.dimensions.css.cell.width*X,Q=this.buffer.y*this._renderService.dimensions.css.cell.height,ae=N*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ae+"px",this.textarea.style.top=Q+"px",this.textarea.style.width=K+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,c.copyHandler)(M,this._selectionService)}));const x=M=>(0,c.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",x)),this.register((0,u.addDisposableDomListener)(this.element,"paste",x)),U.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,c.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,c.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,c.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",x=>this._keyUp(x),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",x=>this._keyDown(x),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",x=>this._keyPress(x),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",x=>this._compositionHelper.compositionupdate(x))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",x=>this._inputEvent(x),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(x){var M;if(!x)throw new Error("Terminal requires a parent element.");x.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=x.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),x.appendChild(this.element);const N=G.createDocumentFragment();this._viewportElement=G.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=G.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=G.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=G.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=G.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(l.CoreBrowserService,this.textarea,(M=this._document.defaultView)!==null&&M!==void 0?M:window),this._instantiationService.setService(m.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(e.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(m.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(m.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(a.CharacterJoinerService),this._instantiationService.setService(m.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(m.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=G.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(v.MouseService),this._instantiationService.setService(m.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(d.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(m.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(f.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(i.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(i.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const x=this,M=this.element;function N(K){const Q=x._mouseService.getMouseReportCoords(K,x.screenElement);if(!Q)return!1;let ae,he;switch(K.overrideType||K.type){case"mousemove":he=32,K.buttons===void 0?(ae=3,K.button!==void 0&&(ae=K.button<3?K.button:3)):ae=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":he=0,ae=K.button<3?K.button:3;break;case"mousedown":he=1,ae=K.button<3?K.button:3;break;case"wheel":if(x.viewport.getLinesScrolled(K)===0)return!1;he=K.deltaY<0?0:1,ae=4;break;default:return!1}return!(he===void 0||ae===void 0||ae>4)&&x.coreMouseService.triggerMouseEvent({col:Q.col,row:Q.row,x:Q.x,y:Q.y,button:ae,action:he,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:K=>(N(K),K.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(K)),wheel:K=>(N(K),this.cancel(K,!0)),mousedrag:K=>{K.buttons&&N(K)},mousemove:K=>{K.buttons||N(K)}};this.register(this.coreMouseService.onProtocolChange(K=>{K?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(K)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&K?F.mousemove||(M.addEventListener("mousemove",X.mousemove),F.mousemove=X.mousemove):(M.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&K?F.wheel||(M.addEventListener("wheel",X.wheel,{passive:!1}),F.wheel=X.wheel):(M.removeEventListener("wheel",F.wheel),F.wheel=null),2&K?F.mouseup||(M.addEventListener("mouseup",X.mouseup),F.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),M.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&K?F.mousedrag||(F.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(M,"mousedown",K=>{if(K.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(K))return N(K),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(K)})),this.register((0,u.addDisposableDomListener)(M,"wheel",K=>{if(!F.wheel){if(!this.buffer.hasScrollback){const Q=this.viewport.getLinesScrolled(K);if(Q===0)return;const ae=j.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B");let he="";for(let ke=0;ke<Math.abs(Q);ke++)he+=ae;return this.coreService.triggerDataEvent(he,!0),this.cancel(K,!0)}return this.viewport.handleWheel(K)?this.cancel(K):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(M,"touchstart",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(K),this.cancel(K)},{passive:!0})),this.register((0,u.addDisposableDomListener)(M,"touchmove",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(K)?void 0:this.cancel(K)},{passive:!1}))}refresh(x,M){var N;(N=this._renderService)===null||N===void 0||N.refreshRows(x,M)}updateCursorStyle(x){var M;!((M=this._selectionService)===null||M===void 0)&&M.shouldColumnSelect(x)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(x,M,N=0){var F;N===1?(super.scrollLines(x,M,N),this.refresh(0,this.rows-1)):(F=this.viewport)===null||F===void 0||F.scrollLines(x)}paste(x){(0,c.paste)(x,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(x){this._customKeyEventHandler=x}registerLinkProvider(x){return this.linkifier2.registerLinkProvider(x)}registerCharacterJoiner(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(x);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(x)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(x){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+x)}registerDecoration(x){return this._decorationService.registerDecoration(x)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(x,M,N){this._selectionService.setSelection(x,M,N)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var x;(x=this._selectionService)===null||x===void 0||x.clearSelection()}selectAll(){var x;(x=this._selectionService)===null||x===void 0||x.selectAll()}selectLines(x,M){var N;(N=this._selectionService)===null||N===void 0||N.selectLines(x,M)}_keyDown(x){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&x.altKey;if(!M&&!this._compositionHelper.keydown(x))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||x.key!=="Dead"&&x.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const N=(0,E.evaluateKeyboardEvent)(x,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(x),N.type===3||N.type===2){const F=this.rows-1;return this.scrollLines(N.type===2?-F:F),this.cancel(x,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,x)||(N.cancel&&this.cancel(x,!0),!N.key||!!(x.key&&!x.ctrlKey&&!x.altKey&&!x.metaKey&&x.key.length===1&&x.key.charCodeAt(0)>=65&&x.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==j.C0.ETX&&N.key!==j.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),!this.optionsService.rawOptions.screenReaderMode||x.altKey||x.ctrlKey?this.cancel(x,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(x,M){const N=x.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||x.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||x.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?N:N&&(!M.keyCode||M.keyCode>47)}_keyUp(x){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(x)||this.focus(),this.updateCursorStyle(x),this._keyPressHandled=!1)}_keyPress(x){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;if(this.cancel(x),x.charCode)M=x.charCode;else if(x.which===null||x.which===void 0)M=x.keyCode;else{if(x.which===0||x.charCode===0)return!1;M=x.which}return!(!M||(x.altKey||x.ctrlKey||x.metaKey)&&!this._isThirdLevelShift(this.browser,x)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(x){if(x.data&&x.inputType==="insertText"&&(!x.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=x.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(x),!0}return!1}resize(x,M){x!==this.cols||M!==this.rows?super.resize(x,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(x,M){var N,F;(N=this._charSizeService)===null||N===void 0||N.measure(),(F=this.viewport)===null||F===void 0||F.syncScrollArea(!0)}clear(){var x;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(x=this.viewport)===null||x===void 0||x.reset(),this.refresh(0,this.rows-1)}}reset(){var x,M;this.options.rows=this.rows,this.options.cols=this.cols;const N=this._customKeyEventHandler;this._setup(),super.reset(),(x=this._selectionService)===null||x===void 0||x.reset(),this._decorationService.reset(),(M=this.viewport)===null||M===void 0||M.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1)}clearTextureAtlas(){var x;(x=this._renderService)===null||x===void 0||x.clearTextureAtlas()}_reportFocus(){var x;!((x=this.element)===null||x===void 0)&&x.classList.contains("focus")?this.coreService.triggerDataEvent(j.C0.ESC+"[I"):this.coreService.triggerDataEvent(j.C0.ESC+"[O")}_reportWindowsOptions(x){if(this._renderService)switch(x){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),N=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${j.C0.ESC}[4;${N};${M}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${j.C0.ESC}[6;${X};${F}t`)}}cancel(x,M){if(this.options.cancelEvents||M)return x.preventDefault(),x.stopPropagation(),!1}}s.Terminal=V},9924:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(n,c=1e3){this._renderCallback=n,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,c,u){this._rowCount=u,n=n!==void 0?n:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=o-this._lastRefreshMs,g=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,c)}}},1680:function(w,s,n){var c=this&&this.__decorate||function(r,t,e,a){var l,v=arguments.length,C=v<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,t,e,a);else for(var d=r.length-1;d>=0;d--)(l=r[d])&&(C=(v<3?l(C):v>3?l(t,e,C):l(t,e))||C);return v>3&&C&&Object.defineProperty(t,e,C),C},u=this&&this.__param||function(r,t){return function(e,a){t(e,a,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const o=n(3656),_=n(4725),g=n(8460),S=n(844),f=n(2585);let i=s.Viewport=class extends S.Disposable{constructor(r,t,e,a,l,v,C,d){super(),this._viewportElement=r,this._scrollArea=t,this._bufferService=e,this._optionsService=a,this._charSizeService=l,this._renderService=v,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(m=>this._activeBuffer=m.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(m=>this._renderDimensions=m)),this._handleThemeChange(d.colors),this.register(d.onChangeColors(m=>this._handleThemeChange(m))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,t){const e=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&e<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){const t=this._getPixelsScrolled(r);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}scrollLines(r){if(r!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=r*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!1})}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(r,t){var e;let a,l="";const v=[],C=t??this._bufferService.buffer.lines.length,d=this._bufferService.buffer.lines;for(let m=r;m<C;m++){const k=d.get(m);if(!k)continue;const O=(e=d.get(m+1))===null||e===void 0?void 0:e.isWrapped;if(l+=k.translateToString(!O),!O||m===d.length-1){const R=document.createElement("div");R.textContent=l,v.push(R),l.length>0&&(a=R),l=""}}return{bufferElements:v,cursorElement:a}}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(r,t){const e=this._optionsService.rawOptions.fastScrollModifier;return e==="alt"&&t.altKey||e==="ctrl"&&t.ctrlKey||e==="shift"&&t.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){const t=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}};s.Viewport=i=c([u(2,f.IBufferService),u(3,f.IOptionsService),u(4,_.ICharSizeService),u(5,_.IRenderService),u(6,_.ICoreBrowserService),u(7,_.IThemeService)],i)},3107:function(w,s,n){var c=this&&this.__decorate||function(i,r,t,e){var a,l=arguments.length,v=l<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,r,t,e);else for(var C=i.length-1;C>=0;C--)(a=i[C])&&(v=(l<3?a(v):l>3?a(r,t,v):a(r,t))||v);return l>3&&v&&Object.defineProperty(r,t,v),v},u=this&&this.__param||function(i,r){return function(t,e){r(t,e,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const o=n(3656),_=n(4725),g=n(844),S=n(2585);let f=s.BufferDecorationRenderer=class extends g.Disposable{constructor(i,r,t,e){super(),this._screenElement=i,this._bufferService=r,this._decorationService=t,this._renderService=e,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const i of this._decorationService.decorations)this._renderDecoration(i);this._dimensionsChanged=!1}_renderDecoration(i){this._refreshStyle(i),this._dimensionsChanged&&this._refreshXPosition(i)}_createElement(i){var r,t;const e=document.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",((r=i==null?void 0:i.options)===null||r===void 0?void 0:r.layer)==="top"),e.style.width=`${Math.round((i.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=(i.options.height||1)*this._renderService.dimensions.css.cell.height+"px",e.style.top=(i.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const a=(t=i.options.x)!==null&&t!==void 0?t:0;return a&&a>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(i,e),e}_refreshStyle(i){const r=i.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)i.element&&(i.element.style.display="none",i.onRenderEmitter.fire(i.element));else{let t=this._decorationElements.get(i);t||(t=this._createElement(i),i.element=t,this._decorationElements.set(i,t),this._container.appendChild(t),i.onDispose(()=>{this._decorationElements.delete(i),t.remove()})),t.style.top=r*this._renderService.dimensions.css.cell.height+"px",t.style.display=this._altBufferIsActive?"none":"block",i.onRenderEmitter.fire(t)}}_refreshXPosition(i,r=i.element){var t;if(!r)return;const e=(t=i.options.x)!==null&&t!==void 0?t:0;(i.options.anchor||"left")==="right"?r.style.right=e?e*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=e?e*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(i){var r;(r=this._decorationElements.get(i))===null||r===void 0||r.remove(),this._decorationElements.delete(i),i.dispose()}};s.BufferDecorationRenderer=f=c([u(1,S.IBufferService),u(2,S.IDecorationService),u(3,_.IRenderService)],f)},5871:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const c of this._zones)if(c.color===n.options.overviewRulerOptions.color&&c.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,n.marker.line))return;if(this._lineAdjacentToZone(c,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(c,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,c){return c>=n.startBufferLine&&c<=n.endBufferLine}_lineAdjacentToZone(n,c,u){return c>=n.startBufferLine-this._linePadding[u||"full"]&&c<=n.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(n,c){n.startBufferLine=Math.min(n.startBufferLine,c),n.endBufferLine=Math.max(n.endBufferLine,c)}}},5744:function(w,s,n){var c=this&&this.__decorate||function(a,l,v,C){var d,m=arguments.length,k=m<3?l:C===null?C=Object.getOwnPropertyDescriptor(l,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,l,v,C);else for(var O=a.length-1;O>=0;O--)(d=a[O])&&(k=(m<3?d(k):m>3?d(l,v,k):d(l,v))||k);return m>3&&k&&Object.defineProperty(l,v,k),k},u=this&&this.__param||function(a,l){return function(v,C){l(v,C,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const o=n(5871),_=n(3656),g=n(4725),S=n(844),f=n(2585),i={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0};let e=s.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(a,l,v,C,d,m,k){var O;super(),this._viewportElement=a,this._screenElement=l,this._bufferService=v,this._decorationService=C,this._renderService=d,this._optionsService=m,this._coreBrowseService=k,this._colorZoneStore=new o.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)===null||O===void 0||O.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var B;(B=this._canvas)===null||B===void 0||B.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const a=Math.floor(this._canvas.width/3),l=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=a,r.center=l,r.right=a,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=r.left,t.right=r.left+r.center}_refreshDrawHeightConstants(){i.full=Math.round(2*this._coreBrowseService.dpr);const a=this._canvas.height/this._bufferService.buffer.lines.length,l=Math.round(Math.max(Math.min(a,12),6)*this._coreBrowseService.dpr);i.left=l,i.center=l,i.right=l}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const l of this._decorationService.decorations)this._colorZoneStore.addDecoration(l);this._ctx.lineWidth=1;const a=this._colorZoneStore.zones;for(const l of a)l.position!=="full"&&this._renderColorZone(l);for(const l of a)l.position==="full"&&this._renderColorZone(l);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(a){this._ctx.fillStyle=a.color,this._ctx.fillRect(t[a.position||"full"],Math.round((this._canvas.height-1)*(a.startBufferLine/this._bufferService.buffers.active.lines.length)-i[a.position||"full"]/2),r[a.position||"full"],Math.round((this._canvas.height-1)*((a.endBufferLine-a.startBufferLine)/this._bufferService.buffers.active.lines.length)+i[a.position||"full"]))}_queueRefresh(a,l){this._shouldUpdateDimensions=a||this._shouldUpdateDimensions,this._shouldUpdateAnchor=l||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=e=c([u(2,f.IBufferService),u(3,f.IDecorationService),u(4,g.IRenderService),u(5,f.IOptionsService),u(6,g.ICoreBrowserService)],e)},2950:function(w,s,n){var c=this&&this.__decorate||function(f,i,r,t){var e,a=arguments.length,l=a<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(f,i,r,t);else for(var v=f.length-1;v>=0;v--)(e=f[v])&&(l=(a<3?e(l):a>3?e(i,r,l):e(i,r))||l);return a>3&&l&&Object.defineProperty(i,r,l),l},u=this&&this.__param||function(f,i){return function(r,t){i(r,t,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const o=n(4725),_=n(2585),g=n(2584);let S=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(f,i,r,t,e,a){this._textarea=f,this._compositionView=i,this._bufferService=r,this._optionsService=t,this._coreService=e,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){const i={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let r;this._isSendingComposition=!1,i.start+=this._dataAlreadySent.length,r=this._isComposing?this._textarea.value.substring(i.start,i.end):this._textarea.value.substring(i.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;const i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}}_handleAnyTextareaChanges(){const f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const i=this._textarea.value,r=i.replace(f,"");this._dataAlreadySent=r,i.length>f.length?this._coreService.triggerDataEvent(r,!0):i.length<f.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):i.length===f.length&&i!==f&&this._coreService.triggerDataEvent(i,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,e=i*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const a=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=S=c([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,_.ICoreService),u(5,o.IRenderService)],S)},9806:(w,s)=>{function n(c,u,o){const _=o.getBoundingClientRect(),g=c.getComputedStyle(o),S=parseInt(g.getPropertyValue("padding-left")),f=parseInt(g.getPropertyValue("padding-top"));return[u.clientX-_.left-S,u.clientY-_.top-f]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=n,s.getCoords=function(c,u,o,_,g,S,f,i,r){if(!S)return;const t=n(c,u,o);return t?(t[0]=Math.ceil((t[0]+(r?f/2:0))/f),t[1]=Math.ceil(t[1]/i),t[0]=Math.min(Math.max(t[0],1),_+(r?1:0)),t[1]=Math.min(Math.max(t[1],1),g),t):void 0}},9504:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const c=n(2584);function u(i,r,t,e){const a=i-o(i,t),l=r-o(r,t),v=Math.abs(a-l)-function(C,d,m){let k=0;const O=C-o(C,m),R=d-o(d,m);for(let B=0;B<Math.abs(O-R);B++){const H=_(C,d)==="A"?-1:1,U=m.buffer.lines.get(O+H*B);U!=null&&U.isWrapped&&k++}return k}(i,r,t);return f(v,S(_(i,r),e))}function o(i,r){let t=0,e=r.buffer.lines.get(i),a=e==null?void 0:e.isWrapped;for(;a&&i>=0&&i<r.rows;)t++,e=r.buffer.lines.get(--i),a=e==null?void 0:e.isWrapped;return t}function _(i,r){return i>r?"A":"B"}function g(i,r,t,e,a,l){let v=i,C=r,d="";for(;v!==t||C!==e;)v+=a?1:-1,a&&v>l.cols-1?(d+=l.buffer.translateBufferLineToString(C,!1,i,v),v=0,i=0,C++):!a&&v<0&&(d+=l.buffer.translateBufferLineToString(C,!1,0,i+1),v=l.cols-1,i=v,C--);return d+l.buffer.translateBufferLineToString(C,!1,i,v)}function S(i,r){const t=r?"O":"[";return c.C0.ESC+t+i}function f(i,r){i=Math.floor(i);let t="";for(let e=0;e<i;e++)t+=r;return t}s.moveToCellSequence=function(i,r,t,e){const a=t.buffer.x,l=t.buffer.y;if(!t.buffer.hasScrollback)return function(d,m,k,O,R,B){return u(m,O,R,B).length===0?"":f(g(d,m,d,m-o(m,R),!1,R).length,S("D",B))}(a,l,0,r,t,e)+u(l,r,t,e)+function(d,m,k,O,R,B){let H;H=u(m,O,R,B).length>0?O-o(O,R):m;const U=O,$=function(j,E,D,T,P,W){let q;return q=u(D,T,P,W).length>0?T-o(T,P):E,j<D&&q<=T||j>=D&&q<T?"C":"D"}(d,m,k,O,R,B);return f(g(d,H,k,U,$==="C",R).length,S($,B))}(a,l,i,r,t,e);let v;if(l===r)return v=a>i?"D":"C",f(Math.abs(a-i),S(v,e));v=l>r?"D":"C";const C=Math.abs(l-r);return f(function(d,m){return m.cols-d}(l>r?i:a,t)+(C-1)*t.cols+1+((l>r?a:i)-1),S(v,e))}},1296:function(w,s,n){var c=this&&this.__decorate||function(R,B,H,U){var $,j=arguments.length,E=j<3?B:U===null?U=Object.getOwnPropertyDescriptor(B,H):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(R,B,H,U);else for(var D=R.length-1;D>=0;D--)($=R[D])&&(E=(j<3?$(E):j>3?$(B,H,E):$(B,H))||E);return j>3&&E&&Object.defineProperty(B,H,E),E},u=this&&this.__param||function(R,B){return function(H,U){B(H,U,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const o=n(3787),_=n(2550),g=n(2223),S=n(6171),f=n(4725),i=n(8055),r=n(8460),t=n(844),e=n(2585),a="xterm-dom-renderer-owner-",l="xterm-rows",v="xterm-fg-",C="xterm-bg-",d="xterm-focus",m="xterm-selection";let k=1,O=s.DomRenderer=class extends t.Disposable{constructor(R,B,H,U,$,j,E,D,T,P){super(),this._element=R,this._screenElement=B,this._viewportElement=H,this._linkifier2=U,this._charSizeService=j,this._optionsService=E,this._bufferService=D,this._coreBrowserService=T,this._themeService=P,this._terminalClass=k++,this._rowElements=[],this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(l),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(m),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(W=>this._injectCss(W))),this._injectCss(this._themeService.colors),this._rowFactory=$.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(a+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(W=>this._handleLinkHover(W))),this.register(this._linkifier2.onHideLinkUnderline(W=>this._handleLinkLeave(W))),this.register((0,t.toDisposable)(()=>{this._element.classList.remove(a+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const B=`${this._terminalSelector} .${l} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=B,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let B=`${this._terminalSelector} .${l} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;B+=`${this._terminalSelector} .${l} .xterm-dim { color: ${i.color.multiplyOpacity(R.foreground,.5).css};}`,B+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,B+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",B+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,B+=`${this._terminalSelector} .${l}.${d} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${l}.${d} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${l} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${l} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${l} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${l} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,B+=`${this._terminalSelector} .${m} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${m} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${m} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[H,U]of R.ansi.entries())B+=`${this._terminalSelector} .${v}${H} { color: ${U.css}; }${this._terminalSelector} .${v}${H}.xterm-dim { color: ${i.color.multiplyOpacity(U,.5).css}; }${this._terminalSelector} .${C}${H} { background-color: ${U.css}; }`;B+=`${this._terminalSelector} .${v}${g.INVERTED_DEFAULT_COLOR} { color: ${i.color.opaque(R.background).css}; }${this._terminalSelector} .${v}${g.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${i.color.multiplyOpacity(i.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${C}${g.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=B}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,B){for(let H=this._rowElements.length;H<=B;H++){const U=document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>B;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,B){this._refreshRowElements(R,B),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(d)}handleFocus(){this._rowContainer.classList.add(d),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,B,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,B,H),this.renderRows(0,this._bufferService.rows-1),!R||!B)return;const U=R[1]-this._bufferService.buffer.ydisp,$=B[1]-this._bufferService.buffer.ydisp,j=Math.max(U,0),E=Math.min($,this._bufferService.rows-1);if(j>=this._bufferService.rows||E<0)return;const D=document.createDocumentFragment();if(H){const T=R[0]>B[0];D.appendChild(this._createSelectionElement(j,T?B[0]:R[0],T?R[0]:B[0],E-j+1))}else{const T=U===j?R[0]:0,P=j===$?B[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(j,T,P));const W=E-j-1;if(D.appendChild(this._createSelectionElement(j+1,0,this._bufferService.cols,W)),j!==E){const q=$===E?B[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(E,0,q))}}this._selectionContainer.appendChild(D)}_createSelectionElement(R,B,H,U=1){const $=document.createElement("div");return $.style.height=U*this.dimensions.css.cell.height+"px",$.style.top=R*this.dimensions.css.cell.height+"px",$.style.left=B*this.dimensions.css.cell.width+"px",$.style.width=this.dimensions.css.cell.width*(H-B)+"px",$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,B){const H=this._bufferService.buffer,U=H.ybase+H.y,$=Math.min(H.x,this._bufferService.cols-1),j=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,D=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=R;T<=B;T++){const P=T+H.ydisp,W=this._rowElements[T],q=H.lines.get(P);if(!W||!q)break;W.replaceChildren(...this._rowFactory.createRow(q,P,P===U,E,D,$,j,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${a}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,B,H,U,$,j){H<0&&(R=0),U<0&&(B=0);const E=this._bufferService.rows-1;H=Math.max(Math.min(H,E),0),U=Math.max(Math.min(U,E),0),$=Math.min($,this._bufferService.cols);const D=this._bufferService.buffer,T=D.ybase+D.y,P=Math.min(D.x,$-1),W=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=H;V<=U;++V){const ee=V+D.ydisp,x=this._rowElements[V],M=D.lines.get(ee);if(!x||!M)break;x.replaceChildren(...this._rowFactory.createRow(M,ee,ee===T,q,G,P,W,this.dimensions.css.cell.width,this._widthCache,j?V===H?R:0:-1,j?(V===U?B:$)-1:-1))}}};s.DomRenderer=O=c([u(4,e.IInstantiationService),u(5,f.ICharSizeService),u(6,e.IOptionsService),u(7,e.IBufferService),u(8,f.ICoreBrowserService),u(9,f.IThemeService)],O)},3787:function(w,s,n){var c=this&&this.__decorate||function(v,C,d,m){var k,O=arguments.length,R=O<3?C:m===null?m=Object.getOwnPropertyDescriptor(C,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,C,d,m);else for(var B=v.length-1;B>=0;B--)(k=v[B])&&(R=(O<3?k(R):O>3?k(C,d,R):k(C,d))||R);return O>3&&R&&Object.defineProperty(C,d,R),R},u=this&&this.__param||function(v,C){return function(d,m){C(d,m,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const o=n(2223),_=n(643),g=n(511),S=n(2585),f=n(8055),i=n(4725),r=n(4269),t=n(6171),e=n(3734);let a=s.DomRendererRowFactory=class{constructor(v,C,d,m,k,O,R){this._document=v,this._characterJoinerService=C,this._optionsService=d,this._coreBrowserService=m,this._coreService=k,this._decorationService=O,this._themeService=R,this._workCell=new g.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(v,C,d){this._selectionStart=v,this._selectionEnd=C,this._columnSelectMode=d}createRow(v,C,d,m,k,O,R,B,H,U,$){const j=[],E=this._characterJoinerService.getJoinedCharacters(C),D=this._themeService.colors;let T,P=v.getNoBgTrimmedLength();d&&P<O+1&&(P=O+1);let W=0,q="",G=0,V=0,ee=0,x=!1,M=0,N=!1,F=0;const X=[],K=U!==-1&&$!==-1;for(let Q=0;Q<P;Q++){v.loadCell(Q,this._workCell);let ae=this._workCell.getWidth();if(ae===0)continue;let he=!1,ke=Q,Y=this._workCell;if(E.length>0&&Q===E[0][0]){he=!0;const se=E.shift();Y=new r.JoinedCellData(this._workCell,v.translateToString(!0,se[0],se[1]),se[1]-se[0]),ke=se[1]-1,ae=Y.getWidth()}const Te=this._isCellInSelection(Q,C),Ct=d&&Q===O,yt=K&&Q>=U&&Q<=$;let wt=!1;this._decorationService.forEachDecorationAtCell(Q,C,void 0,se=>{wt=!0});let Ye=Y.getChars()||_.WHITESPACE_CELL_CHAR;if(Ye===" "&&(Y.isUnderline()||Y.isOverline())&&(Ye="\xA0"),F=ae*B-H.get(Ye,Y.isBold(),Y.isItalic()),T){if(W&&(Te&&N||!Te&&!N&&Y.bg===G)&&(Te&&N&&D.selectionForeground||Y.fg===V)&&Y.extended.ext===ee&&yt===x&&F===M&&!Ct&&!he&&!wt){q+=Ye,W++;continue}W&&(T.textContent=q),T=this._document.createElement("span"),W=0,q=""}else T=this._document.createElement("span");if(G=Y.bg,V=Y.fg,ee=Y.extended.ext,x=yt,M=F,N=Te,he&&O>=Q&&O<=ke&&(O=Q),!this._coreService.isCursorHidden&&Ct){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&X.push("xterm-cursor-blink"),X.push(m==="bar"?"xterm-cursor-bar":m==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(Y.isBold()&&X.push("xterm-bold"),Y.isItalic()&&X.push("xterm-italic"),Y.isDim()&&X.push("xterm-dim"),q=Y.isInvisible()?_.WHITESPACE_CELL_CHAR:Y.getChars()||_.WHITESPACE_CELL_CHAR,Y.isUnderline()&&(X.push(`xterm-underline-${Y.extended.underlineStyle}`),q===" "&&(q="\xA0"),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${e.AttributeData.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let se=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&se<8&&(se+=8),T.style.textDecorationColor=D.ansi[se].css}Y.isOverline()&&(X.push("xterm-overline"),q===" "&&(q="\xA0")),Y.isStrikethrough()&&X.push("xterm-strikethrough"),yt&&(T.style.textDecoration="underline");let ue=Y.getFgColor(),Oe=Y.getFgColorMode(),me=Y.getBgColor(),Be=Y.getBgColorMode();const Et=!!Y.isInverse();if(Et){const se=ue;ue=me,me=se;const Fn=Oe;Oe=Be,Be=Fn}let be,xt,Ce,Pe=!1;switch(this._decorationService.forEachDecorationAtCell(Q,C,void 0,se=>{se.options.layer!=="top"&&Pe||(se.backgroundColorRGB&&(Be=50331648,me=se.backgroundColorRGB.rgba>>8&16777215,be=se.backgroundColorRGB),se.foregroundColorRGB&&(Oe=50331648,ue=se.foregroundColorRGB.rgba>>8&16777215,xt=se.foregroundColorRGB),Pe=se.options.layer==="top")}),!Pe&&Te&&(be=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,me=be.rgba>>8&16777215,Be=50331648,Pe=!0,D.selectionForeground&&(Oe=50331648,ue=D.selectionForeground.rgba>>8&16777215,xt=D.selectionForeground)),Pe&&X.push("xterm-decoration-top"),Be){case 16777216:case 33554432:Ce=D.ansi[me],X.push(`xterm-bg-${me}`);break;case 50331648:Ce=f.rgba.toColor(me>>16,me>>8&255,255&me),this._addStyle(T,`background-color:#${l((me>>>0).toString(16),"0",6)}`);break;default:Et?(Ce=D.foreground,X.push(`xterm-bg-${o.INVERTED_DEFAULT_COLOR}`)):Ce=D.background}switch(be||Y.isDim()&&(be=f.color.multiplyOpacity(Ce,.5)),Oe){case 16777216:case 33554432:Y.isBold()&&ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ue+=8),this._applyMinimumContrast(T,Ce,D.ansi[ue],Y,be,void 0)||X.push(`xterm-fg-${ue}`);break;case 50331648:const se=f.rgba.toColor(ue>>16&255,ue>>8&255,255&ue);this._applyMinimumContrast(T,Ce,se,Y,be,xt)||this._addStyle(T,`color:#${l(ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,Ce,D.foreground,Y,be,void 0)||Et&&X.push(`xterm-fg-${o.INVERTED_DEFAULT_COLOR}`)}X.length&&(T.className=X.join(" "),X.length=0),Ct||he||wt?T.textContent=q:W++,F!==this.defaultSpacing&&(T.style.letterSpacing=`${F}px`),j.push(T),Q=ke}return T&&W&&(T.textContent=q),j}_applyMinimumContrast(v,C,d,m,k,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.excludeFromContrastRatioDemands)(m.getCode()))return!1;const R=this._getContrastCache(m);let B;if(k||O||(B=R.getColor(C.rgba,d.rgba)),B===void 0){const H=this._optionsService.rawOptions.minimumContrastRatio/(m.isDim()?2:1);B=f.color.ensureContrastRatio(k||C,O||d,H),R.setColor((k||C).rgba,(O||d).rgba,B??null)}return!!B&&(this._addStyle(v,`color:${B.css}`),!0)}_getContrastCache(v){return v.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(v,C){v.setAttribute("style",`${v.getAttribute("style")||""}${C};`)}_isCellInSelection(v,C){const d=this._selectionStart,m=this._selectionEnd;return!(!d||!m)&&(this._columnSelectMode?d[0]<=m[0]?v>=d[0]&&C>=d[1]&&v<m[0]&&C<=m[1]:v<d[0]&&C>=d[1]&&v>=m[0]&&C<=m[1]:C>d[1]&&C<m[1]||d[1]===m[1]&&C===d[1]&&v>=d[0]&&v<m[0]||d[1]<m[1]&&C===m[1]&&v<m[0]||d[1]<m[1]&&C===d[1]&&v>=d[0])}};function l(v,C,d){for(;v.length<d;)v=C+v;return v}s.DomRendererRowFactory=a=c([u(1,i.ICharacterJoinerService),u(2,S.IOptionsService),u(3,i.ICoreBrowserService),u(4,S.ICoreService),u(5,S.IDecorationService),u(6,i.IThemeService)],a)},2550:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(n){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const c=n.createElement("span"),u=n.createElement("span");u.style.fontWeight="bold";const o=n.createElement("span");o.style.fontStyle="italic";const _=n.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[c,u,o,_],this._container.appendChild(c),this._container.appendChild(u),this._container.appendChild(o),this._container.appendChild(_),n.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,c,u,o){n===this._font&&c===this._fontSize&&u===this._weight&&o===this._weightBold||(this._font=n,this._fontSize=c,this._weight=u,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(n,c,u){let o=0;if(!c&&!u&&n.length===1&&(o=n.charCodeAt(0))<256)return this._flat[o]!==-9999?this._flat[o]:this._flat[o]=this._measure(n,0);let _=n;c&&(_+="B"),u&&(_+="I");let g=this._holey.get(_);if(g===void 0){let S=0;c&&(S|=1),u&&(S|=2),g=this._measure(n,S),this._holey.set(_,g)}return g}_measure(n,c){const u=this._measureElements[c];return u.textContent=n.repeat(32),u.offsetWidth/32}}},2223:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const c=n(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(w,s)=>{function n(c){return 57508<=c&&c<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},s.isPowerlineGlyph=n,s.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},s.excludeFromContrastRatioDemands=function(c){return n(c)||function(u){return 9472<=u&&u<=9631}(c)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,c=this.selectionEnd;return!(!n||!c)&&(n[1]>c[1]||n[1]===c[1]&&n[0]>c[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(w,s,n){var c=this&&this.__decorate||function(i,r,t,e){var a,l=arguments.length,v=l<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,r,t,e);else for(var C=i.length-1;C>=0;C--)(a=i[C])&&(v=(l<3?a(v):l>3?a(r,t,v):a(r,t))||v);return l>3&&v&&Object.defineProperty(r,t,v),v},u=this&&this.__param||function(i,r){return function(t,e){r(t,e,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const o=n(2585),_=n(8460),g=n(844);let S=s.CharSizeService=class extends g.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(i,r,t){super(),this._optionsService=t,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(i,r,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const i=this._measureStrategy.measure();i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._onCharSizeChange.fire())}};s.CharSizeService=S=c([u(2,o.IOptionsService)],S);class f{constructor(r,t,e){this._document=r,this._parentElement=t,this._optionsService=e,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const r={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return r.width!==0&&r.height!==0&&(this._result.width=r.width/32,this._result.height=Math.ceil(r.height)),this._result}}},4269:function(w,s,n){var c=this&&this.__decorate||function(r,t,e,a){var l,v=arguments.length,C=v<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,t,e,a);else for(var d=r.length-1;d>=0;d--)(l=r[d])&&(C=(v<3?l(C):v>3?l(t,e,C):l(t,e))||C);return v>3&&C&&Object.defineProperty(t,e,C),C},u=this&&this.__param||function(r,t){return function(e,a){t(e,a,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const o=n(3734),_=n(643),g=n(511),S=n(2585);class f extends o.AttributeData{constructor(t,e,a){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=a}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=f;let i=s.CharacterJoinerService=class xi{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(t){const e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];const a=[],l=e.translateToString(!0);let v=0,C=0,d=0,m=e.getFg(0),k=e.getBg(0);for(let O=0;O<e.getTrimmedLength();O++)if(e.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==m||this._workCell.bg!==k){if(O-v>1){const R=this._getJoinedRanges(l,d,C,e,v);for(let B=0;B<R.length;B++)a.push(R[B])}v=O,d=C,m=this._workCell.fg,k=this._workCell.bg}C+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const O=this._getJoinedRanges(l,d,C,e,v);for(let R=0;R<O.length;R++)a.push(O[R])}return a}_getJoinedRanges(t,e,a,l,v){const C=t.substring(e,a);let d=[];try{d=this._characterJoiners[0].handler(C)}catch(m){console.error(m)}for(let m=1;m<this._characterJoiners.length;m++)try{const k=this._characterJoiners[m].handler(C);for(let O=0;O<k.length;O++)xi._mergeRanges(d,k[O])}catch(k){console.error(k)}return this._stringRangesToCellRanges(d,l,v),d}_stringRangesToCellRanges(t,e,a){let l=0,v=!1,C=0,d=t[l];if(d){for(let m=a;m<this._bufferService.cols;m++){const k=e.getWidth(m),O=e.getString(m).length||_.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!v&&d[0]<=C&&(d[0]=m,v=!0),d[1]<=C){if(d[1]=m,d=t[++l],!d)break;d[0]<=C?(d[0]=m,v=!0):v=!1}C+=O}}d&&(d[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let a=!1;for(let l=0;l<t.length;l++){const v=t[l];if(a){if(e[1]<=v[0])return t[l-1][1]=e[1],t;if(e[1]<=v[1])return t[l-1][1]=Math.max(e[1],v[1]),t.splice(l,1),t;t.splice(l,1),l--}else{if(e[1]<=v[0])return t.splice(l,0,e),t;if(e[1]<=v[1])return v[0]=Math.min(e[0],v[0]),t;e[0]<v[1]&&(v[0]=Math.min(e[0],v[0]),a=!0)}}return a?t[t.length-1][1]=e[1]:t.push(e),t}};s.CharacterJoinerService=i=c([u(0,S.IBufferService)],i)},5114:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(n,c){this._textarea=n,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(w,s,n){var c=this&&this.__decorate||function(S,f,i,r){var t,e=arguments.length,a=e<3?f:r===null?r=Object.getOwnPropertyDescriptor(f,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(S,f,i,r);else for(var l=S.length-1;l>=0;l--)(t=S[l])&&(a=(e<3?t(a):e>3?t(f,i,a):t(f,i))||a);return e>3&&a&&Object.defineProperty(f,i,a),a},u=this&&this.__param||function(S,f){return function(i,r){f(i,r,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const o=n(4725),_=n(9806);let g=s.MouseService=class{constructor(S,f){this._renderService=S,this._charSizeService=f}getCoords(S,f,i,r,t){return(0,_.getCoords)(window,S,f,i,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(S,f){const i=(0,_.getCoordsRelativeToElement)(window,S,f);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};s.MouseService=g=c([u(0,o.IRenderService),u(1,o.ICharSizeService)],g)},3230:function(w,s,n){var c=this&&this.__decorate||function(a,l,v,C){var d,m=arguments.length,k=m<3?l:C===null?C=Object.getOwnPropertyDescriptor(l,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,l,v,C);else for(var O=a.length-1;O>=0;O--)(d=a[O])&&(k=(m<3?d(k):m>3?d(l,v,k):d(l,v))||k);return m>3&&k&&Object.defineProperty(l,v,k),k},u=this&&this.__param||function(a,l){return function(v,C){l(v,C,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const o=n(3656),_=n(6193),g=n(5596),S=n(4725),f=n(8460),i=n(844),r=n(7226),t=n(2585);let e=s.RenderService=class extends i.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(a,l,v,C,d,m,k,O){if(super(),this._rowCount=a,this._charSizeService=C,this._renderer=this.register(new i.MutableDisposable),this._pausedResizeTask=new r.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(k.window,(R,B)=>this._renderRows(R,B)),this.register(this._renderDebouncer),this._screenDprMonitor=new g.ScreenDprMonitor(k.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(m.onResize(()=>this._fullRefresh())),this.register(m.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)===null||R===void 0?void 0:R.clear()})),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(d.onDecorationRegistered(()=>this._fullRefresh())),this.register(d.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(m.cols,m.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(m.buffer.y,m.buffer.y,!0))),this.register((0,o.addDisposableDomListener)(k.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(O.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in k.window){const R=new k.window.IntersectionObserver(B=>this._handleIntersectionChange(B[B.length-1]),{threshold:0});R.observe(l),this.register({dispose:()=>R.disconnect()})}}_handleIntersectionChange(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(a,l,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,l,this._rowCount))}_renderRows(a,l){this._renderer.value&&(a=Math.min(a,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(a,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:a,end:l}),this._onRender.fire({start:a,end:l}),this._isNextRenderRedrawOnly=!0)}resize(a,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(a){this._renderer.value=a,this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(a){return this._renderDebouncer.addRefreshCallback(a)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var a,l;this._renderer.value&&((l=(a=this._renderer.value).clearTextureAtlas)===null||l===void 0||l.call(a),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(a,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(a,l)):this._renderer.value.handleResize(a,l),this._fullRefresh())}handleCharSizeChanged(){var a;(a=this._renderer.value)===null||a===void 0||a.handleCharSizeChanged()}handleBlur(){var a;(a=this._renderer.value)===null||a===void 0||a.handleBlur()}handleFocus(){var a;(a=this._renderer.value)===null||a===void 0||a.handleFocus()}handleSelectionChanged(a,l,v){var C;this._selectionState.start=a,this._selectionState.end=l,this._selectionState.columnSelectMode=v,(C=this._renderer.value)===null||C===void 0||C.handleSelectionChanged(a,l,v)}handleCursorMove(){var a;(a=this._renderer.value)===null||a===void 0||a.handleCursorMove()}clear(){var a;(a=this._renderer.value)===null||a===void 0||a.clear()}};s.RenderService=e=c([u(2,t.IOptionsService),u(3,S.ICharSizeService),u(4,t.IDecorationService),u(5,t.IBufferService),u(6,S.ICoreBrowserService),u(7,S.IThemeService)],e)},9312:function(w,s,n){var c=this&&this.__decorate||function(d,m,k,O){var R,B=arguments.length,H=B<3?m:O===null?O=Object.getOwnPropertyDescriptor(m,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(d,m,k,O);else for(var U=d.length-1;U>=0;U--)(R=d[U])&&(H=(B<3?R(H):B>3?R(m,k,H):R(m,k))||H);return B>3&&H&&Object.defineProperty(m,k,H),H},u=this&&this.__param||function(d,m){return function(k,O){m(k,O,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const o=n(9806),_=n(9504),g=n(456),S=n(4725),f=n(8460),i=n(844),r=n(6114),t=n(4841),e=n(511),a=n(2585),l=String.fromCharCode(160),v=new RegExp(l,"g");let C=s.SelectionService=class extends i.Disposable{constructor(d,m,k,O,R,B,H,U,$){super(),this._element=d,this._screenElement=m,this._linkifier=k,this._bufferService=O,this._coreService=R,this._mouseService=B,this._optionsService=H,this._renderService=U,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new e.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=j=>this._handleMouseMove(j),this._mouseUpListener=j=>this._handleMouseUp(j),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(j=>this._handleTrim(j)),this.register(this._bufferService.buffers.onBufferActivate(j=>this._handleBufferActivate(j))),this.enable(),this._model=new g.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,i.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const d=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;return!(!d||!m||d[0]===m[0]&&d[1]===m[1])}get selectionText(){const d=this._model.finalSelectionStart,m=this._model.finalSelectionEnd;if(!d||!m)return"";const k=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(d[0]===m[0])return"";const R=d[0]<m[0]?d[0]:m[0],B=d[0]<m[0]?m[0]:d[0];for(let H=d[1];H<=m[1];H++){const U=k.translateBufferLineToString(H,!0,R,B);O.push(U)}}else{const R=d[1]===m[1]?m[0]:void 0;O.push(k.translateBufferLineToString(d[1],!0,d[0],R));for(let B=d[1]+1;B<=m[1]-1;B++){const H=k.lines.get(B),U=k.translateBufferLineToString(B,!0);H!=null&&H.isWrapped?O[O.length-1]+=U:O.push(U)}if(d[1]!==m[1]){const B=k.lines.get(m[1]),H=k.translateBufferLineToString(m[1],!0,0,m[0]);B&&B.isWrapped?O[O.length-1]+=H:O.push(H)}}return O.map(R=>R.replace(v," ")).join(r.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(d){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),r.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(d){const m=this._getMouseBufferCoords(d),k=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(k&&O&&m)&&this._areCoordsInSelection(m,k,O)}isCellInSelection(d,m){const k=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!k||!O)&&this._areCoordsInSelection([d,m],k,O)}_areCoordsInSelection(d,m,k){return d[1]>m[1]&&d[1]<k[1]||m[1]===k[1]&&d[1]===m[1]&&d[0]>=m[0]&&d[0]<k[0]||m[1]<k[1]&&d[1]===k[1]&&d[0]<k[0]||m[1]<k[1]&&d[1]===m[1]&&d[0]>=m[0]}_selectWordAtCursor(d,m){var k,O;const R=(O=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||O===void 0?void 0:O.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(d);return!!B&&(this._selectWordAt(B,m),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(d,m){this._model.clearSelection(),d=Math.max(d,0),m=Math.min(m,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,m],this.refresh(),this._onSelectionChange.fire()}_handleTrim(d){this._model.handleTrim(d)&&this.refresh()}_getMouseBufferCoords(d){const m=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(m)return m[0]--,m[1]--,m[1]+=this._bufferService.buffer.ydisp,m}_getMouseEventScrollAmount(d){let m=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,d,this._screenElement)[1];const k=this._renderService.dimensions.css.canvas.height;return m>=0&&m<=k?0:(m>k&&(m-=k),m=Math.min(Math.max(m,-50),50),m/=50,m/Math.abs(m)+Math.round(14*m))}shouldForceSelection(d){return r.isMac?d.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:d.shiftKey}handleMouseDown(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._handleIncrementalClick(d):d.detail===1?this._handleSingleClick(d):d.detail===2?this._handleDoubleClick(d):d.detail===3&&this._handleTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))}_handleSingleClick(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const m=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);m&&m.length!==this._model.selectionStart[0]&&m.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(d){this._selectWordAtCursor(d,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(d){const m=this._getMouseBufferCoords(d);m&&(this._activeSelectionMode=2,this._selectLineAt(m[1]))}shouldColumnSelect(d){return d.altKey&&!(r.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(d){if(d.stopImmediatePropagation(),!this._model.selectionStart)return;const m=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){const O=k.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}m&&m[0]===this._model.selectionEnd[0]&&m[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}}_handleMouseUp(d){const m=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&m<500&&d.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const k=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){const O=(0,_.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const d=this._model.finalSelectionStart,m=this._model.finalSelectionEnd,k=!(!d||!m||d[0]===m[0]&&d[1]===m[1]);k?d&&m&&(this._oldSelectionStart&&this._oldSelectionEnd&&d[0]===this._oldSelectionStart[0]&&d[1]===this._oldSelectionStart[1]&&m[0]===this._oldSelectionEnd[0]&&m[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(d,m,k)):this._oldHasSelection&&this._fireOnSelectionChange(d,m,k)}_fireOnSelectionChange(d,m,k){this._oldSelectionStart=d,this._oldSelectionEnd=m,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(d){this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(m=>this._handleTrim(m))}_convertViewportColToCharacterIndex(d,m){let k=m;for(let O=0;m>=O;O++){const R=d.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:R>1&&m!==O&&(k+=R-1)}return k}setSelection(d,m,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,m],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(d){this._isClickInSelection(d)||(this._selectWordAtCursor(d,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(d,m,k=!0,O=!0){if(d[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,B=R.lines.get(d[1]);if(!B)return;const H=R.translateBufferLineToString(d[1],!1);let U=this._convertViewportColToCharacterIndex(B,d[0]),$=U;const j=d[0]-U;let E=0,D=0,T=0,P=0;if(H.charAt(U)===" "){for(;U>0&&H.charAt(U-1)===" ";)U--;for(;$<H.length&&H.charAt($+1)===" ";)$++}else{let G=d[0],V=d[0];B.getWidth(G)===0&&(E++,G--),B.getWidth(V)===2&&(D++,V++);const ee=B.getString(V).length;for(ee>1&&(P+=ee-1,$+=ee-1);G>0&&U>0&&!this._isCharWordSeparator(B.loadCell(G-1,this._workCell));){B.loadCell(G-1,this._workCell);const x=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,G--):x>1&&(T+=x-1,U-=x-1),U--,G--}for(;V<B.length&&$+1<H.length&&!this._isCharWordSeparator(B.loadCell(V+1,this._workCell));){B.loadCell(V+1,this._workCell);const x=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,V++):x>1&&(P+=x-1,$+=x-1),$++,V++}}$++;let W=U+j-E+T,q=Math.min(this._bufferService.cols,$-U+E+D-T-P);if(m||H.slice(U,$).trim()!==""){if(k&&W===0&&B.getCodePoint(0)!==32){const G=R.lines.get(d[1]-1);if(G&&B.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){const V=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(V){const ee=this._bufferService.cols-V.start;W-=ee,q+=ee}}}if(O&&W+q===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const G=R.lines.get(d[1]+1);if(G!=null&&G.isWrapped&&G.getCodePoint(0)!==32){const V=this._getWordAt([0,d[1]+1],!1,!1,!0);V&&(q+=V.length)}}return{start:W,length:q}}}_selectWordAt(d,m){const k=this._getWordAt(d,m);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[k.start,d[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(d){const m=this._getWordAt(d,!0);if(m){let k=d[1];for(;m.start<0;)m.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;m.start+m.length>this._bufferService.cols;)m.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?m.start:m.start+m.length,k]}}_isCharWordSeparator(d){return d.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(d.getChars())>=0}_selectLineAt(d){const m=this._bufferService.buffer.getWrappedRangeForLine(d),k={start:{x:0,y:m.first},end:{x:this._bufferService.cols-1,y:m.last}};this._model.selectionStart=[0,m.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(k,this._bufferService.cols)}};s.SelectionService=C=c([u(3,a.IBufferService),u(4,a.ICoreService),u(5,S.IMouseService),u(6,a.IOptionsService),u(7,S.IRenderService),u(8,S.ICoreBrowserService)],C)},4725:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const c=n(8343);s.ICharSizeService=(0,c.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),s.IMouseService=(0,c.createDecorator)("MouseService"),s.IRenderService=(0,c.createDecorator)("RenderService"),s.ISelectionService=(0,c.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(w,s,n){var c=this&&this.__decorate||function(C,d,m,k){var O,R=arguments.length,B=R<3?d:k===null?k=Object.getOwnPropertyDescriptor(d,m):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(C,d,m,k);else for(var H=C.length-1;H>=0;H--)(O=C[H])&&(B=(R<3?O(B):R>3?O(d,m,B):O(d,m))||B);return R>3&&B&&Object.defineProperty(d,m,B),B},u=this&&this.__param||function(C,d){return function(m,k){d(m,k,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const o=n(7239),_=n(8055),g=n(8460),S=n(844),f=n(2585),i=_.css.toColor("#ffffff"),r=_.css.toColor("#000000"),t=_.css.toColor("#ffffff"),e=_.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],d=[0,95,135,175,215,255];for(let m=0;m<216;m++){const k=d[m/36%6|0],O=d[m/6%6|0],R=d[m%6];C.push({css:_.channels.toCss(k,O,R),rgba:_.channels.toRgba(k,O,R)})}for(let m=0;m<24;m++){const k=8+10*m;C.push({css:_.channels.toCss(k,k,k),rgba:_.channels.toRgba(k,k,k)})}return C})());let l=s.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:i,background:r,cursor:t,cursorAccent:e,selectionForeground:void 0,selectionBackgroundTransparent:a,selectionBackgroundOpaque:_.color.blend(r,a),selectionInactiveBackgroundTransparent:a,selectionInactiveBackgroundOpaque:_.color.blend(r,a),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const d=this._colors;if(d.foreground=v(C.foreground,i),d.background=v(C.background,r),d.cursor=v(C.cursor,t),d.cursorAccent=v(C.cursorAccent,e),d.selectionBackgroundTransparent=v(C.selectionBackground,a),d.selectionBackgroundOpaque=_.color.blend(d.background,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundTransparent=v(C.selectionInactiveBackground,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundOpaque=_.color.blend(d.background,d.selectionInactiveBackgroundTransparent),d.selectionForeground=C.selectionForeground?v(C.selectionForeground,_.NULL_COLOR):void 0,d.selectionForeground===_.NULL_COLOR&&(d.selectionForeground=void 0),_.color.isOpaque(d.selectionBackgroundTransparent)&&(d.selectionBackgroundTransparent=_.color.opacity(d.selectionBackgroundTransparent,.3)),_.color.isOpaque(d.selectionInactiveBackgroundTransparent)&&(d.selectionInactiveBackgroundTransparent=_.color.opacity(d.selectionInactiveBackgroundTransparent,.3)),d.ansi=s.DEFAULT_ANSI_COLORS.slice(),d.ansi[0]=v(C.black,s.DEFAULT_ANSI_COLORS[0]),d.ansi[1]=v(C.red,s.DEFAULT_ANSI_COLORS[1]),d.ansi[2]=v(C.green,s.DEFAULT_ANSI_COLORS[2]),d.ansi[3]=v(C.yellow,s.DEFAULT_ANSI_COLORS[3]),d.ansi[4]=v(C.blue,s.DEFAULT_ANSI_COLORS[4]),d.ansi[5]=v(C.magenta,s.DEFAULT_ANSI_COLORS[5]),d.ansi[6]=v(C.cyan,s.DEFAULT_ANSI_COLORS[6]),d.ansi[7]=v(C.white,s.DEFAULT_ANSI_COLORS[7]),d.ansi[8]=v(C.brightBlack,s.DEFAULT_ANSI_COLORS[8]),d.ansi[9]=v(C.brightRed,s.DEFAULT_ANSI_COLORS[9]),d.ansi[10]=v(C.brightGreen,s.DEFAULT_ANSI_COLORS[10]),d.ansi[11]=v(C.brightYellow,s.DEFAULT_ANSI_COLORS[11]),d.ansi[12]=v(C.brightBlue,s.DEFAULT_ANSI_COLORS[12]),d.ansi[13]=v(C.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),d.ansi[14]=v(C.brightCyan,s.DEFAULT_ANSI_COLORS[14]),d.ansi[15]=v(C.brightWhite,s.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const m=Math.min(d.ansi.length-16,C.extendedAnsi.length);for(let k=0;k<m;k++)d.ansi[k+16]=v(C.extendedAnsi[k],s.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let d=0;d<this._restoreColors.ansi.length;++d)this._colors.ansi[d]=this._restoreColors.ansi[d]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function v(C,d){if(C!==void 0)try{return _.css.toColor(C)}catch{}return d}s.ThemeService=l=c([u(0,f.IOptionsService)],l)},6349:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const c=n(8460),u=n(844);class o extends u.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;const S=new Array(g);for(let f=0;f<Math.min(g,this.length);f++)S[f]=this._array[this._getCyclicIndex(f)];this._array=S,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let S=this._length;S<g;S++)this._array[S]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,S){this._array[this._getCyclicIndex(g)]=S}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,S,...f){if(S){for(let i=g;i<this._length-S;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+S)];this._length-=S,this.onDeleteEmitter.fire({index:g,amount:S})}for(let i=this._length-1;i>=g;i--)this._array[this._getCyclicIndex(i+f.length)]=this._array[this._getCyclicIndex(i)];for(let i=0;i<f.length;i++)this._array[this._getCyclicIndex(g+i)]=f[i];if(f.length&&this.onInsertEmitter.fire({index:g,amount:f.length}),this._length+f.length>this._maxLength){const i=this._length+f.length-this._maxLength;this._startIndex+=i,this._length=this._maxLength,this.onTrimEmitter.fire(i)}else this._length+=f.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,S,f){if(!(S<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let r=S-1;r>=0;r--)this.set(g+r+f,this.get(g+r));const i=g+S+f-this._length;if(i>0)for(this._length+=i;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let i=0;i<S;i++)this.set(g+i+f,this.get(g+i))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}s.CircularList=o},1439:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function n(c,u=5){if(typeof c!="object")return c;const o=Array.isArray(c)?[]:{};for(const _ in c)o[_]=u<=1?c[_]:c[_]&&n(c[_],u-1);return o}},8055:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const c=n(6114);let u=0,o=0,_=0,g=0;var S,f,i,r,t;function e(l){const v=l.toString(16);return v.length<2?"0"+v:v}function a(l,v){return l<v?(v+.05)/(l+.05):(l+.05)/(v+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(v,C,d,m){return m!==void 0?`#${e(v)}${e(C)}${e(d)}${e(m)}`:`#${e(v)}${e(C)}${e(d)}`},l.toRgba=function(v,C,d,m=255){return(v<<24|C<<16|d<<8|m)>>>0}}(S||(s.channels=S={})),function(l){function v(C,d){return g=Math.round(255*d),[u,o,_]=t.toChannels(C.rgba),{css:S.toCss(u,o,_,g),rgba:S.toRgba(u,o,_,g)}}l.blend=function(C,d){if(g=(255&d.rgba)/255,g===1)return{css:d.css,rgba:d.rgba};const m=d.rgba>>24&255,k=d.rgba>>16&255,O=d.rgba>>8&255,R=C.rgba>>24&255,B=C.rgba>>16&255,H=C.rgba>>8&255;return u=R+Math.round((m-R)*g),o=B+Math.round((k-B)*g),_=H+Math.round((O-H)*g),{css:S.toCss(u,o,_),rgba:S.toRgba(u,o,_)}},l.isOpaque=function(C){return(255&C.rgba)==255},l.ensureContrastRatio=function(C,d,m){const k=t.ensureContrastRatio(C.rgba,d.rgba,m);if(k)return t.toColor(k>>24&255,k>>16&255,k>>8&255)},l.opaque=function(C){const d=(255|C.rgba)>>>0;return[u,o,_]=t.toChannels(d),{css:S.toCss(u,o,_),rgba:d}},l.opacity=v,l.multiplyOpacity=function(C,d){return g=255&C.rgba,v(C,g*d/255)},l.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(f||(s.color=f={})),function(l){let v,C;if(!c.isNode){const d=document.createElement("canvas");d.width=1,d.height=1;const m=d.getContext("2d",{willReadFrequently:!0});m&&(v=m,v.globalCompositeOperation="copy",C=v.createLinearGradient(0,0,1,1))}l.toColor=function(d){if(d.match(/#[\da-f]{3,8}/i))switch(d.length){case 4:return u=parseInt(d.slice(1,2).repeat(2),16),o=parseInt(d.slice(2,3).repeat(2),16),_=parseInt(d.slice(3,4).repeat(2),16),t.toColor(u,o,_);case 5:return u=parseInt(d.slice(1,2).repeat(2),16),o=parseInt(d.slice(2,3).repeat(2),16),_=parseInt(d.slice(3,4).repeat(2),16),g=parseInt(d.slice(4,5).repeat(2),16),t.toColor(u,o,_,g);case 7:return{css:d,rgba:(parseInt(d.slice(1),16)<<8|255)>>>0};case 9:return{css:d,rgba:parseInt(d.slice(1),16)>>>0}}const m=d.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(m)return u=parseInt(m[1]),o=parseInt(m[2]),_=parseInt(m[3]),g=Math.round(255*(m[5]===void 0?1:parseFloat(m[5]))),t.toColor(u,o,_,g);if(!v||!C)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=C,v.fillStyle=d,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[u,o,_,g]=v.getImageData(0,0,1,1).data,g!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:S.toRgba(u,o,_,g),css:d}}}(i||(s.css=i={})),function(l){function v(C,d,m){const k=C/255,O=d/255,R=m/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}l.relativeLuminance=function(C){return v(C>>16&255,C>>8&255,255&C)},l.relativeLuminance2=v}(r||(s.rgb=r={})),function(l){function v(d,m,k){const O=d>>24&255,R=d>>16&255,B=d>>8&255;let H=m>>24&255,U=m>>16&255,$=m>>8&255,j=a(r.relativeLuminance2(H,U,$),r.relativeLuminance2(O,R,B));for(;j<k&&(H>0||U>0||$>0);)H-=Math.max(0,Math.ceil(.1*H)),U-=Math.max(0,Math.ceil(.1*U)),$-=Math.max(0,Math.ceil(.1*$)),j=a(r.relativeLuminance2(H,U,$),r.relativeLuminance2(O,R,B));return(H<<24|U<<16|$<<8|255)>>>0}function C(d,m,k){const O=d>>24&255,R=d>>16&255,B=d>>8&255;let H=m>>24&255,U=m>>16&255,$=m>>8&255,j=a(r.relativeLuminance2(H,U,$),r.relativeLuminance2(O,R,B));for(;j<k&&(H<255||U<255||$<255);)H=Math.min(255,H+Math.ceil(.1*(255-H))),U=Math.min(255,U+Math.ceil(.1*(255-U))),$=Math.min(255,$+Math.ceil(.1*(255-$))),j=a(r.relativeLuminance2(H,U,$),r.relativeLuminance2(O,R,B));return(H<<24|U<<16|$<<8|255)>>>0}l.ensureContrastRatio=function(d,m,k){const O=r.relativeLuminance(d>>8),R=r.relativeLuminance(m>>8);if(a(O,R)<k){if(R<O){const U=v(d,m,k),$=a(O,r.relativeLuminance(U>>8));if($<k){const j=C(d,m,k);return $>a(O,r.relativeLuminance(j>>8))?U:j}return U}const B=C(d,m,k),H=a(O,r.relativeLuminance(B>>8));if(H<k){const U=v(d,m,k);return H>a(O,r.relativeLuminance(U>>8))?B:U}return B}},l.reduceLuminance=v,l.increaseLuminance=C,l.toChannels=function(d){return[d>>24&255,d>>16&255,d>>8&255,255&d]},l.toColor=function(d,m,k,O){return{css:S.toCss(d,m,k,O),rgba:S.toRgba(d,m,k,O)}}}(t||(s.rgba=t={})),s.toPaddedHex=e,s.contrastRatio=a},8969:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const c=n(844),u=n(2585),o=n(4348),_=n(7866),g=n(744),S=n(7302),f=n(6975),i=n(8460),r=n(1753),t=n(1480),e=n(7994),a=n(9282),l=n(5435),v=n(5981),C=n(2660);let d=!1;class m extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new i.EventEmitter),this._onScroll.event(O=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const R in O)this.optionsService.options[R]=O[R]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new i.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new i.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new i.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new i.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new i.EventEmitter),this._instantiationService=new o.InstantiationService,this.optionsService=this.register(new S.OptionsService(O)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(r.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(e.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new l.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,i.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,i.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,i.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,i.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new v.WriteBuffer((R,B)=>this._inputHandler.parse(R,B))),this.register((0,i.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,R){this._writeBuffer.write(O,R)}writeSync(O,R){this._logService.logLevel<=u.LogLevelEnum.WARN&&!d&&(this._logService.warn("writeSync is unreliable and will be removed soon."),d=!0),this._writeBuffer.writeSync(O,R)}resize(O,R){isNaN(O)||isNaN(R)||(O=Math.max(O,g.MINIMUM_COLS),R=Math.max(R,g.MINIMUM_ROWS),this._bufferService.resize(O,R))}scroll(O,R=!1){this._bufferService.scroll(O,R)}scrollLines(O,R,B){this._bufferService.scrollLines(O,R,B)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const R=O-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(O,R){return this._inputHandler.registerEscHandler(O,R)}registerDcsHandler(O,R){return this._inputHandler.registerDcsHandler(O,R)}registerCsiHandler(O,R){return this._inputHandler.registerCsiHandler(O,R)}registerOscHandler(O,R){return this._inputHandler.registerOscHandler(O,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?O=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(a.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,a.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const R of O)R.dispose()})}}}s.CoreTerminal=m},8460:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===n)return void this._listeners.splice(c,1)}}})),this._event}fire(n,c){const u=[];for(let o=0;o<this._listeners.length;o++)u.push(this._listeners[o]);for(let o=0;o<u.length;o++)u[o].call(void 0,n,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(n,c){return n(u=>c.fire(u))}},5435:function(w,s,n){var c=this&&this.__decorate||function(j,E,D,T){var P,W=arguments.length,q=W<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,D):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(j,E,D,T);else for(var G=j.length-1;G>=0;G--)(P=j[G])&&(q=(W<3?P(q):W>3?P(E,D,q):P(E,D))||q);return W>3&&q&&Object.defineProperty(E,D,q),q},u=this&&this.__param||function(j,E){return function(D,T){E(D,T,j)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const o=n(2584),_=n(7116),g=n(2015),S=n(844),f=n(482),i=n(8437),r=n(8460),t=n(643),e=n(511),a=n(3734),l=n(2585),v=n(6242),C=n(6351),d=n(5941),m={"(":0,")":1,"*":2,"+":3,"-":1,".":2},k=131072;function O(j,E){if(j>24)return E.setWinLines||!1;switch(j){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var R;(function(j){j[j.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",j[j.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(s.WindowsOptionsReportType=R={}));let B=0;class H extends S.Disposable{getAttrData(){return this._curAttrData}constructor(E,D,T,P,W,q,G,V,ee=new g.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=D,this._coreService=T,this._logService=P,this._optionsService=W,this._oscLinkService=q,this._coreMouseService=G,this._unicodeService=V,this._parser=ee,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new e.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=i.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=i.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new r.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new r.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new r.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new r.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new r.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new r.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new r.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new r.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new r.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new r.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new r.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new U(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._parser.setCsiHandlerFallback((x,M)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(x),params:M.toArray()})}),this._parser.setEscHandlerFallback(x=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(x)})}),this._parser.setExecuteHandlerFallback(x=>{this._logService.debug("Unknown EXECUTE code: ",{code:x})}),this._parser.setOscHandlerFallback((x,M,N)=>{this._logService.debug("Unknown OSC code: ",{identifier:x,action:M,data:N})}),this._parser.setDcsHandlerFallback((x,M,N)=>{M==="HOOK"&&(N=N.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(x),action:M,payload:N})}),this._parser.setPrintHandler((x,M,N)=>this.print(x,M,N)),this._parser.registerCsiHandler({final:"@"},x=>this.insertChars(x)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},x=>this.scrollLeft(x)),this._parser.registerCsiHandler({final:"A"},x=>this.cursorUp(x)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},x=>this.scrollRight(x)),this._parser.registerCsiHandler({final:"B"},x=>this.cursorDown(x)),this._parser.registerCsiHandler({final:"C"},x=>this.cursorForward(x)),this._parser.registerCsiHandler({final:"D"},x=>this.cursorBackward(x)),this._parser.registerCsiHandler({final:"E"},x=>this.cursorNextLine(x)),this._parser.registerCsiHandler({final:"F"},x=>this.cursorPrecedingLine(x)),this._parser.registerCsiHandler({final:"G"},x=>this.cursorCharAbsolute(x)),this._parser.registerCsiHandler({final:"H"},x=>this.cursorPosition(x)),this._parser.registerCsiHandler({final:"I"},x=>this.cursorForwardTab(x)),this._parser.registerCsiHandler({final:"J"},x=>this.eraseInDisplay(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},x=>this.eraseInDisplay(x,!0)),this._parser.registerCsiHandler({final:"K"},x=>this.eraseInLine(x,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},x=>this.eraseInLine(x,!0)),this._parser.registerCsiHandler({final:"L"},x=>this.insertLines(x)),this._parser.registerCsiHandler({final:"M"},x=>this.deleteLines(x)),this._parser.registerCsiHandler({final:"P"},x=>this.deleteChars(x)),this._parser.registerCsiHandler({final:"S"},x=>this.scrollUp(x)),this._parser.registerCsiHandler({final:"T"},x=>this.scrollDown(x)),this._parser.registerCsiHandler({final:"X"},x=>this.eraseChars(x)),this._parser.registerCsiHandler({final:"Z"},x=>this.cursorBackwardTab(x)),this._parser.registerCsiHandler({final:"`"},x=>this.charPosAbsolute(x)),this._parser.registerCsiHandler({final:"a"},x=>this.hPositionRelative(x)),this._parser.registerCsiHandler({final:"b"},x=>this.repeatPrecedingCharacter(x)),this._parser.registerCsiHandler({final:"c"},x=>this.sendDeviceAttributesPrimary(x)),this._parser.registerCsiHandler({prefix:">",final:"c"},x=>this.sendDeviceAttributesSecondary(x)),this._parser.registerCsiHandler({final:"d"},x=>this.linePosAbsolute(x)),this._parser.registerCsiHandler({final:"e"},x=>this.vPositionRelative(x)),this._parser.registerCsiHandler({final:"f"},x=>this.hVPosition(x)),this._parser.registerCsiHandler({final:"g"},x=>this.tabClear(x)),this._parser.registerCsiHandler({final:"h"},x=>this.setMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"h"},x=>this.setModePrivate(x)),this._parser.registerCsiHandler({final:"l"},x=>this.resetMode(x)),this._parser.registerCsiHandler({prefix:"?",final:"l"},x=>this.resetModePrivate(x)),this._parser.registerCsiHandler({final:"m"},x=>this.charAttributes(x)),this._parser.registerCsiHandler({final:"n"},x=>this.deviceStatus(x)),this._parser.registerCsiHandler({prefix:"?",final:"n"},x=>this.deviceStatusPrivate(x)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},x=>this.softReset(x)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},x=>this.setCursorStyle(x)),this._parser.registerCsiHandler({final:"r"},x=>this.setScrollRegion(x)),this._parser.registerCsiHandler({final:"s"},x=>this.saveCursor(x)),this._parser.registerCsiHandler({final:"t"},x=>this.windowOptions(x)),this._parser.registerCsiHandler({final:"u"},x=>this.restoreCursor(x)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},x=>this.insertColumns(x)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},x=>this.deleteColumns(x)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},x=>this.selectProtected(x)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},x=>this.requestMode(x,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},x=>this.requestMode(x,!1)),this._parser.setExecuteHandler(o.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(o.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(o.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(o.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(o.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(o.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(o.C1.IND,()=>this.index()),this._parser.setExecuteHandler(o.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(o.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new v.OscHandler(x=>(this.setTitle(x),this.setIconName(x),!0))),this._parser.registerOscHandler(1,new v.OscHandler(x=>this.setIconName(x))),this._parser.registerOscHandler(2,new v.OscHandler(x=>this.setTitle(x))),this._parser.registerOscHandler(4,new v.OscHandler(x=>this.setOrReportIndexedColor(x))),this._parser.registerOscHandler(8,new v.OscHandler(x=>this.setHyperlink(x))),this._parser.registerOscHandler(10,new v.OscHandler(x=>this.setOrReportFgColor(x))),this._parser.registerOscHandler(11,new v.OscHandler(x=>this.setOrReportBgColor(x))),this._parser.registerOscHandler(12,new v.OscHandler(x=>this.setOrReportCursorColor(x))),this._parser.registerOscHandler(104,new v.OscHandler(x=>this.restoreIndexedColor(x))),this._parser.registerOscHandler(110,new v.OscHandler(x=>this.restoreFgColor(x))),this._parser.registerOscHandler(111,new v.OscHandler(x=>this.restoreBgColor(x))),this._parser.registerOscHandler(112,new v.OscHandler(x=>this.restoreCursorColor(x))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const x in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:x},()=>this.selectCharset("("+x)),this._parser.registerEscHandler({intermediates:")",final:x},()=>this.selectCharset(")"+x)),this._parser.registerEscHandler({intermediates:"*",final:x},()=>this.selectCharset("*"+x)),this._parser.registerEscHandler({intermediates:"+",final:x},()=>this.selectCharset("+"+x)),this._parser.registerEscHandler({intermediates:"-",final:x},()=>this.selectCharset("-"+x)),this._parser.registerEscHandler({intermediates:".",final:x},()=>this.selectCharset("."+x)),this._parser.registerEscHandler({intermediates:"/",final:x},()=>this.selectCharset("/"+x));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(x=>(this._logService.error("Parsing error: ",x),x)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((x,M)=>this.requestStatusString(x,M)))}_preserveStack(E,D,T,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=T,this._parseStack.position=P}_logSlowResolvingAsync(E){this._logService.logLevel<=l.LogLevelEnum.WARN&&Promise.race([E,new Promise((D,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,D){let T,P=this._activeBuffer.x,W=this._activeBuffer.y,q=0;const G=this._parseStack.paused;if(G){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(T),T;P=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>k&&(q=this._parseStack.position+k)}if(this._logService.logLevel<=l.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,V=>String.fromCharCode(V)).join("")}"`),typeof E=="string"?E.split("").map(V=>V.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<k&&(this._parseBuffer=new Uint32Array(Math.min(E.length,k))),G||this._dirtyRowTracker.clearRange(),E.length>k)for(let V=q;V<E.length;V+=k){const ee=V+k<E.length?V+k:E.length,x=typeof E=="string"?this._stringDecoder.decode(E.substring(V,ee),this._parseBuffer):this._utf8Decoder.decode(E.subarray(V,ee),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,x))return this._preserveStack(P,W,x,V),this._logSlowResolvingAsync(T),T}else if(!G){const V=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,V))return this._preserveStack(P,W,V,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===P&&this._activeBuffer.y===W||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,D,T){let P,W;const q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,ee=this._coreService.decPrivateModes.wraparound,x=this._coreService.modes.insertMode,M=this._curAttrData;let N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-D>0&&N.getWidth(this._activeBuffer.x-1)===2&&N.setCellFromCodePoint(this._activeBuffer.x-1,0,1,M.fg,M.bg,M.extended);for(let F=D;F<T;++F){if(P=E[F],W=this._unicodeService.wcwidth(P),P<127&&q){const X=q[String.fromCharCode(P)];X&&(P=X.charCodeAt(0))}if(G&&this._onA11yChar.fire((0,f.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),W||!this._activeBuffer.x){if(this._activeBuffer.x+W-1>=V){if(ee){for(;this._activeBuffer.x<V;)N.setCellFromCodePoint(this._activeBuffer.x++,0,1,M.fg,M.bg,M.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,W===2)continue}if(x&&(N.insertCells(this._activeBuffer.x,W,this._activeBuffer.getNullCell(M),M),N.getWidth(V-1)===2&&N.setCellFromCodePoint(V-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,M.fg,M.bg,M.extended)),N.setCellFromCodePoint(this._activeBuffer.x++,P,W,M.fg,M.bg,M.extended),W>0)for(;--W;)N.setCellFromCodePoint(this._activeBuffer.x++,0,0,M.fg,M.bg,M.extended)}else N.getWidth(this._activeBuffer.x-1)?N.addCodepointToCell(this._activeBuffer.x-1,P):N.addCodepointToCell(this._activeBuffer.x-2,P)}T-D>0&&(N.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&T-D>0&&N.getWidth(this._activeBuffer.x)===0&&!N.hasContent(this._activeBuffer.x)&&N.setCellFromCodePoint(this._activeBuffer.x,0,1,M.fg,M.bg,M.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,D){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,D):this._parser.registerCsiHandler(E,T=>!O(T.params[0],this._optionsService.rawOptions.windowOptions)||D(T))}registerDcsHandler(E,D){return this._parser.registerDcsHandler(E,new C.DcsHandler(D))}registerEscHandler(E,D){return this._parser.registerEscHandler(E,D)}registerOscHandler(E,D){return this._parser.registerOscHandler(E,new v.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=E,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+D)}cursorUp(E){const D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const D=E.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=E.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=E.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const D=E.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,D,T,P=!1,W=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);q.replaceCells(D,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),W),P&&(q.isWrapped=!1)}_resetBufferLine(E,D=!1){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),T.isWrapped=!1)}eraseInDisplay(E,D=!1){let T;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);T<this._bufferService.rows;T++)this._resetBufferLine(T,D);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,D);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(E,D=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let D=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;D--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let D=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;D--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let D=E.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let D=E.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(i.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;const D=E.params[0]||1,T=new Uint32Array(D);for(let P=0;P<D;++P)T[P]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,D){const T=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:W}=this._coreMouseService,q=this._coreService,{buffers:G,cols:V}=this._bufferService,{active:ee,alt:x}=G,M=this._optionsService.rawOptions,N=Q=>Q?1:2,F=E.params[0];return X=F,K=D?F===2?4:F===4?N(q.modes.insertMode):F===12?3:F===20?N(M.convertEol):0:F===1?N(T.applicationCursorKeys):F===3?M.windowOptions.setWinLines?V===80?2:V===132?1:0:0:F===6?N(T.origin):F===7?N(T.wraparound):F===8?3:F===9?N(P==="X10"):F===12?N(M.cursorBlink):F===25?N(!q.isCursorHidden):F===45?N(T.reverseWraparound):F===66?N(T.applicationKeypad):F===67?4:F===1e3?N(P==="VT200"):F===1002?N(P==="DRAG"):F===1003?N(P==="ANY"):F===1004?N(T.sendFocus):F===1005?4:F===1006?N(W==="SGR"):F===1015?4:F===1016?N(W==="SGR_PIXELS"):F===1048?1:F===47||F===1047||F===1049?N(ee===x):F===2004?N(T.bracketedPasteMode):0,q.triggerDataEvent(`${o.C0.ESC}[${D?"":"?"}${X};${K}$y`),!0;var X,K}_updateAttrColor(E,D,T,P,W){return D===2?(E|=50331648,E&=-16777216,E|=a.AttributeData.fromColorRGB([T,P,W])):D===5&&(E&=-50331904,E|=33554432|255&T),E}_extractColor(E,D,T){const P=[0,0,-1,0,0,0];let W=0,q=0;do{if(P[q+W]=E.params[D+q],E.hasSubParams(D+q)){const G=E.getSubParams(D+q);let V=0;do P[1]===5&&(W=1),P[q+V+1+W]=G[V];while(++V<G.length&&V+q+1+W<P.length);break}if(P[1]===5&&q+W>=2||P[1]===2&&q+W>=5)break;P[1]&&(W=1)}while(++q+D<E.length&&q+W<P.length);for(let G=2;G<P.length;++G)P[G]===-1&&(P[G]=0);switch(P[0]){case 38:T.fg=this._updateAttrColor(T.fg,P[1],P[3],P[4],P[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,P[1],P[3],P[4],P[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,P[1],P[3],P[4],P[5])}return q}_processUnderline(E,D){D.extended=D.extended.clone(),(!~E||E>5)&&(E=1),D.extended.underlineStyle=E,D.fg|=268435456,E===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(E){E.fg=i.DEFAULT_ATTR_DATA.fg,E.bg=i.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const D=E.length;let T;const P=this._curAttrData;for(let W=0;W<D;W++)T=E.params[W],T>=30&&T<=37?(P.fg&=-50331904,P.fg|=16777216|T-30):T>=40&&T<=47?(P.bg&=-50331904,P.bg|=16777216|T-40):T>=90&&T<=97?(P.fg&=-50331904,P.fg|=16777224|T-90):T>=100&&T<=107?(P.bg&=-50331904,P.bg|=16777224|T-100):T===0?this._processSGR0(P):T===1?P.fg|=134217728:T===3?P.bg|=67108864:T===4?(P.fg|=268435456,this._processUnderline(E.hasSubParams(W)?E.getSubParams(W)[0]:1,P)):T===5?P.fg|=536870912:T===7?P.fg|=67108864:T===8?P.fg|=1073741824:T===9?P.fg|=2147483648:T===2?P.bg|=134217728:T===21?this._processUnderline(2,P):T===22?(P.fg&=-134217729,P.bg&=-134217729):T===23?P.bg&=-67108865:T===24?(P.fg&=-268435457,this._processUnderline(0,P)):T===25?P.fg&=-536870913:T===27?P.fg&=-67108865:T===28?P.fg&=-1073741825:T===29?P.fg&=2147483647:T===39?(P.fg&=-67108864,P.fg|=16777215&i.DEFAULT_ATTR_DATA.fg):T===49?(P.bg&=-67108864,P.bg|=16777215&i.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?W+=this._extractColor(E,W,P):T===53?P.bg|=1073741824:T===55?P.bg&=-1073741825:T===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):T===100?(P.fg&=-67108864,P.fg|=16777215&i.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&i.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${o.C0.ESC}[0n`);break;case 6:const D=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[${D};${T}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const D=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[?${D};${T}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=i.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const D=E.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const T=D%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(E){const D=E.params[0]||1;let T;return(E.length<2||(T=E.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(E){if(!O(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const D=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${o.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const D=[],T=E.split(";");for(;T.length>1;){const P=T.shift(),W=T.shift();if(/^\d+$/.exec(P)){const q=parseInt(P);if($(q))if(W==="?")D.push({type:0,index:q});else{const G=(0,d.parseColor)(W);G&&D.push({type:1,index:q,color:G})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(E){const D=E.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(E,D){this._getCurrentLinkId()&&this._finishHyperlink();const T=E.split(":");let P;const W=T.findIndex(q=>q.startsWith("id="));return W!==-1&&(P=T[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,D){const T=E.split(";");for(let P=0;P<T.length&&!(D>=this._specialColors.length);++P,++D)if(T[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{const W=(0,d.parseColor)(T[P]);W&&this._onColor.fire([{type:1,index:this._specialColors[D],color:W}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const D=[],T=E.split(";");for(let P=0;P<T.length;++P)if(/^\d+$/.exec(T[P])){const W=parseInt(T[P]);$(W)&&D.push({type:2,index:W})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(m[E[0]],_.CHARSETS[E[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=i.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=i.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new e.CellData;E.content=4194304|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){const T=this._activeBuffer.ybase+this._activeBuffer.y+D,P=this._activeBuffer.lines.get(T);P&&(P.fill(E),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,D){const T=this._bufferService.buffer,P=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${o.C0.ESC}${W}${o.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,D){this._dirtyRowTracker.markRangeDirty(E,D)}}s.InputHandler=H;let U=class{constructor(j){this._bufferService=j,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(j){j<this.start?this.start=j:j>this.end&&(this.end=j)}markRangeDirty(j,E){j>E&&(B=j,j=E,E=B),j<this.start&&(this.start=j),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(j){return 0<=j&&j<256}U=c([u(0,l.IBufferService)],U)},844:(w,s)=>{function n(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var u;this._isDisposed||c===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},s.toDisposable=function(c){return{dispose:c}},s.disposeArray=n,s.getDisposeArrayDisposable=function(c){return{dispose:()=>n(c)}}},1505:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(u,o,_){this._data[u]||(this._data[u]={}),this._data[u][o]=_}get(u,o){return this._data[u]?this._data[u][o]:void 0}clear(){this._data={}}}s.TwoKeyMap=n,s.FourKeyMap=class{constructor(){this._data=new n}set(c,u,o,_,g){this._data.get(c,u)||this._data.set(c,u,new n),this._data.get(c,u).set(o,_,g)}get(c,u,o,_){var g;return(g=this._data.get(c,u))===null||g===void 0?void 0:g.get(o,_)}clear(){this._data.clear()}}},6114:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const n=s.isNode?"node":navigator.userAgent,c=s.isNode?"node":navigator.platform;s.isFirefox=n.includes("Firefox"),s.isLegacyEdge=n.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(n),s.getSafariVersion=function(){if(!s.isSafari)return 0;const u=n.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),s.isIpad=c==="iPad",s.isIphone=c==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),s.isLinux=c.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(n)},6106:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let n=0;s.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(n=this._search(this._getKey(c)),this._array.splice(n,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(n=this._search(u),n===-1)||this._getKey(this._array[n])!==u)return!1;do if(this._array[n]===c)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(n=this._search(c),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===c))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===c)}forEachByKey(c,u){if(this._array.length!==0&&(n=this._search(c),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===c))do u(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===c)}values(){return[...this._array].values()}_search(c){let u=0,o=this._array.length-1;for(;o>=u;){let _=u+o>>1;const g=this._getKey(this._array[_]);if(g>c)o=_-1;else{if(!(g<c)){for(;_>0&&this._getKey(this._array[_-1])===c;)_--;return _}u=_+1}}return u}}},7226:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const c=n(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let S=0,f=0,i=g.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),f=Math.max(S,f),r=g.timeRemaining(),1.5*f>r)return i-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(i-S))}ms`),void this._start();i=r}this.clear()}}class o extends u{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){const S=Date.now()+g;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}s.PriorityTaskQueue=o,s.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:o,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const c=n(643);s.updateWindowsModeWrappedState=function(u){const o=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),_=o==null?void 0:o.get(u.cols-1),g=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);g&&_&&(g.isWrapped=_[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&_[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){const o=new n;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=n;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}constructor(o=0,_=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=_}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=c},9092:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const c=n(6349),u=n(7226),o=n(3734),_=n(8437),g=n(4634),S=n(511),f=n(643),i=n(4863),r=n(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(t,e,a){this._hasScrollback=t,this._optionsService=e,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,e){return new _.BufferLine(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const e=t+this._optionsService.rawOptions.scrollback;return e>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=_.DEFAULT_ATTR_DATA);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){const a=this.getNullCell(_.DEFAULT_ATTR_DATA);let l=0;const v=this._getCorrectBufferLength(e);if(v>this.lines.maxLength&&(this.lines.maxLength=v),this.lines.length>0){if(this._cols<t)for(let d=0;d<this.lines.length;d++)l+=+this.lines.get(d).resize(t,a);let C=0;if(this._rows<e)for(let d=this._rows;d<e;d++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(t,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(t,a)));else for(let d=this._rows;d>e;d--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(v<this.lines.maxLength){const d=this.lines.length-v;d>0&&(this.lines.trimStart(d),this.ybase=Math.max(this.ybase-d,0),this.ydisp=Math.max(this.ydisp-d,0),this.savedY=Math.max(this.savedY-d,0)),this.lines.maxLength=v}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let C=0;C<this.lines.length;C++)l+=+this.lines.get(C).resize(t,a);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),l>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){const a=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(a.length>0){const l=(0,g.reflowLargerCreateNewLayout)(this.lines,a);(0,g.reflowLargerApplyNewLayout)(this.lines,l.layout),this._reflowLargerAdjustViewport(t,e,l.countRemoved)}}_reflowLargerAdjustViewport(t,e,a){const l=this.getNullCell(_.DEFAULT_ATTR_DATA);let v=a;for(;v-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new _.BufferLine(t,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)}_reflowSmaller(t,e){const a=this.getNullCell(_.DEFAULT_ATTR_DATA),l=[];let v=0;for(let C=this.lines.length-1;C>=0;C--){let d=this.lines.get(C);if(!d||!d.isWrapped&&d.getTrimmedLength()<=t)continue;const m=[d];for(;d.isWrapped&&C>0;)d=this.lines.get(--C),m.unshift(d);const k=this.ybase+this.y;if(k>=C&&k<C+m.length)continue;const O=m[m.length-1].getTrimmedLength(),R=(0,g.reflowSmallerGetNewLineLengths)(m,this._cols,t),B=R.length-m.length;let H;H=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const U=[];for(let P=0;P<B;P++){const W=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);U.push(W)}U.length>0&&(l.push({start:C+m.length+v,newLines:U}),v+=U.length),m.push(...U);let $=R.length-1,j=R[$];j===0&&($--,j=R[$]);let E=m.length-B-1,D=O;for(;E>=0;){const P=Math.min(D,j);if(m[$]===void 0)break;if(m[$].copyCellsFrom(m[E],D-P,j-P,P,!0),j-=P,j===0&&($--,j=R[$]),D-=P,D===0){E--;const W=Math.max(E,0);D=(0,g.getWrappedLineTrimmedLength)(m,W,this._cols)}}for(let P=0;P<m.length;P++)R[P]<t&&m[P].setCell(R[P],a);let T=B-H;for(;T-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+e-1)}if(l.length>0){const C=[],d=[];for(let $=0;$<this.lines.length;$++)d.push(this.lines.get($));const m=this.lines.length;let k=m-1,O=0,R=l[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);let B=0;for(let $=Math.min(this.lines.maxLength-1,m+v-1);$>=0;$--)if(R&&R.start>k+B){for(let j=R.newLines.length-1;j>=0;j--)this.lines.set($--,R.newLines[j]);$++,C.push({index:k+1,amount:R.newLines.length}),B+=R.newLines.length,R=l[++O]}else this.lines.set($,d[k--]);let H=0;for(let $=C.length-1;$>=0;$--)C[$].index+=H,this.lines.onInsertEmitter.fire(C[$]),H+=C[$].amount;const U=Math.max(0,m+v-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(t,e,a=0,l){const v=this.lines.get(t);return v?v.translateToString(e,a,l):""}getWrappedRangeForLine(t){let e=t,a=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:e,last:a}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const e=new i.Marker(t);return this.markers.push(e),e.register(this.lines.onTrim(a=>{e.line-=a,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(a=>{e.line>=a.index&&(e.line+=a.amount)})),e.register(this.lines.onDelete(a=>{e.line>=a.index&&e.line<a.index+a.amount&&e.dispose(),e.line>a.index&&(e.line-=a.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const c=n(3734),u=n(511),o=n(643),_=n(482);s.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let g=0;class S{constructor(i,r,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*i);const e=r||u.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let a=0;a<i;++a)this.setCell(a,e);this.length=i}get(i){const r=this._data[3*i+0],t=2097151&r;return[this._data[3*i+1],2097152&r?this._combined[i]:t?(0,_.stringFromCodePoint)(t):"",r>>22,2097152&r?this._combined[i].charCodeAt(this._combined[i].length-1):t]}set(i,r){this._data[3*i+1]=r[o.CHAR_DATA_ATTR_INDEX],r[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[i]=r[1],this._data[3*i+0]=2097152|i|r[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*i+0]=r[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(i){return this._data[3*i+0]>>22}hasWidth(i){return 12582912&this._data[3*i+0]}getFg(i){return this._data[3*i+1]}getBg(i){return this._data[3*i+2]}hasContent(i){return 4194303&this._data[3*i+0]}getCodePoint(i){const r=this._data[3*i+0];return 2097152&r?this._combined[i].charCodeAt(this._combined[i].length-1):2097151&r}isCombined(i){return 2097152&this._data[3*i+0]}getString(i){const r=this._data[3*i+0];return 2097152&r?this._combined[i]:2097151&r?(0,_.stringFromCodePoint)(2097151&r):""}isProtected(i){return 536870912&this._data[3*i+2]}loadCell(i,r){return g=3*i,r.content=this._data[g+0],r.fg=this._data[g+1],r.bg=this._data[g+2],2097152&r.content&&(r.combinedData=this._combined[i]),268435456&r.bg&&(r.extended=this._extendedAttrs[i]),r}setCell(i,r){2097152&r.content&&(this._combined[i]=r.combinedData),268435456&r.bg&&(this._extendedAttrs[i]=r.extended),this._data[3*i+0]=r.content,this._data[3*i+1]=r.fg,this._data[3*i+2]=r.bg}setCellFromCodePoint(i,r,t,e,a,l){268435456&a&&(this._extendedAttrs[i]=l),this._data[3*i+0]=r|t<<22,this._data[3*i+1]=e,this._data[3*i+2]=a}addCodepointToCell(i,r){let t=this._data[3*i+0];2097152&t?this._combined[i]+=(0,_.stringFromCodePoint)(r):(2097151&t?(this._combined[i]=(0,_.stringFromCodePoint)(2097151&t)+(0,_.stringFromCodePoint)(r),t&=-2097152,t|=2097152):t=r|4194304,this._data[3*i+0]=t)}insertCells(i,r,t,e){if((i%=this.length)&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs),r<this.length-i){const a=new u.CellData;for(let l=this.length-i-r-1;l>=0;--l)this.setCell(i+r+l,this.loadCell(i+l,a));for(let l=0;l<r;++l)this.setCell(i+l,t)}else for(let a=i;a<this.length;++a)this.setCell(a,t);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs)}deleteCells(i,r,t,e){if(i%=this.length,r<this.length-i){const a=new u.CellData;for(let l=0;l<this.length-i-r;++l)this.setCell(i+l,this.loadCell(i+r+l,a));for(let l=this.length-r;l<this.length;++l)this.setCell(l,t)}else for(let a=i;a<this.length;++a)this.setCell(a,t);i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs),this.getWidth(i)!==0||this.hasContent(i)||this.setCellFromCodePoint(i,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs)}replaceCells(i,r,t,e,a=!1){if(a)for(i&&this.getWidth(i-1)===2&&!this.isProtected(i-1)&&this.setCellFromCodePoint(i-1,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodePoint(r,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs);i<r&&i<this.length;)this.isProtected(i)||this.setCell(i,t),i++;else for(i&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i-1,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(e==null?void 0:e.fg)||0,(e==null?void 0:e.bg)||0,(e==null?void 0:e.extended)||new c.ExtendedAttrs);i<r&&i<this.length;)this.setCell(i++,t)}resize(i,r){if(i===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*i;if(i>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const e=new Uint32Array(t);e.set(this._data),this._data=e}for(let e=this.length;e<i;++e)this.setCell(e,r)}else{this._data=this._data.subarray(0,t);const e=Object.keys(this._combined);for(let l=0;l<e.length;l++){const v=parseInt(e[l],10);v>=i&&delete this._combined[v]}const a=Object.keys(this._extendedAttrs);for(let l=0;l<a.length;l++){const v=parseInt(a[l],10);v>=i&&delete this._extendedAttrs[v]}}return this.length=i,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const i=new Uint32Array(this._data.length);return i.set(this._data),this._data=i,1}return 0}fill(i,r=!1){if(r)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,i);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,i)}}copyFrom(i){this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={};for(const r in i._combined)this._combined[r]=i._combined[r];this._extendedAttrs={};for(const r in i._extendedAttrs)this._extendedAttrs[r]=i._extendedAttrs[r];this.isWrapped=i.isWrapped}clone(){const i=new S(0);i._data=new Uint32Array(this._data),i.length=this.length;for(const r in this._combined)i._combined[r]=this._combined[r];for(const r in this._extendedAttrs)i._extendedAttrs[r]=this._extendedAttrs[r];return i.isWrapped=this.isWrapped,i}getTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(4194303&this._data[3*i+0])return i+(this._data[3*i+0]>>22);return 0}getNoBgTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(4194303&this._data[3*i+0]||50331648&this._data[3*i+2])return i+(this._data[3*i+0]>>22);return 0}copyCellsFrom(i,r,t,e,a){const l=i._data;if(a)for(let C=e-1;C>=0;C--){for(let d=0;d<3;d++)this._data[3*(t+C)+d]=l[3*(r+C)+d];268435456&l[3*(r+C)+2]&&(this._extendedAttrs[t+C]=i._extendedAttrs[r+C])}else for(let C=0;C<e;C++){for(let d=0;d<3;d++)this._data[3*(t+C)+d]=l[3*(r+C)+d];268435456&l[3*(r+C)+2]&&(this._extendedAttrs[t+C]=i._extendedAttrs[r+C])}const v=Object.keys(i._combined);for(let C=0;C<v.length;C++){const d=parseInt(v[C],10);d>=r&&(this._combined[d-r+t]=i._combined[d])}}translateToString(i=!1,r=0,t=this.length){i&&(t=Math.min(t,this.getTrimmedLength()));let e="";for(;r<t;){const a=this._data[3*r+0],l=2097151&a;e+=2097152&a?this._combined[r]:l?(0,_.stringFromCodePoint)(l):o.WHITESPACE_CELL_CHAR,r+=a>>22||1}return e}}s.BufferLine=S},4841:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(n,c){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return c*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(w,s)=>{function n(c,u,o){if(u===c.length-1)return c[u].getTrimmedLength();const _=!c[u].hasContent(o-1)&&c[u].getWidth(o-1)===1,g=c[u+1].getWidth(0)===2;return _&&g?o-1:o}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(c,u,o,_,g){const S=[];for(let f=0;f<c.length-1;f++){let i=f,r=c.get(++i);if(!r.isWrapped)continue;const t=[c.get(f)];for(;i<c.length&&r.isWrapped;)t.push(r),r=c.get(++i);if(_>=f&&_<i){f+=t.length-1;continue}let e=0,a=n(t,e,u),l=1,v=0;for(;l<t.length;){const d=n(t,l,u),m=d-v,k=o-a,O=Math.min(m,k);t[e].copyCellsFrom(t[l],v,a,O,!1),a+=O,a===o&&(e++,a=0),v+=O,v===d&&(l++,v=0),a===0&&e!==0&&t[e-1].getWidth(o-1)===2&&(t[e].copyCellsFrom(t[e-1],o-1,a++,1,!1),t[e-1].setCell(o-1,g))}t[e].replaceCells(a,o,g);let C=0;for(let d=t.length-1;d>0&&(d>e||t[d].getTrimmedLength()===0);d--)C++;C>0&&(S.push(f+t.length-C),S.push(C)),f+=t.length-1}return S},s.reflowLargerCreateNewLayout=function(c,u){const o=[];let _=0,g=u[_],S=0;for(let f=0;f<c.length;f++)if(g===f){const i=u[++_];c.onDeleteEmitter.fire({index:f-S,amount:i}),f+=i-1,S+=i,g=u[++_]}else o.push(f);return{layout:o,countRemoved:S}},s.reflowLargerApplyNewLayout=function(c,u){const o=[];for(let _=0;_<u.length;_++)o.push(c.get(u[_]));for(let _=0;_<o.length;_++)c.set(_,o[_]);c.length=u.length},s.reflowSmallerGetNewLineLengths=function(c,u,o){const _=[],g=c.map((r,t)=>n(c,t,u)).reduce((r,t)=>r+t);let S=0,f=0,i=0;for(;i<g;){if(g-i<o){_.push(g-i);break}S+=o;const r=n(c,f,u);S>r&&(S-=r,f++);const t=c[f].getWidth(S-1)===2;t&&S--;const e=t?o-1:o;_.push(e),i+=e}return _},s.getWrappedLineTrimmedLength=n},5295:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const c=n(8460),u=n(844),o=n(9092);class _ extends u.Disposable{constructor(S,f){super(),this._optionsService=S,this._bufferService=f,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,f){this._normal.resize(S,f),this._alt.resize(S,f),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}s.BufferSet=_},511:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const c=n(482),u=n(643),o=n(3734);class _ extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const f=new _;return f.setFromCharData(S),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(S[u.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(S[u.CHAR_DATA_CHAR_INDEX].length===2){const i=S[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=S[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|S[u.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=S[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[u.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=S[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=_},643:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const c=n(8460),u=n(844);class o{get id(){return this._id}constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=o._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}s.Marker=o,o._nextId=1},7116:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(w,s)=>{var n,c,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL="\x7F"}(n||(s.C0=n={})),function(o){o.PAD="\x80",o.HOP="\x81",o.BPH="\x82",o.NBH="\x83",o.IND="\x84",o.NEL="\x85",o.SSA="\x86",o.ESA="\x87",o.HTS="\x88",o.HTJ="\x89",o.VTS="\x8A",o.PLD="\x8B",o.PLU="\x8C",o.RI="\x8D",o.SS2="\x8E",o.SS3="\x8F",o.DCS="\x90",o.PU1="\x91",o.PU2="\x92",o.STS="\x93",o.CCH="\x94",o.MW="\x95",o.SPA="\x96",o.EPA="\x97",o.SOS="\x98",o.SGCI="\x99",o.SCI="\x9A",o.CSI="\x9B",o.ST="\x9C",o.OSC="\x9D",o.PM="\x9E",o.APC="\x9F"}(c||(s.C1=c={})),function(o){o.ST=`${n.ESC}\\`}(u||(s.C1_ESCAPED=u={}))},7399:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const c=n(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(o,_,g,S){const f={type:0,cancel:!1,key:void 0},i=(o.shiftKey?1:0)|(o.altKey?2:0)|(o.ctrlKey?4:0)|(o.metaKey?8:0);switch(o.keyCode){case 0:o.key==="UIKeyInputUpArrow"?f.key=_?c.C0.ESC+"OA":c.C0.ESC+"[A":o.key==="UIKeyInputLeftArrow"?f.key=_?c.C0.ESC+"OD":c.C0.ESC+"[D":o.key==="UIKeyInputRightArrow"?f.key=_?c.C0.ESC+"OC":c.C0.ESC+"[C":o.key==="UIKeyInputDownArrow"&&(f.key=_?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(o.altKey){f.key=c.C0.ESC+c.C0.DEL;break}f.key=c.C0.DEL;break;case 9:if(o.shiftKey){f.key=c.C0.ESC+"[Z";break}f.key=c.C0.HT,f.cancel=!0;break;case 13:f.key=o.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,f.cancel=!0;break;case 27:f.key=c.C0.ESC,o.altKey&&(f.key=c.C0.ESC+c.C0.ESC),f.cancel=!0;break;case 37:if(o.metaKey)break;i?(f.key=c.C0.ESC+"[1;"+(i+1)+"D",f.key===c.C0.ESC+"[1;3D"&&(f.key=c.C0.ESC+(g?"b":"[1;5D"))):f.key=_?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(o.metaKey)break;i?(f.key=c.C0.ESC+"[1;"+(i+1)+"C",f.key===c.C0.ESC+"[1;3C"&&(f.key=c.C0.ESC+(g?"f":"[1;5C"))):f.key=_?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(o.metaKey)break;i?(f.key=c.C0.ESC+"[1;"+(i+1)+"A",g||f.key!==c.C0.ESC+"[1;3A"||(f.key=c.C0.ESC+"[1;5A")):f.key=_?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(o.metaKey)break;i?(f.key=c.C0.ESC+"[1;"+(i+1)+"B",g||f.key!==c.C0.ESC+"[1;3B"||(f.key=c.C0.ESC+"[1;5B")):f.key=_?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:o.shiftKey||o.ctrlKey||(f.key=c.C0.ESC+"[2~");break;case 46:f.key=i?c.C0.ESC+"[3;"+(i+1)+"~":c.C0.ESC+"[3~";break;case 36:f.key=i?c.C0.ESC+"[1;"+(i+1)+"H":_?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:f.key=i?c.C0.ESC+"[1;"+(i+1)+"F":_?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:o.shiftKey?f.type=2:o.ctrlKey?f.key=c.C0.ESC+"[5;"+(i+1)+"~":f.key=c.C0.ESC+"[5~";break;case 34:o.shiftKey?f.type=3:o.ctrlKey?f.key=c.C0.ESC+"[6;"+(i+1)+"~":f.key=c.C0.ESC+"[6~";break;case 112:f.key=i?c.C0.ESC+"[1;"+(i+1)+"P":c.C0.ESC+"OP";break;case 113:f.key=i?c.C0.ESC+"[1;"+(i+1)+"Q":c.C0.ESC+"OQ";break;case 114:f.key=i?c.C0.ESC+"[1;"+(i+1)+"R":c.C0.ESC+"OR";break;case 115:f.key=i?c.C0.ESC+"[1;"+(i+1)+"S":c.C0.ESC+"OS";break;case 116:f.key=i?c.C0.ESC+"[15;"+(i+1)+"~":c.C0.ESC+"[15~";break;case 117:f.key=i?c.C0.ESC+"[17;"+(i+1)+"~":c.C0.ESC+"[17~";break;case 118:f.key=i?c.C0.ESC+"[18;"+(i+1)+"~":c.C0.ESC+"[18~";break;case 119:f.key=i?c.C0.ESC+"[19;"+(i+1)+"~":c.C0.ESC+"[19~";break;case 120:f.key=i?c.C0.ESC+"[20;"+(i+1)+"~":c.C0.ESC+"[20~";break;case 121:f.key=i?c.C0.ESC+"[21;"+(i+1)+"~":c.C0.ESC+"[21~";break;case 122:f.key=i?c.C0.ESC+"[23;"+(i+1)+"~":c.C0.ESC+"[23~";break;case 123:f.key=i?c.C0.ESC+"[24;"+(i+1)+"~":c.C0.ESC+"[24~";break;default:if(!o.ctrlKey||o.shiftKey||o.altKey||o.metaKey)if(g&&!S||!o.altKey||o.metaKey)!g||o.altKey||o.ctrlKey||o.shiftKey||!o.metaKey?o.key&&!o.ctrlKey&&!o.altKey&&!o.metaKey&&o.keyCode>=48&&o.key.length===1?f.key=o.key:o.key&&o.ctrlKey&&(o.key==="_"&&(f.key=c.C0.US),o.key==="@"&&(f.key=c.C0.NUL)):o.keyCode===65&&(f.type=1);else{const r=u[o.keyCode],t=r==null?void 0:r[o.shiftKey?1:0];if(t)f.key=c.C0.ESC+t;else if(o.keyCode>=65&&o.keyCode<=90){const e=o.ctrlKey?o.keyCode-64:o.keyCode+32;let a=String.fromCharCode(e);o.shiftKey&&(a=a.toUpperCase()),f.key=c.C0.ESC+a}else if(o.keyCode===32)f.key=c.C0.ESC+(o.ctrlKey?c.C0.NUL:" ");else if(o.key==="Dead"&&o.code.startsWith("Key")){let e=o.code.slice(3,4);o.shiftKey||(e=e.toLowerCase()),f.key=c.C0.ESC+e,f.cancel=!0}}else o.keyCode>=65&&o.keyCode<=90?f.key=String.fromCharCode(o.keyCode-64):o.keyCode===32?f.key=c.C0.NUL:o.keyCode>=51&&o.keyCode<=55?f.key=String.fromCharCode(o.keyCode-51+27):o.keyCode===56?f.key=c.C0.DEL:o.keyCode===219?f.key=c.C0.ESC:o.keyCode===220?f.key=c.C0.FS:o.keyCode===221&&(f.key=c.C0.GS)}return f}},482:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},s.utf32ToString=function(n,c=0,u=n.length){let o="";for(let _=c;_<u;++_){let g=n[_];g>65535?(g-=65536,o+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):o+=String.fromCharCode(g)}return o},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,c){const u=n.length;if(!u)return 0;let o=0,_=0;if(this._interim){const g=n.charCodeAt(_++);56320<=g&&g<=57343?c[o++]=1024*(this._interim-55296)+g-56320+65536:(c[o++]=this._interim,c[o++]=g),this._interim=0}for(let g=_;g<u;++g){const S=n.charCodeAt(g);if(55296<=S&&S<=56319){if(++g>=u)return this._interim=S,o;const f=n.charCodeAt(g);56320<=f&&f<=57343?c[o++]=1024*(S-55296)+f-56320+65536:(c[o++]=S,c[o++]=f)}else S!==65279&&(c[o++]=S)}return o}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,c){const u=n.length;if(!u)return 0;let o,_,g,S,f=0,i=0,r=0;if(this.interim[0]){let a=!1,l=this.interim[0];l&=(224&l)==192?31:(240&l)==224?15:7;let v,C=0;for(;(v=63&this.interim[++C])&&C<4;)l<<=6,l|=v;const d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,m=d-C;for(;r<m;){if(r>=u)return 0;if(v=n[r++],(192&v)!=128){r--,a=!0;break}this.interim[C++]=v,l<<=6,l|=63&v}a||(d===2?l<128?r--:c[f++]=l:d===3?l<2048||l>=55296&&l<=57343||l===65279||(c[f++]=l):l<65536||l>1114111||(c[f++]=l)),this.interim.fill(0)}const t=u-4;let e=r;for(;e<u;){for(;!(!(e<t)||128&(o=n[e])||128&(_=n[e+1])||128&(g=n[e+2])||128&(S=n[e+3]));)c[f++]=o,c[f++]=_,c[f++]=g,c[f++]=S,e+=4;if(o=n[e++],o<128)c[f++]=o;else if((224&o)==192){if(e>=u)return this.interim[0]=o,f;if(_=n[e++],(192&_)!=128){e--;continue}if(i=(31&o)<<6|63&_,i<128){e--;continue}c[f++]=i}else if((240&o)==224){if(e>=u)return this.interim[0]=o,f;if(_=n[e++],(192&_)!=128){e--;continue}if(e>=u)return this.interim[0]=o,this.interim[1]=_,f;if(g=n[e++],(192&g)!=128){e--;continue}if(i=(15&o)<<12|(63&_)<<6|63&g,i<2048||i>=55296&&i<=57343||i===65279)continue;c[f++]=i}else if((248&o)==240){if(e>=u)return this.interim[0]=o,f;if(_=n[e++],(192&_)!=128){e--;continue}if(e>=u)return this.interim[0]=o,this.interim[1]=_,f;if(g=n[e++],(192&g)!=128){e--;continue}if(e>=u)return this.interim[0]=o,this.interim[1]=_,this.interim[2]=g,f;if(S=n[e++],(192&S)!=128){e--;continue}if(i=(7&o)<<18|(63&_)<<12|(63&g)<<6|63&S,i<65536||i>1114111)continue;c[f++]=i}}return f}}},225:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let u;s.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let o=0;o<n.length;++o)u.fill(0,n[o][0],n[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?u[o]:function(_,g){let S,f=0,i=g.length-1;if(_<g[0][0]||_>g[i][1])return!1;for(;i>=f;)if(S=f+i>>1,_>g[S][1])f=S+1;else{if(!(_<g[S][0]))return!0;i=S-1}return!1}(o,c)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1}}},5981:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const c=n(8460),u=n(844);class o extends u.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);const i=this._callbacks.shift();i&&i()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(S)}_innerWrite(g=0,S=!0){const f=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const i=this._writeBuffer[this._bufferOffset],r=this._action(i,S);if(r){const e=a=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,a)):this._innerWrite(f,a);return void r.catch(a=>(queueMicrotask(()=>{throw a}),Promise.resolve(!1))).then(e)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=i.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=o},5941:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(o,_){const g=o.toString(16),S=g.length<2?"0"+g:g;switch(_){case 4:return g[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}s.parseColor=function(o){if(!o)return;let _=o.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const g=n.exec(_);if(g){const S=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/S*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/S*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/S*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),c.exec(_)&&[3,6,9,12].includes(_.length))){const g=_.length/3,S=[0,0,0];for(let f=0;f<3;++f){const i=parseInt(_.slice(g*f,g*f+g),16);S[f]=g===1?i<<4:g===2?i:g===3?i>>4:i>>8}return S}},s.toRgbString=function(o,_=16){const[g,S,f]=o;return`rgb:${u(g,_)}/${u(S,_)}/${u(f,_)}`}},5770:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const c=n(482),u=n(8742),o=n(5770),_=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(S,f){this._handlers[S]===void 0&&(this._handlers[S]=[]);const i=this._handlers[S];return i.push(f),{dispose:()=>{const r=i.indexOf(f);r!==-1&&i.splice(r,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(S,f){if(this.reset(),this._ident=S,this._active=this._handlers[S]||_,this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(S,f,i){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(S,f,i);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(S,f,i))}unhook(S,f=!0){if(this._active.length){let i=!1,r=this._active.length-1,t=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,i=f,t=this._stack.fallThrough,this._stack.paused=!1),!t&&i===!1){for(;r>=0&&(i=this._active[r].unhook(S),i!==!0);r--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,i;r--}for(;r>=0;r--)if(i=this._active[r].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",S);this._active=_,this._ident=0}};const g=new u.Params;g.addParam(0),s.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=g,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():g,this._data="",this._hitLimit=!1}put(S,f,i){this._hitLimit||(this._data+=(0,c.utf32ToString)(S,f,i),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let f=!1;if(this._hitLimit)f=!1;else if(S&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(i=>(this._params=g,this._data="",this._hitLimit=!1,i));return this._params=g,this._data="",this._hitLimit=!1,f}}},2015:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const c=n(844),u=n(8742),o=n(6242),_=n(6351);class g{constructor(r){this.table=new Uint8Array(r)}setDefault(r,t){this.table.fill(r<<4|t)}add(r,t,e,a){this.table[t<<8|r]=e<<4|a}addMany(r,t,e,a){for(let l=0;l<r.length;l++)this.table[t<<8|r[l]]=e<<4|a}}s.TransitionTable=g;const S=160;s.VT500_TRANSITION_TABLE=function(){const i=new g(4095),r=Array.apply(null,Array(256)).map((C,d)=>d),t=(C,d)=>r.slice(C,d),e=t(32,127),a=t(0,24);a.push(25),a.push.apply(a,t(28,32));const l=t(0,14);let v;for(v in i.setDefault(1,0),i.addMany(e,0,2,0),l)i.addMany([24,26,153,154],v,3,0),i.addMany(t(128,144),v,3,0),i.addMany(t(144,152),v,3,0),i.add(156,v,0,0),i.add(27,v,11,1),i.add(157,v,4,8),i.addMany([152,158,159],v,0,7),i.add(155,v,11,3),i.add(144,v,11,9);return i.addMany(a,0,3,0),i.addMany(a,1,3,1),i.add(127,1,0,1),i.addMany(a,8,0,8),i.addMany(a,3,3,3),i.add(127,3,0,3),i.addMany(a,4,3,4),i.add(127,4,0,4),i.addMany(a,6,3,6),i.addMany(a,5,3,5),i.add(127,5,0,5),i.addMany(a,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(e,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(t(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(e,7,0,7),i.addMany(a,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(t(64,127),3,7,0),i.addMany(t(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(t(48,60),4,8,4),i.addMany(t(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(t(32,64),6,0,6),i.add(127,6,0,6),i.addMany(t(64,127),6,0,0),i.addMany(t(32,48),3,9,5),i.addMany(t(32,48),5,9,5),i.addMany(t(48,64),5,0,6),i.addMany(t(64,127),5,7,0),i.addMany(t(32,48),4,9,5),i.addMany(t(32,48),1,9,2),i.addMany(t(32,48),2,9,2),i.addMany(t(48,127),2,10,0),i.addMany(t(48,80),1,10,0),i.addMany(t(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(t(96,127),1,10,0),i.add(80,1,11,9),i.addMany(a,9,0,9),i.add(127,9,0,9),i.addMany(t(28,32),9,0,9),i.addMany(t(32,48),9,9,12),i.addMany(t(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(a,11,0,11),i.addMany(t(32,128),11,0,11),i.addMany(t(28,32),11,0,11),i.addMany(a,10,0,10),i.add(127,10,0,10),i.addMany(t(28,32),10,0,10),i.addMany(t(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(t(32,48),10,9,12),i.addMany(a,12,0,12),i.add(127,12,0,12),i.addMany(t(28,32),12,0,12),i.addMany(t(32,48),12,9,12),i.addMany(t(48,64),12,0,11),i.addMany(t(64,127),12,12,13),i.addMany(t(64,127),10,12,13),i.addMany(t(64,127),9,12,13),i.addMany(a,13,13,13),i.addMany(e,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(S,0,2,0),i.add(S,8,5,8),i.add(S,6,0,6),i.add(S,11,0,11),i.add(S,13,13,13),i}();class f extends c.Disposable{constructor(r=s.VT500_TRANSITION_TABLE){super(),this._transitions=r,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(t,e,a)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,e)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new o.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(r,t=[64,126]){let e=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if(e=r.prefix.charCodeAt(0),e&&60>e||e>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let l=0;l<r.intermediates.length;++l){const v=r.intermediates.charCodeAt(l);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");e<<=8,e|=v}}if(r.final.length!==1)throw new Error("final must be a single byte");const a=r.final.charCodeAt(0);if(t[0]>a||a>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return e<<=8,e|=a,e}identToString(r){const t=[];for(;r;)t.push(String.fromCharCode(255&r)),r>>=8;return t.reverse().join("")}setPrintHandler(r){this._printHandler=r}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(r,t){const e=this._identifier(r,[48,126]);this._escHandlers[e]===void 0&&(this._escHandlers[e]=[]);const a=this._escHandlers[e];return a.push(t),{dispose:()=>{const l=a.indexOf(t);l!==-1&&a.splice(l,1)}}}clearEscHandler(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]}setEscHandlerFallback(r){this._escHandlerFb=r}setExecuteHandler(r,t){this._executeHandlers[r.charCodeAt(0)]=t}clearExecuteHandler(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]}setExecuteHandlerFallback(r){this._executeHandlerFb=r}registerCsiHandler(r,t){const e=this._identifier(r);this._csiHandlers[e]===void 0&&(this._csiHandlers[e]=[]);const a=this._csiHandlers[e];return a.push(t),{dispose:()=>{const l=a.indexOf(t);l!==-1&&a.splice(l,1)}}}clearCsiHandler(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]}setCsiHandlerFallback(r){this._csiHandlerFb=r}registerDcsHandler(r,t){return this._dcsParser.registerHandler(this._identifier(r),t)}clearDcsHandler(r){this._dcsParser.clearHandler(this._identifier(r))}setDcsHandlerFallback(r){this._dcsParser.setHandlerFallback(r)}registerOscHandler(r,t){return this._oscParser.registerHandler(r,t)}clearOscHandler(r){this._oscParser.clearHandler(r)}setOscHandlerFallback(r){this._oscParser.setHandlerFallback(r)}setErrorHandler(r){this._errorHandler=r}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(r,t,e,a,l){this._parseStack.state=r,this._parseStack.handlers=t,this._parseStack.handlerPos=e,this._parseStack.transition=a,this._parseStack.chunkPos=l}parse(r,t,e){let a,l=0,v=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(e===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const d=this._parseStack.handlers;let m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(e===!1&&m>-1){for(;m>=0&&(a=d[m](this._params),a!==!0);m--)if(a instanceof Promise)return this._parseStack.handlerPos=m,a}this._parseStack.handlers=[];break;case 4:if(e===!1&&m>-1){for(;m>=0&&(a=d[m](),a!==!0);m--)if(a instanceof Promise)return this._parseStack.handlerPos=m,a}this._parseStack.handlers=[];break;case 6:if(l=r[this._parseStack.chunkPos],a=this._dcsParser.unhook(l!==24&&l!==26,e),a)return a;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(l=r[this._parseStack.chunkPos],a=this._oscParser.end(l!==24&&l!==26,e),a)return a;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let d=C;d<t;++d){switch(l=r[d],v=this._transitions.table[this.currentState<<8|(l<160?l:S)],v>>4){case 2:for(let B=d+1;;++B){if(B>=t||(l=r[B])<32||l>126&&l<S){this._printHandler(r,d,B),d=B-1;break}if(++B>=t||(l=r[B])<32||l>126&&l<S){this._printHandler(r,d,B),d=B-1;break}if(++B>=t||(l=r[B])<32||l>126&&l<S){this._printHandler(r,d,B),d=B-1;break}if(++B>=t||(l=r[B])<32||l>126&&l<S){this._printHandler(r,d,B),d=B-1;break}}break;case 3:this._executeHandlers[l]?this._executeHandlers[l]():this._executeHandlerFb(l),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:d,code:l,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const m=this._csiHandlers[this._collect<<8|l];let k=m?m.length-1:-1;for(;k>=0&&(a=m[k](this._params),a!==!0);k--)if(a instanceof Promise)return this._preserveStack(3,m,k,v,d),a;k<0&&this._csiHandlerFb(this._collect<<8|l,this._params),this.precedingCodepoint=0;break;case 8:do switch(l){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(l-48)}while(++d<t&&(l=r[d])>47&&l<60);d--;break;case 9:this._collect<<=8,this._collect|=l;break;case 10:const O=this._escHandlers[this._collect<<8|l];let R=O?O.length-1:-1;for(;R>=0&&(a=O[R](),a!==!0);R--)if(a instanceof Promise)return this._preserveStack(4,O,R,v,d),a;R<0&&this._escHandlerFb(this._collect<<8|l),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|l,this._params);break;case 13:for(let B=d+1;;++B)if(B>=t||(l=r[B])===24||l===26||l===27||l>127&&l<S){this._dcsParser.put(r,d,B),d=B-1;break}break;case 14:if(a=this._dcsParser.unhook(l!==24&&l!==26),a)return this._preserveStack(6,[],0,v,d),a;l===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let B=d+1;;B++)if(B>=t||(l=r[B])<32||l>127&&l<S){this._oscParser.put(r,d,B),d=B-1;break}break;case 6:if(a=this._oscParser.end(l!==24&&l!==26),a)return this._preserveStack(5,[],0,v,d),a;l===27&&(v|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&v}}}s.EscapeSequenceParser=f},6242:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const c=n(5770),u=n(482),o=[];s.OscParser=class{constructor(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,g){this._handlers[_]===void 0&&(this._handlers[_]=[]);const S=this._handlers[_];return S.push(g),{dispose:()=>{const f=S.indexOf(g);f!==-1&&S.splice(f,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||o,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,g,S){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(_,g,S);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(_,g,S))}start(){this.reset(),this._state=1}put(_,g,S){if(this._state!==3){if(this._state===1)for(;g<S;){const f=_[g++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&S-g>0&&this._put(_,g,S)}}end(_,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,f=this._active.length-1,i=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,S=g,i=this._stack.fallThrough,this._stack.paused=!1),!i&&S===!1){for(;f>=0&&(S=this._active[f].end(_),S!==!0);f--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,S;f--}for(;f>=0;f--)if(S=this._active[f].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",_);this._active=o,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,g,S){this._hitLimit||(this._data+=(0,u.utf32ToString)(_,g,S),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let g=!1;if(this._hitLimit)g=!1;else if(_&&(g=this._handler(this._data),g instanceof Promise))return g.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,g}}},8742:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const n=2147483647;class c{static fromArray(o){const _=new c;if(!o.length)return _;for(let g=Array.isArray(o[0])?1:0;g<o.length;++g){const S=o[g];if(Array.isArray(S))for(let f=0;f<S.length;++f)_.addSubParam(S[f]);else _.addParam(S)}return _}constructor(o=32,_=32){if(this.maxLength=o,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(o),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(o),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const o=new c(this.maxLength,this.maxSubParamsLength);return o.params.set(this.params),o.length=this.length,o._subParams.set(this._subParams),o._subParamsLength=this._subParamsLength,o._subParamsIdx.set(this._subParamsIdx),o._rejectDigits=this._rejectDigits,o._rejectSubDigits=this._rejectSubDigits,o._digitIsSub=this._digitIsSub,o}toArray(){const o=[];for(let _=0;_<this.length;++_){o.push(this.params[_]);const g=this._subParamsIdx[_]>>8,S=255&this._subParamsIdx[_];S-g>0&&o.push(Array.prototype.slice.call(this._subParams,g,S))}return o}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(o){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=o>n?n:o}}addSubParam(o){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=o>n?n:o,this._subParamsIdx[this.length-1]++}}hasSubParams(o){return(255&this._subParamsIdx[o])-(this._subParamsIdx[o]>>8)>0}getSubParams(o){const _=this._subParamsIdx[o]>>8,g=255&this._subParamsIdx[o];return g-_>0?this._subParams.subarray(_,g):null}getSubParamsAll(){const o={};for(let _=0;_<this.length;++_){const g=this._subParamsIdx[_]>>8,S=255&this._subParamsIdx[_];S-g>0&&(o[_]=this._subParams.slice(g,S))}return o}addDigit(o){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const g=this._digitIsSub?this._subParams:this.params,S=g[_-1];g[_-1]=~S?Math.min(10*S+o,n):o}}s.Params=c},5741:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===n){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(c,1)}}},8771:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const c=n(3785),u=n(511);s.BufferApiView=class{constructor(o,_){this._buffer=o,this.type=_}init(o){return this._buffer=o,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(o){const _=this._buffer.lines.get(o);if(_)return new c.BufferLineApiView(_)}getNullCell(){return new u.CellData}}},3785:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const c=n(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,o){if(!(u<0||u>=this._line.length))return o?(this._line.loadCell(u,o),o):this._line.loadCell(u,new c.CellData)}translateToString(u,o,_){return this._line.translateToString(u,o,_)}}},8285:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const c=n(8771),u=n(8460),o=n(844);class _ extends o.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=_},7975:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,c){return this._core.registerCsiHandler(n,u=>c(u.toArray()))}addCsiHandler(n,c){return this.registerCsiHandler(n,c)}registerDcsHandler(n,c){return this._core.registerDcsHandler(n,(u,o)=>c(u,o.toArray()))}addDcsHandler(n,c){return this.registerDcsHandler(n,c)}registerEscHandler(n,c){return this._core.registerEscHandler(n,c)}addEscHandler(n,c){return this.registerEscHandler(n,c)}registerOscHandler(n,c){return this._core.registerOscHandler(n,c)}addOscHandler(n,c){return this.registerOscHandler(n,c)}}},7090:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(w,s,n){var c=this&&this.__decorate||function(i,r,t,e){var a,l=arguments.length,v=l<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,r,t,e);else for(var C=i.length-1;C>=0;C--)(a=i[C])&&(v=(l<3?a(v):l>3?a(r,t,v):a(r,t))||v);return l>3&&v&&Object.defineProperty(r,t,v),v},u=this&&this.__param||function(i,r){return function(t,e){r(t,e,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const o=n(8460),_=n(844),g=n(5295),S=n(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let f=s.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(i){super(),this.isUserScrolling=!1,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(i.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(i.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new g.BufferSet(i,this))}resize(i,r){this.cols=i,this.rows=r,this.buffers.resize(i,r),this._onResize.fire({cols:i,rows:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(i,r=!1){const t=this.buffer;let e;e=this._cachedBlankLine,e&&e.length===this.cols&&e.getFg(0)===i.fg&&e.getBg(0)===i.bg||(e=t.getBlankLine(i,r),this._cachedBlankLine=e),e.isWrapped=r;const a=t.ybase+t.scrollTop,l=t.ybase+t.scrollBottom;if(t.scrollTop===0){const v=t.lines.isFull;l===t.lines.length-1?v?t.lines.recycle().copyFrom(e):t.lines.push(e.clone()):t.lines.splice(l+1,0,e.clone()),v?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const v=l-a+1;t.lines.shiftElements(a+1,v-1,-1),t.lines.set(l,e.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(i,r,t){const e=this.buffer;if(i<0){if(e.ydisp===0)return;this.isUserScrolling=!0}else i+e.ydisp>=e.ybase&&(this.isUserScrolling=!1);const a=e.ydisp;e.ydisp=Math.max(Math.min(e.ydisp+i,e.ybase),0),a!==e.ydisp&&(r||this._onScroll.fire(e.ydisp))}};s.BufferService=f=c([u(0,S.IOptionsService)],f)},7994:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,c){this._charsets[n]=c,this.glevel===n&&(this.charset=c)}}},1753:function(w,s,n){var c=this&&this.__decorate||function(e,a,l,v){var C,d=arguments.length,m=d<3?a:v===null?v=Object.getOwnPropertyDescriptor(a,l):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,a,l,v);else for(var k=e.length-1;k>=0;k--)(C=e[k])&&(m=(d<3?C(m):d>3?C(a,l,m):C(a,l))||m);return d>3&&m&&Object.defineProperty(a,l,m),m},u=this&&this.__param||function(e,a){return function(l,v){a(l,v,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const o=n(2585),_=n(8460),g=n(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button!==4&&e.action===1&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>e.action!==32||e.button!==3},ANY:{events:31,restrict:e=>!0}};function f(e,a){let l=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(l|=64,l|=e.action):(l|=3&e.button,4&e.button&&(l|=64),8&e.button&&(l|=128),e.action===32?l|=32:e.action!==0||a||(l|=3)),l}const i=String.fromCharCode,r={DEFAULT:e=>{const a=[f(e,!1)+32,e.col+32,e.row+32];return a[0]>255||a[1]>255||a[2]>255?"":`\x1B[M${i(a[0])}${i(a[1])}${i(a[2])}`},SGR:e=>{const a=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${f(e,!0)};${e.col};${e.row}${a}`},SGR_PIXELS:e=>{const a=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${f(e,!0)};${e.x};${e.y}${a}`}};let t=s.CoreMouseService=class extends g.Disposable{constructor(e,a){super(),this._bufferService=e,this._coreService=a,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const l of Object.keys(S))this.addProtocol(l,S[l]);for(const l of Object.keys(r))this.addEncoding(l,r[l]);this.reset()}addProtocol(e,a){this._protocols[e]=a}addEncoding(e,a){this._encodings[e]=a}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;const a=this._encodings[this._activeEncoding](e);return a&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(a):this._coreService.triggerDataEvent(a,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,a,l){if(l){if(e.x!==a.x||e.y!==a.y)return!1}else if(e.col!==a.col||e.row!==a.row)return!1;return e.button===a.button&&e.action===a.action&&e.ctrl===a.ctrl&&e.alt===a.alt&&e.shift===a.shift}};s.CoreMouseService=t=c([u(0,o.IBufferService),u(1,o.ICoreService)],t)},6975:function(w,s,n){var c=this&&this.__decorate||function(t,e,a,l){var v,C=arguments.length,d=C<3?e:l===null?l=Object.getOwnPropertyDescriptor(e,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,e,a,l);else for(var m=t.length-1;m>=0;m--)(v=t[m])&&(d=(C<3?v(d):C>3?v(e,a,d):v(e,a))||d);return C>3&&d&&Object.defineProperty(e,a,d),d},u=this&&this.__param||function(t,e){return function(a,l){e(a,l,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const o=n(1439),_=n(8460),g=n(844),S=n(2585),f=Object.freeze({insertMode:!1}),i=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let r=s.CoreService=class extends g.Disposable{constructor(t,e,a){super(),this._bufferService=t,this._logService=e,this._optionsService=a,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,o.clone)(f),this.decPrivateModes=(0,o.clone)(i)}reset(){this.modes=(0,o.clone)(f),this.decPrivateModes=(0,o.clone)(i)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;const a=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&a.ybase!==a.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,()=>t.split("").map(l=>l.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};s.CoreService=r=c([u(0,S.IBufferService),u(1,S.ILogService),u(2,S.IOptionsService)],r)},9074:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const c=n(8055),u=n(8460),o=n(844),_=n(6106);let g=0,S=0;class f extends o.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(t=>t==null?void 0:t.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,o.toDisposable)(()=>this.reset()))}registerDecoration(t){if(t.marker.isDisposed)return;const e=new i(t);if(e){const a=e.marker.onDispose(()=>e.dispose());e.onDispose(()=>{e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),a.dispose())}),this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,a){var l,v,C;let d=0,m=0;for(const k of this._decorations.getKeyIterator(e))d=(l=k.options.x)!==null&&l!==void 0?l:0,m=d+((v=k.options.width)!==null&&v!==void 0?v:1),t>=d&&t<m&&(!a||((C=k.options.layer)!==null&&C!==void 0?C:"bottom")===a)&&(yield k)}forEachDecorationAtCell(t,e,a,l){this._decorations.forEachByKey(e,v=>{var C,d,m;g=(C=v.options.x)!==null&&C!==void 0?C:0,S=g+((d=v.options.width)!==null&&d!==void 0?d:1),t>=g&&t<S&&(!a||((m=v.options.layer)!==null&&m!==void 0?m:"bottom")===a)&&l(v)})}}s.DecorationService=f;class i extends o.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const c=n(2585),u=n(8343);class o{constructor(...g){this._entries=new Map;for(const[S,f]of g)this.set(S,f)}set(g,S){const f=this._entries.get(g);return this._entries.set(g,S),f}forEach(g){for(const[S,f]of this._entries.entries())g(S,f)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}s.ServiceCollection=o,s.InstantiationService=class{constructor(){this._services=new o,this._services.set(c.IInstantiationService,this)}setService(_,g){this._services.set(_,g)}getService(_){return this._services.get(_)}createInstance(_,...g){const S=(0,u.getServiceDependencies)(_).sort((r,t)=>r.index-t.index),f=[];for(const r of S){const t=this._services.get(r.id);if(!t)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${r.id}.`);f.push(t)}const i=S.length>0?S[0].index:g.length;if(g.length!==i)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${i+1} conflicts with ${g.length} static arguments`);return new _(...g,...f)}}},7866:function(w,s,n){var c=this&&this.__decorate||function(i,r,t,e){var a,l=arguments.length,v=l<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,r,t,e);else for(var C=i.length-1;C>=0;C--)(a=i[C])&&(v=(l<3?a(v):l>3?a(r,t,v):a(r,t))||v);return l>3&&v&&Object.defineProperty(r,t,v),v},u=this&&this.__param||function(i,r){return function(t,e){r(t,e,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const o=n(844),_=n(2585),g={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let S,f=s.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(i){super(),this._optionsService=i,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(i){for(let r=0;r<i.length;r++)typeof i[r]=="function"&&(i[r]=i[r]())}_log(i,r,t){this._evalLazyOptionalParams(t),i.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+r,...t)}trace(i,...r){var t,e;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((e=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.trace.bind(this._optionsService.options.logger))!==null&&e!==void 0?e:console.log,i,r)}debug(i,...r){var t,e;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((e=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.debug.bind(this._optionsService.options.logger))!==null&&e!==void 0?e:console.log,i,r)}info(i,...r){var t,e;this._logLevel<=_.LogLevelEnum.INFO&&this._log((e=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.info.bind(this._optionsService.options.logger))!==null&&e!==void 0?e:console.info,i,r)}warn(i,...r){var t,e;this._logLevel<=_.LogLevelEnum.WARN&&this._log((e=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.warn.bind(this._optionsService.options.logger))!==null&&e!==void 0?e:console.warn,i,r)}error(i,...r){var t,e;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((e=(t=this._optionsService.options.logger)===null||t===void 0?void 0:t.error.bind(this._optionsService.options.logger))!==null&&e!==void 0?e:console.error,i,r)}};s.LogService=f=c([u(0,_.IOptionsService)],f),s.setTraceLogger=function(i){S=i},s.traceCall=function(i,r,t){if(typeof t.value!="function")throw new Error("not supported");const e=t.value;t.value=function(...a){if(S.logLevel!==_.LogLevelEnum.TRACE)return e.apply(this,a);S.trace(`GlyphRenderer#${e.name}(${a.map(v=>JSON.stringify(v)).join(", ")})`);const l=e.apply(this,a);return S.trace(`GlyphRenderer#${e.name} return`,l),l}}},7302:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const c=n(8460),u=n(844),o=n(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends u.Disposable{constructor(f){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i=Object.assign({},s.DEFAULT_OPTIONS);for(const r in f)if(r in i)try{const t=f[r];i[r]=this._sanitizeAndValidateOption(r,t)}catch(t){console.error(t)}this.rawOptions=i,this.options=Object.assign({},i),this._setupOptions()}onSpecificOptionChange(f,i){return this.onOptionChange(r=>{r===f&&i(this.rawOptions[f])})}onMultipleOptionChange(f,i){return this.onOptionChange(r=>{f.indexOf(r)!==-1&&i()})}_setupOptions(){const f=r=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},i=(r,t)=>{if(!(r in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);t=this._sanitizeAndValidateOption(r,t),this.rawOptions[r]!==t&&(this.rawOptions[r]=t,this._onOptionChange.fire(r))};for(const r in this.rawOptions){const t={get:f.bind(this,r),set:i.bind(this,r)};Object.defineProperty(this.options,r,t)}}_sanitizeAndValidateOption(f,i){switch(f){case"cursorStyle":if(i||(i=s.DEFAULT_OPTIONS[f]),!function(r){return r==="block"||r==="underline"||r==="bar"}(i))throw new Error(`"${i}" is not a valid value for ${f}`);break;case"wordSeparator":i||(i=s.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof i=="number"&&1<=i&&i<=1e3)break;i=_.includes(i)?i:s.DEFAULT_OPTIONS[f];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${f} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&i!==0)throw new Error(`${f} must be numeric, value: ${i}`);break;case"windowsPty":i=i??{}}return i}}s.OptionsService=g},2660:function(w,s,n){var c=this&&this.__decorate||function(g,S,f,i){var r,t=arguments.length,e=t<3?S:i===null?i=Object.getOwnPropertyDescriptor(S,f):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(g,S,f,i);else for(var a=g.length-1;a>=0;a--)(r=g[a])&&(e=(t<3?r(e):t>3?r(S,f,e):r(S,f))||e);return t>3&&e&&Object.defineProperty(S,f,e),e},u=this&&this.__param||function(g,S){return function(f,i){S(f,i,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const o=n(2585);let _=s.OscLinkService=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){const S=this._bufferService.buffer;if(g.id===void 0){const a=S.addMarker(S.ybase+S.y),l={data:g,id:this._nextId++,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(l,a)),this._dataByLinkId.set(l.id,l),l.id}const f=g,i=this._getEntryIdKey(f),r=this._entriesWithId.get(i);if(r)return this.addLineToLink(r.id,S.ybase+S.y),r.id;const t=S.addMarker(S.ybase+S.y),e={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[t]};return t.onDispose(()=>this._removeMarkerFromLink(e,t)),this._entriesWithId.set(e.key,e),this._dataByLinkId.set(e.id,e),e.id}addLineToLink(g,S){const f=this._dataByLinkId.get(g);if(f&&f.lines.every(i=>i.line!==S)){const i=this._bufferService.buffer.addMarker(S);f.lines.push(i),i.onDispose(()=>this._removeMarkerFromLink(f,i))}}getLinkData(g){var S;return(S=this._dataByLinkId.get(g))===null||S===void 0?void 0:S.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,S){const f=g.lines.indexOf(S);f!==-1&&(g.lines.splice(f,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};s.OscLinkService=_=c([u(0,o.IBufferService)],_)},8343:(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const n="di$target",c="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[c]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);const o=function(_,g,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,i,r){i[n]===i?i[c].push({id:f,index:r}):(i[c]=[{id:f,index:r}],i[n]=i)})(o,_,S)};return o.toString=()=>u,s.serviceRegistry.set(u,o),o}},2585:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const c=n(8343);var u;s.IBufferService=(0,c.createDecorator)("BufferService"),s.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),s.ICoreService=(0,c.createDecorator)("CoreService"),s.ICharsetService=(0,c.createDecorator)("CharsetService"),s.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,c.createDecorator)("LogService"),s.IOptionsService=(0,c.createDecorator)("OptionsService"),s.IOscLinkService=(0,c.createDecorator)("OscLinkService"),s.IUnicodeService=(0,c.createDecorator)("UnicodeService"),s.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(w,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const c=n(8460),u=n(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const o=new u.UnicodeV6;this.register(o),this._active=o.version,this._activeProvider=o}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(o){if(!this._providers[o])throw new Error(`unknown Unicode version "${o}"`);this._active=o,this._activeProvider=this._providers[o],this._onChange.fire(o)}register(o){this._providers[o.version]=o}wcwidth(o){return this._activeProvider.wcwidth(o)}getStringCellWidth(o){let _=0;const g=o.length;for(let S=0;S<g;++S){let f=o.charCodeAt(S);if(55296<=f&&f<=56319){if(++S>=g)return _+this.wcwidth(f);const i=o.charCodeAt(S);56320<=i&&i<=57343?f=1024*(f-55296)+i-56320+65536:_+=this.wcwidth(i)}_+=this.wcwidth(f)}return _}}}},y={};function A(w){var s=y[w];if(s!==void 0)return s.exports;var n=y[w]={exports:{}};return b[w].call(n.exports,n,n.exports,A),n.exports}var L={};return(()=>{var w=L;Object.defineProperty(w,"__esModule",{value:!0}),w.Terminal=void 0;const s=A(9042),n=A(3236),c=A(844),u=A(5741),o=A(8285),_=A(7975),g=A(7090),S=["cols","rows"];class f extends c.Disposable{constructor(r){super(),this._core=this.register(new n.Terminal(r)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=a=>this._core.options[a],e=(a,l)=>{this._checkReadonlyOptions(a),this._core.options[a]=l};for(const a in this._core.options){const l={get:t.bind(this,a),set:e.bind(this,a)};Object.defineProperty(this._publicOptions,a,l)}}_checkReadonlyOptions(r){if(S.includes(r))throw new Error(`Option "${r}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new g.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new o.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const r=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}}get options(){return this._publicOptions}set options(r){for(const t in r)this._publicOptions[t]=r[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)}open(r){this._core.open(r)}attachCustomKeyEventHandler(r){this._core.attachCustomKeyEventHandler(r)}registerLinkProvider(r){return this._core.registerLinkProvider(r)}registerCharacterJoiner(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)}deregisterCharacterJoiner(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)}registerMarker(r=0){return this._verifyIntegers(r),this._core.registerMarker(r)}registerDecoration(r){var t,e,a;return this._checkProposedApi(),this._verifyPositiveIntegers((t=r.x)!==null&&t!==void 0?t:0,(e=r.width)!==null&&e!==void 0?e:0,(a=r.height)!==null&&a!==void 0?a:0),this._core.registerDecoration(r)}hasSelection(){return this._core.hasSelection()}select(r,t,e){this._verifyIntegers(r,t,e),this._core.select(r,t,e)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)}dispose(){super.dispose()}scrollLines(r){this._verifyIntegers(r),this._core.scrollLines(r)}scrollPages(r){this._verifyIntegers(r),this._core.scrollPages(r)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(r){this._verifyIntegers(r),this._core.scrollToLine(r)}clear(){this._core.clear()}write(r,t){this._core.write(r,t)}writeln(r,t){this._core.write(r),this._core.write(`\r
`,t)}paste(r){this._core.paste(r)}refresh(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(r){this._addonManager.loadAddon(this,r)}static get strings(){return s}_verifyIntegers(...r){for(const t of r)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...r){for(const t of r)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}w.Terminal=f})(),L})())})(Ci);var kn=Ci.exports;const Rn={class:"container"},Ln={id:"code-show"},Dn={class:"code-now-container"},An={class:"code-box"},Tn={id:"spinner",class:"code-now-container"},On={id:"advantage"},Bn={id:"advantage"},Pn={id:"team"},Mn={class:"team-card"},In={key:0,class:"card-container"},Hn=ve({__name:"index",setup(h){const p=fe("hello world"),b=Je.map(u=>u.title);let y=fe(""),A=fe(""),L=fe(!1),w=fe(!1),s=u=>{console.log("not initialized yet...")};const n=new kn.Terminal({convertEol:!0,disableStdin:!0,fontSize:14,theme:{foreground:"#ECECEC",background:"#000000"}});function c(u){A.value=u[u.length-1]===`
`?u.slice(0,-1):u,n.reset(),n.write(A.value)}return Ie(async()=>{y.value=Je[0].code,window.addEventListener("scroll",()=>{!w.value&&xn(document.getElementById("spinner"))&&(w.value=!0,Dt(()=>import("./index-732b4600.js").then(async u=>(await u.__tla,u)).then(u=>u.i),["assets/index-732b4600.js","assets/index-d6e792e7.js","assets/index-50c67f50.css","assets/index-46db971c.css"]).then(async u=>{let o=await u.default(document.getElementById("container"),Je[0].code);o.editor.onDidChangeModelContent(()=>{y.value=o.editor.getModel().getValue()}),n.open(document.querySelector(".code-block")),n.resize(44,17),s=_=>{var S;const g=((S=Je.find(f=>f.title===_))==null?void 0:S.code)||"";y.value=g,o.setContent(g)},L.value=!0}))})}),$n(()=>p.value,u=>{s(u)}),(u,o)=>(ie(),re("div",Rn,[te(Z(Ki)),te(Z(Ai)),z("div",Ln,[o[4]||(o[4]=z("div",{class:"gradient-font title"},"Enjoy coding pivot lang now!",-1)),o[5]||(o[5]=z("div",{class:"detail-describe"}," With the help of Web Assembly technology, we are able to provide support for some of the Pivot Lang syntax in the browser for you to experience. ",-1)),Ze(z("div",Dn,[z("div",An,[te(Z(Or),{onUpdateVal:o[0]||(o[0]=_=>p.value=_),onUpdateOutput:c,tablist:Z(b),val:p.value,code:Z(y)},null,8,["tablist","val","code"]),o[1]||(o[1]=z("div",{class:"code-container"},[z("div",{id:"container"})],-1))]),o[2]||(o[2]=z("div",{class:"execution"},[z("div",{class:"execution-title"},"Execution"),z("div",{class:"code-block"})],-1))],512),[[Qe,Z(L)]]),Ze(z("div",Tn,o[3]||(o[3]=[z("div",{class:"spinner"},null,-1)]),512),[[Qe,!Z(L)]])]),z("div",On,[o[6]||(o[6]=z("div",{class:"gradient-font title"},"Immix Garbage Collector",-1)),o[7]||(o[7]=z("div",{class:"detail-describe"}," Significantly outperforming the well known Boehm-Demers-Weiser (BDW) collector in the multi-thread environment, the Immix collector is a state-of-the-art garbage collector for modern hardware. It is designed to be highly concurrent and to exploit the locality of reference patterns in modern programs. ",-1)),Z(w)?(ie(),At(Z(Br),{key:0})):et("",!0)]),z("div",Bn,[o[8]||(o[8]=z("div",{class:"gradient-font title"},"Reliability",-1)),o[9]||(o[9]=z("div",{class:"detail-describe"}," Pivot Lang is heavily tested to ensure that it is stable and reliable. We have a large number of unit tests and integration tests to ensure that the coverage of the code is as high as possible. ",-1)),Z(w)?(ie(),At(Z(hn),{key:0})):et("",!0)]),te(Z(wn)),te(Z(Fi)),z("div",Pn,[o[10]||(o[10]=z("div",{class:"gradient-font title"},"Meet The Team",-1)),z("div",Mn,[Z(w)?(ie(),re("div",In,[(ie(!0),re(He,null,Rt(Z(En),_=>(ie(),At(Z(Hr),{key:_.name,name:_.name,github:_.github,avatar:_.avatar,identity:_.identity},null,8,["name","github","avatar","identity"]))),128))])):et("",!0)])]),o[11]||(o[11]=kt('<div id="join"><div class="gradient-font title">Join Our Team</div><div class="two-grid-container"><img class="left" src="'+ki+'"><div class="detail-describe right"> Pivot lang is still developing and we long for every geek joingus, completing the language together. If you are interested in pivot lang, click the button and write the email to <span style="color:white;">mstmole@163.com</span> introduce yourself now! </div></div></div>',1)),te(Z(tn)),te(Z(Wr))]))}});Ei=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"}))});export{qn as __tla,Tt as g,Ei as i};
